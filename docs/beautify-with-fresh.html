<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 8 Beautify with {fresh} | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.9002/transition.js"></script><script src="libs/bs3compat-0.2.5.9002/tabs.js"></script><script src="libs/bs3compat-0.2.5.9002/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="foreword.html">Foreword</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">2</span> Mastering {htmltools}</a></li>
<li><a class="" href="web-dependencies.html"><span class="header-section-number">3</span> Discover Shiny dependencies</a></li>
<li><a class="" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Dependency utilities</a></li>
<li><a class="" href="web-applications.html"><span class="header-section-number">5</span> Web application concepts</a></li>
<li class="book-part">Beautify with CSS and Sass</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">6</span> CSS for Shiny</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">7</span> Introduction to Sass</a></li>
<li><a class="active" href="beautify-with-fresh.html"><span class="header-section-number">8</span> Beautify with {fresh}</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">9</span> Beautify with {bslib}</a></li>
<li class="book-part">Unleash interactivity with JavaScript</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">10</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">11</span> R and JS</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">12</span> Shiny’s input system</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">13</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">14</span> Mastering Shiny’s events</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">15</span> Dynamically manage content with handlers</a></li>
<li class="book-part">Practice 1: a dashboard template</li>
<li><a class="" href="custom-templates-selection.html"><span class="header-section-number">16</span> Template selection</a></li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">17</span> Define dependencies</a></li>
<li><a class="" href="custom-templates-skeleton.html"><span class="header-section-number">18</span> Create template elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">19</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">20</span> Adding more interactivity</a></li>
<li><a class="" href="custom-templates-testing.html"><span class="header-section-number">21</span> Testing and validating templates elements</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">22</span> Introduction to {charpente}</a></li>
<li class="book-part">Case study 2: Mobile development with Shiny</li>
<li><a class="" href="mobile-shiny-intro.html"><span class="header-section-number">23</span> Introduction</a></li>
<li><a class="" href="mobile-shinyMobile.html"><span class="header-section-number">24</span> Reconstruct {shinyMobile}</a></li>
<li><a class="" href="mobile-pwa.html"><span class="header-section-number">25</span> {shinyMobile} and PWA</a></li>
<li><a class="" href="mobile-widgets.html"><span class="header-section-number">26</span> Design widgets</a></li>
<li><a class="" href="mobile-going-further.html"><span class="header-section-number">27</span> Fine tune {shinyMobile}</a></li>
<li class="book-part">Going further</li>
<li><a class="" href="going-further-reactR.html"><span class="header-section-number">28</span> R + Shiny + React: welcome {reactR}</a></li>
<li><a class="" href="going-further-where-to-go.html"><span class="header-section-number">29</span> What to do next?</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="code-outputs.html"><span class="header-section-number">A</span> Code outputs</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="beautify-with-fresh" class="section level1">
<h1>
<span class="header-section-number">8</span> Beautify with <code>{fresh}</code><a class="anchor" aria-label="anchor" href="#beautify-with-fresh"><i class="fas fa-link"></i></a>
</h1>
<p>As shown in the previous chapter, <strong>Sass</strong> is a powerful tool to customize apps in minutes, in addition to drastically improve <strong>code quality</strong>, thereby empowering long term maintenance. Some CSS knowledge are required and it may not be that easy to find the corresponding variables to a specific purpose. For instance, would you be able to guess what Bootstrap 4 variables are required to customize the <a href="https://rinterface.github.io/bs4Dash/index.html">bs4Dash</a> template?</p>
<p>In this chapter, as well as in chapter <a href="beautify-with-bootstraplib.html#beautify-with-bootstraplib">9</a>, we show higher level tools to
customize Bootstrap (3 or 4 and more) based templates. Let’s start with the first one: <a href="https://github.com/dreamRs/fresh">fresh</a>.</p>
<p><a href="https://github.com/dreamRs/fresh">{fresh}</a> is an R package developed by the <a href="https://www.dreamrs.fr/">dreamRs</a> team, also authors of <a href="https://github.com/dreamRs/shinyWidgets">shinyWidget</a> and <a href="https://github.com/dreamRs/esquisse">esquisse</a>. All dreamRs projects are clearly a great source of inspiration to design outstanding Shiny apps, to such an extent that we highly recommend the reader to explore more about their work!</p>
<div id="fresh-the-big-picture" class="section level2">
<h2>
<span class="header-section-number">8.1</span> <code>{fresh}</code>, the big picture<a class="anchor" aria-label="anchor" href="#fresh-the-big-picture"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://github.com/dreamRs/fresh">fresh</a> is built on top of <a href="https://rstudio.github.io/sass/">sass</a> and what you see in Figures <a href="beautify-with-fresh.html#fig:bs4Dash-fresh">8.5</a> and <a href="beautify-with-fresh.html#fig:shinydashboardPlus-fresh">8.6</a> may be done in few minutes! To design a new theme, the main function is <code><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme()</a></code>:</p>
<div class="sourceCode" id="cb308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">create_theme</span><span class="op">(</span>
  <span class="va">...</span>,
  theme <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"default"</span>, <span class="st">"cerulean"</span>, <span class="va">...</span><span class="op">)</span>,
  output_file <span class="op">=</span> <span class="cn">NULL</span>,
  include_assets <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
<p><strong>theme</strong> allows to import a <a href="https://bootswatch.com/">Bootswatch</a> CSS theme, you may already know if you ever used <a href="http://rstudio.github.io/shinythemes/">shinythemes</a>. <strong>output_file</strong> controls the output. If provided, <code><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme()</a></code> creates a CSS file at the specified location. Otherwise, it returns a string value containing the compiles CSS. It is useful in a package context where you don’t necessarily want to generate a new theme each time. <strong>…</strong> is where we pass a list of CSS variables, through <code>bs4Dash_*</code> (specific to <a href="https://rinterface.github.io/bs4Dash/index.html">bs4Dash</a>), <code>adminlte_*</code> (for <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a>) or <code>bs_vars_*</code> (for classic <a href="https://shiny.rstudio.com/">shiny</a> apps) functions, which we describe below.</p>
<p>In general, you’ll have to call <code><a href="https://rdrr.io/pkg/fresh/man/use_theme.html">use_theme()</a></code> inside the app UI to load the newly generated theme.</p>
<div class="noteblock">
<p>Note that <a href="https://rinterface.github.io/bs4Dash/index.html">bs4Dash</a> and <a href="https://github.com/RinteRface/shinydashboardPlus">shinydashboardPlus</a> expose a <strong>freshTheme</strong> parameter, which handles the provided theme on the fly.</p>
</div>
<div id="customize-bs4dash" class="section level3">
<h3>
<span class="header-section-number">8.1.1</span> Customize <code>{bs4Dash}</code><a class="anchor" aria-label="anchor" href="#customize-bs4dash"><i class="fas fa-link"></i></a>
</h3>
<p>In what follows, we explain how to set a blue ocean theme in only few minutes.</p>
<div id="statuses-and-colors" class="section level4">
<h4>
<span class="header-section-number">8.1.1.1</span> Statuses and colors<a class="anchor" aria-label="anchor" href="#statuses-and-colors"><i class="fas fa-link"></i></a>
</h4>
<p>In chapter <a href="beautify-sass.html#sass-customize-bs4Dash">7.5.1</a>, we showed how to change <a href="https://rinterface.github.io/bs4Dash/index.html">bs4Dash</a> colors, with few lines of Sass code. Guess what: <a href="https://github.com/dreamRs/fresh">fresh</a> makes it even easier! The <code><a href="https://rdrr.io/pkg/fresh/man/bs4dash_status.html">bs4dash_status()</a></code> and <code>bs4Dash_color()</code> functions allows to overwrite all the default statuses and colors:</p>
<div class="sourceCode" id="cb309"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">bs4dash_status</span><span class="op">(</span>
  primary <span class="op">=</span> <span class="cn">NULL</span>,
  secondary <span class="op">=</span> <span class="cn">NULL</span>,
  success <span class="op">=</span> <span class="cn">NULL</span>,
  info <span class="op">=</span> <span class="cn">NULL</span>,
  warning <span class="op">=</span> <span class="cn">NULL</span>,
  danger <span class="op">=</span> <span class="cn">NULL</span>,
  light <span class="op">=</span> <span class="cn">NULL</span>,
  dark <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span>

<span class="fu">bs4dash_color</span><span class="op">(</span>
  blue <span class="op">=</span> <span class="cn">NULL</span>,
  lightblue <span class="op">=</span> <span class="cn">NULL</span>,
  navy <span class="op">=</span> <span class="cn">NULL</span>,
  cyan <span class="op">=</span> <span class="cn">NULL</span>,
  teal <span class="op">=</span> <span class="cn">NULL</span>,
  olive <span class="op">=</span> <span class="cn">NULL</span>,
  green <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="co"># ...</span>
<span class="op">)</span></code></pre></div>
<p>By default, <code>primary</code> is blue but could become green with just one line of code. Do you recall about section <a href="beautify-sass.html#sass-customize-bs4Dash">7.5.1</a>, where we customized <a href="https://rinterface.github.io/bs4Dash/index.html">bs4Dash</a> colors with Sass? Let’s try again with <a href="https://github.com/dreamRs/fresh">fresh</a>. We first create the new theme, passing it the new colors and inject it inside the previously mentioned <strong>freshTheme</strong> parameter:</p>
<div class="sourceCode" id="cb310"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dreamRs/fresh">fresh</a></span><span class="op">)</span>
<span class="va">custom_colors_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_color.html">bs4dash_color</a></span><span class="op">(</span>
    lightblue <span class="op">=</span> <span class="st">"#136377"</span>,
    olive <span class="op">=</span> <span class="st">"#d8bc66"</span>,
    lime <span class="op">=</span> <span class="st">"#fcec0c"</span>,
    orange <span class="op">=</span> <span class="st">"#978d01"</span>,
    maroon <span class="op">=</span> <span class="st">"#58482c"</span>,
    gray_x_light <span class="op">=</span> <span class="st">"#d1c5c0"</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>The corresponding example may be run with:</p>
<div class="sourceCode" id="cb311"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "fresh/bs4Dash-custom" </span>
<span class="co"># ) </span></code></pre></div>
<p>To preview the code, use <code><a href="https://rdrr.io/pkg/OSUICode/man/get_example.html">OSUICode::get_example("fresh/bs4Dash-custom")</a></code>.</p>
<div class="warningblock">
<p>Note that complex variable names like <code>gray-x-light</code> become <code>gray_x_light</code>!</p>
</div>
<p>Compared to the approach described in <a href="beautify-sass.html#sass-customize-bs4Dash">7.5.1</a>, there a few advantages:</p>
<ul>
<li>We don’t have to specify the <code>AdminLTE.scss</code> location, as <a href="https://github.com/dreamRs/fresh">fresh</a> hosts it <a href="https://github.com/dreamRs/fresh/tree/master/inst/assets/AdminLTE-3.1.0">here</a>.</li>
<li>We don’t have to look for all colors names as they are described along the <code>bs4dash_color</code> function definition. We even have a description of the default values (as well as statuses in bold), depicted on Figure <a href="beautify-with-fresh.html#fig:fresh-colors-defaults">8.1</a> below.</li>
</ul>
<div class="figure" style="text-align: center">
<span id="fig:fresh-colors-defaults"></span>
<img src="images/beautify/fresh-colors-defaults.png" alt="Default colors provided by {bs4Dash}" width="50%"><p class="caption">
FIGURE 8.1: Default colors provided by {bs4Dash}
</p>
</div>
<p>Corporate users will appreciate being able to set up a custom internal theme in minutes.</p>
</div>
<div id="general-layout" class="section level4">
<h4>
<span class="header-section-number">8.1.1.2</span> General Layout<a class="anchor" aria-label="anchor" href="#general-layout"><i class="fas fa-link"></i></a>
</h4>
<p><code>bs4Dash_layout</code> exposes variables to control the sidebar width when expanded or collapsed, the sidebar padding, the controlbar width, the main background color and the main content padding. For the blue ocean theme, we change the body background color passing a new value to the <code>main_bg</code> variable, as below (Figure <a href="beautify-with-fresh.html#fig:fresh-bs4Dash-bodybg">8.2</a>):</p>
<div class="sourceCode" id="cb312"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">layout_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_layout.html">bs4dash_layout</a></span><span class="op">(</span>main_bg <span class="op">=</span> <span class="st">"#006994"</span><span class="op">)</span>
<span class="va">ocean_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme</a></span><span class="op">(</span><span class="va">layout_vars</span><span class="op">)</span></code></pre></div>
<div class="figure">
<span id="fig:fresh-bs4Dash-bodybg"></span>
<img src="images/beautify/fresh-bs4Dash-bodybg.png" alt="Customized body background color" width="100%"><p class="caption">
FIGURE 8.2: Customized body background color
</p>
</div>
<p>We acknowledge the result is not yet consistent but it gives a small glimpse about the package capabilities.</p>
</div>
<div id="navbar" class="section level4">
<h4>
<span class="header-section-number">8.1.1.3</span> Navbar<a class="anchor" aria-label="anchor" href="#navbar"><i class="fas fa-link"></i></a>
</h4>
<p>As illustrated in the <a href="https://rinterface.github.io/bs4Dash/index.html">bs4Dash</a> documentation, the <code><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardHeader.html">dashboardHeader()</a></code> has two color flavors, that is <code>light</code> and <code>dark</code>. It defaults to <code>light</code>, meaning that icons and text will be displayed with a darker color, for contrast reasons, and inversely. The <a href="https://rinterface.github.io/bs4Dash/index.html">bs4Dash</a> <a href="https://dgranjon.shinyapps.io/bs4DashDemo/">gallery</a> quite well illustrates this property.</p>
<p>Navbar variables may be found with <code><a href="https://rdrr.io/pkg/fresh/man/search_vars_bs4dash.html">search_vars_bs4dash("navbar")</a></code>, for example:</p>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span>
  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/search_vars_bs4dash.html">search_vars_bs4dash</a></span><span class="op">(</span><span class="st">"navbar"</span><span class="op">)</span>
  <span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"variable"</span>, <span class="st">"value"</span><span class="op">)</span><span class="op">]</span>
<span class="op">)</span></code></pre></div>
<pre><code>#&gt;  [38;5;246m# A tibble: 6 x 2 [39m
#&gt;   variable                  value                                      
#&gt;    [3m [38;5;246m&lt;chr&gt; [39m [23m                      [3m [38;5;246m&lt;chr&gt; [39m [23m                                      
#&gt;  [38;5;250m1 [39m navbar-nav-link-padding-x 1rem                                       
#&gt;  [38;5;250m2 [39m navbar-brand-font-size    $font-size-lg                              
#&gt;  [38;5;250m3 [39m navbar-brand-height       $navbar-brand-font-size * $line-height-base
#&gt;  [38;5;250m4 [39m navbar-toggler-padding-y  .25rem                                     
#&gt;  [38;5;250m5 [39m navbar-toggler-padding-x  .75rem                                     
#&gt;  [38;5;250m6 [39m navbar-toggler-font-size  $font-size-lg</code></pre>
<p>We’ll be using the <code>navbar_light_*</code> variables as follows:</p>
<ul>
<li>The navbar color is determined by the <code>navbar-light</code> class. We change the global <code>light</code> status value to the brand new ocean blue with <code><a href="https://rdrr.io/pkg/fresh/man/bs4dash_status.html">bs4dash_status()</a></code>.</li>
<li>
<code>navbar_light_color</code> set the navbar text and icon elements to white (<code>#fff</code>). It is the best choice given the background color we want to apply.</li>
</ul>
<p>We also modified the <code>primary</code> status to be a shade of green:</p>
<div class="sourceCode" id="cb315"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">navbar_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  <span class="co"># navbar background</span>
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_status.html">bs4dash_status</a></span><span class="op">(</span>light <span class="op">=</span> <span class="st">"#005475"</span>, primary <span class="op">=</span> <span class="st">"#00755c"</span><span class="op">)</span>, 
  <span class="co"># put toggler in white</span>
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_vars.html">bs4dash_vars</a></span><span class="op">(</span>navbar_light_color <span class="op">=</span> <span class="st">"#fff"</span><span class="op">)</span> 
<span class="op">)</span>
<span class="va">ocean_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme</a></span><span class="op">(</span><span class="va">layout_vars</span>, <span class="va">navbar_vars</span><span class="op">)</span></code></pre></div>
</div>
<div id="text-color-1" class="section level4">
<h4>
<span class="header-section-number">8.1.1.4</span> Text color<a class="anchor" aria-label="anchor" href="#text-color-1"><i class="fas fa-link"></i></a>
</h4>
<p>The card text element would not properly be styled without setting the <code>white</code> color to
the global ocean blue theme color, as they would render dark, which is a bad contrast option. Hence, we change the <code>white</code> and <code>gray_900</code> colors with <code><a href="https://rdrr.io/pkg/fresh/man/bs4dash_color.html">bs4dash_color()</a></code>.</p>
<div class="sourceCode" id="cb316"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">inverted_colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_color.html">bs4dash_color</a></span><span class="op">(</span>
  gray_900 <span class="op">=</span> <span class="st">"#fff"</span>, 
  white <span class="op">=</span> <span class="st">"#005475"</span>
<span class="op">)</span>
<span class="va">ocean_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme</a></span><span class="op">(</span>
  <span class="va">layout_vars</span>, 
  <span class="va">navbar_vars</span>, 
  <span class="va">inverted_colors</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="color-contrast" class="section level4">
<h4>
<span class="header-section-number">8.1.1.5</span> Color contrast<a class="anchor" aria-label="anchor" href="#color-contrast"><i class="fas fa-link"></i></a>
</h4>
<p><code><a href="https://rdrr.io/pkg/fresh/man/bs4dash_yiq.html">bs4dash_yiq()</a></code> fine tunes the <a href="https://getbootstrap.com/docs/4.0/getting-started/theming/#color-contrast">contrast</a> between a given color and its background. It relies on the Bootstrap 4 <code>color-yiq</code> function, whose code may be found <a href="https://github.com/dreamRs/fresh/blob/master/inst/assets/bootstrap-4.5.2/_functions.scss#L70">below</a>. Interested readers will have a look at the following <a href="https://en.wikipedia.org/wiki/Luma_(video)">article</a>, that explain better where this calculation is derived from.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb317-1"><a href="beautify-with-fresh.html#cb317-1"></a><span class="im">@function</span> color-yiq<span class="fu">(</span>$color<span class="op">,</span> $dark: $yiq-text-dark<span class="op">,</span> </span>
<span id="cb317-2"><a href="beautify-with-fresh.html#cb317-2"></a>                    $light: $yiq-text-light<span class="fu">)</span> {</span>
<span id="cb317-3"><a href="beautify-with-fresh.html#cb317-3"></a>  $r: red<span class="fu">(</span>$color<span class="fu">)</span><span class="op">;</span></span>
<span id="cb317-4"><a href="beautify-with-fresh.html#cb317-4"></a>  $g: green<span class="fu">(</span>$color<span class="fu">)</span><span class="op">;</span></span>
<span id="cb317-5"><a href="beautify-with-fresh.html#cb317-5"></a>  $b: blue<span class="fu">(</span>$color<span class="fu">)</span><span class="op">;</span></span>
<span id="cb317-6"><a href="beautify-with-fresh.html#cb317-6"></a></span>
<span id="cb317-7"><a href="beautify-with-fresh.html#cb317-7"></a>  $yiq: (($r * <span class="dv">299</span>) + ($g * <span class="dv">587</span>) + ($b * <span class="dv">114</span>)) / <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb317-8"><a href="beautify-with-fresh.html#cb317-8"></a></span>
<span id="cb317-9"><a href="beautify-with-fresh.html#cb317-9"></a>  <span class="im">@if</span> ($yiq &gt;= $yiq-contrasted-threshold) {</span>
<span id="cb317-10"><a href="beautify-with-fresh.html#cb317-10"></a>    <span class="im">@return</span> $dark<span class="op">;</span></span>
<span id="cb317-11"><a href="beautify-with-fresh.html#cb317-11"></a>  } <span class="im">@else</span> {</span>
<span id="cb317-12"><a href="beautify-with-fresh.html#cb317-12"></a>    <span class="im">@return</span> $light<span class="op">;</span></span>
<span id="cb317-13"><a href="beautify-with-fresh.html#cb317-13"></a>  }</span>
<span id="cb317-14"><a href="beautify-with-fresh.html#cb317-14"></a>}</span></code></pre></div>
<p>The function has three major steps:</p>
<ul>
<li>Given a color, we extract its three components in the rgb space.</li>
<li>The <code>yiq</code> value is computed from these contributions, according to the above formula.</li>
<li>The threshold determines the final color value. If <code>yiq</code> is higher than the threshold, the color is black, and white otherwise.</li>
</ul>
<p>As an example, let’s apply this to the default AdminLTE3 primary color <code>#0073b7</code>, with a threshold value of 150. We included an extra parameters to the <code>color-yiq</code> function, that represents the threshold value (defaulting to 150).</p>
<p>We utilize knowledge from Chapter <a href="beautify-sass.html#beautify-sass">7</a>, particularly, the <code><a href="https://rstudio.github.io/sass//reference/sass_layer.html">sass_layer()</a></code> function to separate functions/mixins from rules and defaults:</p>
<div class="sourceCode" id="cb318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">color_yiq</span> <span class="op">&lt;-</span> <span class="st">"
  @function color-yiq($color, $threshold: 150, 
  $dark: $yiq-text-dark, $light: $yiq-text-light) {
    $r: red($color);
    $g: green($color);
    $b: blue($color);

    $yiq: (($r * 299) + ($g * 587) + ($b * 114)) / 1000;

    @if ($yiq &gt;= $threshold) {
      @return $dark;
    } @else {
      @return $light;
    }
  }
"</span>

<span class="va">background</span> <span class="op">&lt;-</span> <span class="st">"
  $bg: #0073b7 !default;
  $yiq-text-dark: #111 !default;
  $yiq-text-light: #fff !default;
"</span>
<span class="va">test_contrast</span> <span class="op">&lt;-</span> <span class="st">".test { background: color-yiq($bg); }"</span>
<span class="fu"><a href="https://rstudio.github.io/sass//reference/sass.html">sass</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rstudio.github.io/sass//reference/sass_layer.html">sass_layer</a></span><span class="op">(</span>
    defaults <span class="op">=</span> <span class="va">background</span>,
    declarations <span class="op">=</span> <span class="va">color_yiq</span>,
    rules <span class="op">=</span> <span class="va">test_contrast</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<pre><code>#&gt; &lt;style&gt;.test {
#&gt;   background: #fff;
#&gt; }
#&gt; &lt;/style&gt;</code></pre>
<p>Wait a moment: <code><a href="https://rdrr.io/pkg/fresh/man/bs4dash_yiq.html">bs4dash_yiq()</a></code> does not expose any <code>color</code> parameter! Indeed, the color is already implicitly applied by the AdminLTE Sass code.</p>
<p>As a last example, we design an app with a slider input controlling the contrast threshold and a radio input color picker to set the <code>box</code> current status color. We dynamically call <code><a href="https://rdrr.io/pkg/fresh/man/bs4dash_yiq.html">bs4dash_yiq()</a></code> and <code>create_theme</code>, with an initial threshold of 150 (Bootstrap default) and a dark and light values set to primary and white, respectively. The initial status is primary (blue), and as shown above, we expect the <code>yiq</code> value to be lower than the threshold since the blue color has a relatively light weight for the calculation, thereby fixing the background text color to white. As an exercise, you may try to reduce the threshold until the text becomes black. What is the threshold value. Then, replace the card status from <code>primary</code> to <code>warning</code>. What happens? Why? As yellow is made of green and red, which have the highest contributions in the <code>yiq</code> calculation, this result is not surprising!</p>
<div class="sourceCode" id="cb320"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "fresh/color-contrast" </span>
<span class="co"># ) </span></code></pre></div>
<p>The output is shown Figure <a href="beautify-with-fresh.html#fig:color-contrast-yiq">8.3</a>.</p>
<div class="figure">
<span id="fig:color-contrast-yiq"></span>
<img src="images/beautify/color-contrast-yiq.png" alt="Color contrast function in action" width="100%"><p class="caption">
FIGURE 8.3: Color contrast function in action
</p>
</div>
</div>
<div id="sidebar" class="section level4">
<h4>
<span class="header-section-number">8.1.1.6</span> Sidebar<a class="anchor" aria-label="anchor" href="#sidebar"><i class="fas fa-link"></i></a>
</h4>
<p>Like <code><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardHeader.html">dashboardHeader()</a></code>, <code><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardSidebar.html">dashboardSidebar()</a></code> exposes two flavors, namely <code>light</code> and <code>dark</code>. Since we set the sidebar to be <code>light</code>, we leverage the <code>bs4Dash_sidebar_light()</code> helper. We set the main background (<code>bg</code> variable) to ocean blue and set the menu color (<code>color</code> variable) to white, so as to have a better contrast. Additionally, we invert the <code>text_dark</code> and <code>text_light</code> colors for an even better contrast with <code><a href="https://rdrr.io/pkg/fresh/man/bs4dash_yiq.html">bs4dash_yiq()</a></code>. In short, the higher the <code>contrasted_threshold</code> parameter the less sensitive is the change.</p>
<div class="sourceCode" id="cb321"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sidebar_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_yiq.html">bs4dash_yiq</a></span><span class="op">(</span>
    contrasted_threshold <span class="op">=</span> <span class="fl">10</span>, 
    text_dark <span class="op">=</span> <span class="st">"#FFF"</span>, 
    text_light <span class="op">=</span> <span class="st">"#272c30"</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4Dash-sidebar.html">bs4dash_sidebar_light</a></span><span class="op">(</span>
    bg <span class="op">=</span> <span class="st">"#005475"</span>, 
    color <span class="op">=</span> <span class="st">"#FFF"</span>,
    hover_color <span class="op">=</span> <span class="st">"#FFF"</span>,
    submenu_color <span class="op">=</span> <span class="st">"#FFF"</span>, 
    submenu_hover_color <span class="op">=</span> <span class="st">"#FFF"</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">ocean_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme</a></span><span class="op">(</span>
  <span class="va">layout_vars</span>, 
  <span class="va">navbar_vars</span>, 
  <span class="va">inverted_colors</span>, 
  <span class="va">sidebar_vars</span>
<span class="op">)</span></code></pre></div>
<p>As the <a href="https://github.com/dreamRs/fresh">fresh</a> theme does not apply to static plots, since they are not HTML element and not part of the DOM, we leverage the <a href="https://rstudio.github.io/thematic/"><code>{thematic}</code></a> package, that in short, provides a sort of CSS interface for base R plots, ggplot and lattice. Specifically, in the Shiny context, we choose <code>thematic_shiny()</code>. By default, it sets the appropriate background, foreground and accent colors. The final product is shown Figure <a href="beautify-with-fresh.html#fig:fresh-bs4Dash-final">8.4</a> and may be run as per below code:</p>
<div class="sourceCode" id="cb322"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "fresh/bs4Dash-ocean-theme" </span>
<span class="co"># ) </span></code></pre></div>
<p>You may notice the inappropriate <code><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput()</a></code> style. This is because it is not a Bootstrap 4 element. In this case, you’ll have to create custom CSS rules targeting the slider labels and scale.</p>
<div class="figure">
<span id="fig:fresh-bs4Dash-final"></span>
<img src="images/beautify/fresh-bs4Dash-final.png" alt="Ocean theme for {bs4Dash}" width="100%"><p class="caption">
FIGURE 8.4: Ocean theme for {bs4Dash}
</p>
</div>
<p>Below is another example of a custom dark theme, whose code may be found right after Figure <a href="beautify-with-fresh.html#fig:bs4Dash-fresh">8.5</a>.</p>
<div class="figure">
<span id="fig:bs4Dash-fresh"></span>
<img src="images/beautify/bs4Dash-fresh.png" alt="Few lines of code to create a bs4Dash dark theme!" width="100%"><p class="caption">
FIGURE 8.5: Few lines of code to create a bs4Dash dark theme!
</p>
</div>
<div class="sourceCode" id="cb323"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dark_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_vars.html">bs4dash_vars</a></span><span class="op">(</span>
    navbar_light_color <span class="op">=</span> <span class="st">"#bec5cb"</span>,
    navbar_light_active_color <span class="op">=</span> <span class="st">"#FFF"</span>,
    navbar_light_hover_color <span class="op">=</span> <span class="st">"#FFF"</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_yiq.html">bs4dash_yiq</a></span><span class="op">(</span>
    contrasted_threshold <span class="op">=</span> <span class="fl">10</span>, 
    text_dark <span class="op">=</span> <span class="st">"#FFF"</span>, 
    text_light <span class="op">=</span> <span class="st">"#272c30"</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_layout.html">bs4dash_layout</a></span><span class="op">(</span>main_bg <span class="op">=</span> <span class="st">"#353c42"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4Dash-sidebar.html">bs4dash_sidebar_dark</a></span><span class="op">(</span>
    bg <span class="op">=</span> <span class="st">"#272c30"</span>, 
    color <span class="op">=</span> <span class="st">"#bec5cb"</span>, 
    hover_color <span class="op">=</span> <span class="st">"#FFF"</span>,
    submenu_bg <span class="op">=</span> <span class="st">"#272c30"</span>, 
    submenu_color <span class="op">=</span> <span class="st">"#FFF"</span>, 
    submenu_hover_color <span class="op">=</span> <span class="st">"#FFF"</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_status.html">bs4dash_status</a></span><span class="op">(</span>dark <span class="op">=</span> <span class="st">"#272c30"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/bs4dash_color.html">bs4dash_color</a></span><span class="op">(</span>gray_900 <span class="op">=</span> <span class="st">"#FFF"</span>, white <span class="op">=</span> <span class="st">"#272c30"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb324"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "fresh/bs4Dash-dark-theme" </span>
<span class="co"># ) </span></code></pre></div>
</div>
</div>
<div id="customize-shinydashboard" class="section level3">
<h3>
<span class="header-section-number">8.1.2</span> Customize <code>{shinydashboard}</code><a class="anchor" aria-label="anchor" href="#customize-shinydashboard"><i class="fas fa-link"></i></a>
</h3>
<p>Similarly, <a href="https://github.com/dreamRs/fresh">fresh</a> supports <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a> powered apps. In few lines of code, you may definitely provide a cyberpunk look and feel to your favorite shiny dashboard (Figure <a href="beautify-with-fresh.html#fig:shinydashboardPlus-fresh">8.6</a>). <a href="https://github.com/RinteRface/shinydashboardPlus">shinydashboardPlus</a> (<a href="https://rinterface.github.io/shinydashboardPlus/articles/more-skins.html#fresh">v2</a>) has a plug and play support for <a href="https://github.com/dreamRs/fresh">fresh</a> where the theme has to be passed to the <code>dashboardPage</code> <em>freshTheme</em> parameter (it would also seamlessly work with <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a>). We start by creating the theme with <code>adminlte_colors()</code>, <code><a href="https://rdrr.io/pkg/fresh/man/adminlte_sidebar.html">adminlte_sidebar()</a></code> and <code><a href="https://rdrr.io/pkg/fresh/man/adminlte_global.html">adminlte_global()</a></code>:</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cyberpunk_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/create_theme.html">create_theme</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/adminlte_color.html">adminlte_color</a></span><span class="op">(</span>
    green <span class="op">=</span> <span class="st">"#3fff2d"</span>,
    blue <span class="op">=</span> <span class="st">"#2635ff"</span>,
    red <span class="op">=</span> <span class="st">" #ff2b2b"</span>,
    yellow <span class="op">=</span> <span class="st">"#feff6e"</span>,
    fuchsia <span class="op">=</span> <span class="st">"#ff5bf8"</span>,
    navy <span class="op">=</span> <span class="st">"#374c92"</span>,
    purple <span class="op">=</span> <span class="st">"#615cbf"</span>,
    maroon <span class="op">=</span> <span class="st">"#b659c9"</span>,
    light_blue <span class="op">=</span> <span class="st">"#5691cc"</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/adminlte_sidebar.html">adminlte_sidebar</a></span><span class="op">(</span>
    dark_bg <span class="op">=</span> <span class="st">"#D8DEE9"</span>,
    dark_hover_bg <span class="op">=</span> <span class="st">"#81A1C1"</span>,
    dark_color <span class="op">=</span> <span class="st">"#2E3440"</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/fresh/man/adminlte_global.html">adminlte_global</a></span><span class="op">(</span>
    content_bg <span class="op">=</span> <span class="st">"#aaaaaa"</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>The demonstration may be run with, the result being shown on Figure <a href="beautify-with-fresh.html#fig:shinydashboardPlus-fresh">8.6</a>:</p>
<div class="sourceCode" id="cb326"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "fresh/shinydashboardPlus-cyberpunk" </span>
<span class="co"># ) </span></code></pre></div>
<div class="figure">
<span id="fig:shinydashboardPlus-fresh"></span>
<img src="images/beautify/cyberpunk_shinydashboard.png" alt="Cyberpunk shinydashboard" width="100%"><p class="caption">
FIGURE 8.6: Cyberpunk shinydashboard
</p>
</div>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="beautify-sass.html"><span class="header-section-number">7</span> Introduction to Sass</a></div>
<div class="next"><a href="beautify-with-bootstraplib.html"><span class="header-section-number">9</span> Beautify with {bslib}</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#beautify-with-fresh"><span class="header-section-number">8</span> Beautify with {fresh}</a></li>
<li>
<a class="nav-link" href="#fresh-the-big-picture"><span class="header-section-number">8.1</span> {fresh}, the big picture</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#customize-bs4dash"><span class="header-section-number">8.1.1</span> Customize {bs4Dash}</a></li>
<li><a class="nav-link" href="#customize-shinydashboard"><span class="header-section-number">8.1.2</span> Customize {shinydashboard}</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/beautify-with-fresh.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/beautify-with-fresh.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It was last built on 2021-08-25.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
