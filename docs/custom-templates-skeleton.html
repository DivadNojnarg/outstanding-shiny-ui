<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 18 Create template elements | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.9002/transition.js"></script><script src="libs/bs3compat-0.2.5.9002/tabs.js"></script><script src="libs/bs3compat-0.2.5.9002/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="foreword.html">Foreword</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">2</span> Mastering {htmltools}</a></li>
<li><a class="" href="web-dependencies.html"><span class="header-section-number">3</span> Discover Shiny dependencies</a></li>
<li><a class="" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Dependency utilities</a></li>
<li><a class="" href="web-applications.html"><span class="header-section-number">5</span> Web application concepts</a></li>
<li class="book-part">Beautify with CSS and Sass</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">6</span> CSS for Shiny</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">7</span> Introduction to Sass</a></li>
<li><a class="" href="beautify-with-fresh.html"><span class="header-section-number">8</span> Beautify with {fresh}</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">9</span> Beautify with {bslib}</a></li>
<li class="book-part">Unleash interactivity with JavaScript</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">10</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">11</span> R and JS</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">12</span> Shiny’s input system</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">13</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">14</span> Mastering Shiny’s events</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">15</span> Dynamically manage content with handlers</a></li>
<li class="book-part">Practice 1: a dashboard template</li>
<li><a class="" href="custom-templates-selection.html"><span class="header-section-number">16</span> Template selection</a></li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">17</span> Define dependencies</a></li>
<li><a class="active" href="custom-templates-skeleton.html"><span class="header-section-number">18</span> Create template elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">19</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">20</span> Adding more interactivity</a></li>
<li><a class="" href="custom-templates-testing.html"><span class="header-section-number">21</span> Testing and validating templates elements</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">22</span> Introduction to {charpente}</a></li>
<li class="book-part">Case study 2: Mobile development with Shiny</li>
<li><a class="" href="mobile-shiny-intro.html"><span class="header-section-number">23</span> Introduction</a></li>
<li><a class="" href="mobile-shinyMobile.html"><span class="header-section-number">24</span> Reconstruct {shinyMobile}</a></li>
<li><a class="" href="mobile-pwa.html"><span class="header-section-number">25</span> {shinyMobile} and PWA</a></li>
<li><a class="" href="mobile-widgets.html"><span class="header-section-number">26</span> Design widgets</a></li>
<li><a class="" href="mobile-going-further.html"><span class="header-section-number">27</span> Fine tune {shinyMobile}</a></li>
<li class="book-part">Going further</li>
<li><a class="" href="going-further-reactR.html"><span class="header-section-number">28</span> R + Shiny + React: welcome {reactR}</a></li>
<li><a class="" href="going-further-where-to-go.html"><span class="header-section-number">29</span> What to do next?</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="code-outputs.html"><span class="header-section-number">A</span> Code outputs</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="custom-templates-skeleton" class="section level1">
<h1>
<span class="header-section-number">18</span> Create template elements<a class="anchor" aria-label="anchor" href="#custom-templates-skeleton"><i class="fas fa-link"></i></a>
</h1>
<p>The list of all available tabler <strong>layouts</strong> is quite impressive (horizontal, vertical, compressed, right to left, dark, …). In the next steps, we will focus on the <strong>dark-compressed</strong> template, leaving the reader to try other templates as an exercise.</p>
<div id="identify-template-elements" class="section level2">
<h2>
<span class="header-section-number">18.1</span> Identify template elements<a class="anchor" aria-label="anchor" href="#identify-template-elements"><i class="fas fa-link"></i></a>
</h2>
<p>We are quite lucky since there is nothing fancy about the tabler layout. As usual, let’s inspect the <code>layout-condensed-dark.html</code> (located <code>/demo</code> folder) on Figure <a href="custom-templates-skeleton.html#fig:tabler-layout-intro">18.1</a></p>
<div class="figure">
<span id="fig:tabler-layout-intro"></span>
<img src="images/practice/tabler-layout-intro.png" alt="Tabler condensed layout" width="100%"><p class="caption">
FIGURE 18.1: Tabler condensed layout
</p>
</div>
<p>There are two main components:</p>
<ul>
<li>the <strong>header</strong> containing the brand logo, the navigation and dropdown</li>
<li>the <strong>content</strong> containing the dashboard body as well as the footer</li>
</ul>
<div class="warningblock">
<p>The dashboard body does not mean <code>&lt;body&gt;</code> tag!</p>
</div>
<p>That is it!</p>
</div>
<div id="design-the-page-layout" class="section level2">
<h2>
<span class="header-section-number">18.2</span> Design the page layout<a class="anchor" aria-label="anchor" href="#design-the-page-layout"><i class="fas fa-link"></i></a>
</h2>
<div id="the-page-wrapper" class="section level3">
<h3>
<span class="header-section-number">18.2.1</span> The page wrapper<a class="anchor" aria-label="anchor" href="#the-page-wrapper"><i class="fas fa-link"></i></a>
</h3>
<p>Do you remember the structure of a basic HTML page seen in Chapter <a href="web-intro.html#web-intro-html">1.3</a>? Well, if not, here is a reminder.</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb603-1"><a href="custom-templates-skeleton.html#cb603-1"></a><span class="dt">&lt;!DOCTYPE </span>HTML<span class="dt">&gt;</span></span>
<span id="cb603-2"><a href="custom-templates-skeleton.html#cb603-2"></a><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">"en"</span><span class="kw">&gt;</span></span>
<span id="cb603-3"><a href="custom-templates-skeleton.html#cb603-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb603-4"><a href="custom-templates-skeleton.html#cb603-4"></a>    <span class="co">&lt;!-- head content here --&gt;</span></span>
<span id="cb603-5"><a href="custom-templates-skeleton.html#cb603-5"></a>    <span class="kw">&lt;title&gt;</span>A title<span class="kw">&lt;/title&gt;</span></span>
<span id="cb603-6"><a href="custom-templates-skeleton.html#cb603-6"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb603-7"><a href="custom-templates-skeleton.html#cb603-7"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb603-8"><a href="custom-templates-skeleton.html#cb603-8"></a>    <span class="co">&lt;!-- body content here --&gt;</span></span>
<span id="cb603-9"><a href="custom-templates-skeleton.html#cb603-9"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb603-10"><a href="custom-templates-skeleton.html#cb603-10"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>We actually don’t need to include the <code>&lt;html&gt;</code> tag since shiny does it on the fly, as described in details in chapter <a href="web-applications.html#build-shiny-ui">5.7.1</a>. Below we construct a list of tags with <code><a href="https://rdrr.io/pkg/htmltools/man/tagList.html">tagList()</a></code>, including the <strong>head</strong> and the <strong>body</strong>. In the head we have the <code>meta</code> tags which have multiple purposes:</p>
<ul>
<li>Describe the encoding.</li>
<li>How to display the app on different devices. For instance <code>apple-mobile-web-app-status-bar-style</code> is for iOS devices mobile support.</li>
<li>Set the <strong>favicon</strong>, which is an icon representing the website icon, that is the one you may see on the right side of the searchbar. Try <a href="https://twitter.com/home">twitter</a> for instance.</li>
</ul>
<p>The page <strong>title</strong> and favicon may be changed by the developer, so they may be included as function parameters. If you remember, there should also be CSS in the head but they are missing! Actually, the insertion of dependencies is be achieved by our very own <code><a href="https://rdrr.io/pkg/OSUICode/man/add_tabler_deps.html">add_tabler_deps()</a></code> function defined in Chapter <a href="custom-templates-dependencies.html#custom-templates-dependencies">17</a>. Tabler comes with two main <strong>themes</strong>, namely white and dark, which may be applied through the <code>&lt;body&gt;</code> class attribute (respectively <code>antialiased theme-dark</code> and <code>antialiased</code>). The <strong>…</strong> parameter contains other template elements like the header and the dashboard body, that remains to be designed. As shown in Figure <a href="custom-templates-selection.html#fig:tabler-dark">16.1</a> of Chapter <a href="custom-templates-selection.html#custom-templates-selection">16</a>, the tabler dashboard template may contain a <strong>navigation</strong> bar as well as a <strong>footer</strong>. As they are not mandatory, we don’t create dedicated parameters and pass all elements in the <code>...</code> slot:</p>
<div class="sourceCode" id="cb604"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_page</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">dark</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">title</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">favicon</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">{</span>
  
  <span class="co"># head</span>
  <span class="va">head_tag</span> <span class="op">&lt;-</span> <span class="va">tags</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span>
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>charset <span class="op">=</span> <span class="st">"utf-8"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>
      name <span class="op">=</span> <span class="st">"viewport"</span>, 
      content <span class="op">=</span> <span class="st">"
        width=device-width, 
        initial-scale=1, 
        viewport-fit=cover"</span>
    <span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>`http-equiv` <span class="op">=</span> <span class="st">"X-UA-Compatible"</span>, content <span class="op">=</span> <span class="st">"ie=edge"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">title</span><span class="op">(</span><span class="va">title</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">link</span><span class="op">(</span>
      rel <span class="op">=</span> <span class="st">"preconnect"</span>, 
      href <span class="op">=</span> <span class="st">"https://fonts.gstatic.com/"</span>, 
      crossorigin <span class="op">=</span> <span class="cn">NA</span>
    <span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"msapplication-TileColor"</span>, content <span class="op">=</span> <span class="st">"#206bc4"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"theme-color"</span>, content <span class="op">=</span> <span class="st">"#206bc4"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"apple-mobile-web-app-status-bar-style"</span>, content <span class="op">=</span> <span class="st">"black-translucent"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"apple-mobile-web-app-capable"</span>, content <span class="op">=</span> <span class="st">"yes"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"mobile-web-app-capable"</span>, content <span class="op">=</span> <span class="st">"yes"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"HandheldFriendly"</span>, content <span class="op">=</span> <span class="st">"True"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"MobileOptimized"</span>, content <span class="op">=</span> <span class="st">"320"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">meta</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"robots"</span>, content <span class="op">=</span> <span class="st">"noindex,nofollow,noarchive"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">link</span><span class="op">(</span>rel <span class="op">=</span> <span class="st">"icon"</span>, href <span class="op">=</span> <span class="va">favicon</span>, type <span class="op">=</span> <span class="st">"image/x-icon"</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">link</span><span class="op">(</span>rel <span class="op">=</span> <span class="st">"shortcut icon"</span>, href <span class="op">=</span> <span class="va">favicon</span>, type<span class="op">=</span><span class="st">"image/x-icon"</span><span class="op">)</span>
  <span class="op">)</span>
  
  <span class="co"># body</span>
  <span class="va">body_tag</span> <span class="op">&lt;-</span> <span class="va">tags</span><span class="op">$</span><span class="fu">body</span><span class="op">(</span>
    <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span>
      class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"antialiased "</span>, <span class="kw">if</span> <span class="op">(</span><span class="va">dark</span><span class="op">)</span> <span class="st">"theme-dark"</span><span class="op">)</span>,
      style <span class="op">=</span> <span class="st">"display: block;"</span>,
      <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"page"</span>, <span class="va">...</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/add_tabler_deps.html">add_tabler_deps</a></span><span class="op">(</span><span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagList.html">tagList</a></span><span class="op">(</span><span class="va">head_tag</span>, <span class="va">body_tag</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Below we quickly test if a tabler element renders well, to confirms whether our setup is adequate. To do this, we include a random tabler element taken from the demo HTML page, using <code><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML()</a></code>.</p>
<div class="importantblock">
<p>Let’s be clear: this is only for <strong>testing purposes</strong>! In production, you should avoid this as much as
possible because of <strong>security</strong> issues and the <strong>bad readability</strong> of the code.</p>
</div>
<p>This also checks that our basic Shiny input/output system works as expected with a <code><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput()</a></code>
linked to a <code>plotOutput</code>. We finally leverage the <a href="https://rstudio.github.io/thematic/">thematic</a> package so that plot and template background match:</p>
<div class="sourceCode" id="cb605"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/thematic/">thematic</a></span><span class="op">)</span>

<span class="fu"><a href="https://rstudio.github.io/thematic/reference/thematic_on.html">thematic_shiny</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_page.html">tabler_page</a></span><span class="op">(</span>
  <span class="st">"test"</span>, 
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">sliderInput</a></span><span class="op">(</span><span class="st">"obs"</span>, <span class="st">"Number of observations:"</span>,
              min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">1000</span>, value <span class="op">=</span> <span class="fl">500</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op">(</span><span class="st">"distPlot"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML</a></span><span class="op">(</span>
    <span class="st">[2004 chars quoted with ''']</span>
  <span class="op">)</span>,
title <span class="op">=</span> <span class="st">"Tabler test"</span>
<span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">output</span><span class="op">$</span><span class="va">distPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">obs</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>Ok, our info card and the shiny element work like a charm, which is a good start. Now we may focus on the aesthetics.</p>
</div>
<div id="the-body-content" class="section level3">
<h3>
<span class="header-section-number">18.2.2</span> The body content<a class="anchor" aria-label="anchor" href="#the-body-content"><i class="fas fa-link"></i></a>
</h3>
<p>In this part, we translate the dashboard <strong>body</strong> HTML code to R. As a reminder, the <a href="https://alandipert.shinyapps.io/html2r/">html2r</a> by <a href="https://github.com/alandipert">Alan Dipert</a> substantially speeds up the conversion process. You copy the code in the HTML text area, click on convert and get the R shiny output. We create a function called <code><a href="https://rdrr.io/pkg/OSUICode/man/tabler_body.html">tabler_body()</a></code>. The <strong>…</strong> parameter holds all the dashboard body elements and the <strong>footer</strong> is dedicated for the future <code><a href="https://rdrr.io/pkg/OSUICode/man/tabler_footer.html">tabler_footer()</a></code> function.</p>
<div class="sourceCode" id="cb606"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_body</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">footer</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"content"</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"container-xl"</span>, <span class="va">...</span><span class="op">)</span>,
    <span class="va">tags</span><span class="op">$</span><span class="fu">footer</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"footer footer-transparent"</span>, <span class="va">footer</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Let’s test it with the previous example.</p>
<div class="sourceCode" id="cb607"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_page.html">tabler_page</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_body.html">tabler_body</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h1</a></span><span class="op">(</span><span class="st">"Hello World"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>Way better!</p>
</div>
<div id="the-footer" class="section level3">
<h3>
<span class="header-section-number">18.2.3</span> The footer<a class="anchor" aria-label="anchor" href="#the-footer"><i class="fas fa-link"></i></a>
</h3>
<p>The footer is composed of a left and right containers.
We decide to create parameters left and right in which the user may pass any elements:</p>
<div class="sourceCode" id="cb608"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_footer</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">left</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">right</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"container"</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
      class <span class="op">=</span> <span class="st">"row text-center align-items-center flex-row-reverse"</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"col-lg-auto ml-lg-auto"</span>, <span class="va">right</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"col-12 col-lg-auto mt-3 mt-lg-0"</span>, <span class="va">left</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>All the class <strong>attributes</strong> are taken from the original HTML template.
If you are already familiar with Bootstrap 4, you may easily customize the style.
In short, <code>row</code> means that all elements are aligned on a row,
<code>text-center</code> and <code>align-items-center</code> handle the text and content centering.
<code>flex-row-reverse</code> display elements in a reversed order.
Notice also that a <code>row</code> element contains columns created with the <code>col</code> class.
The Bootstrap grid system relies on the Flexible Box Module, also known as <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox">flexbox</a>.</p>
<p>As above, let’s check our brand new element.</p>
<div class="sourceCode" id="cb609"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_page.html">tabler_page</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_body.html">tabler_body</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Hello World"</span><span class="op">)</span>,
    footer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_footer.html">tabler_footer</a></span><span class="op">(</span>
      left <span class="op">=</span> <span class="st">"Rstats, 2020"</span>, 
      right <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">a</a></span><span class="op">(</span>href <span class="op">=</span> <span class="st">"https://www.google.com"</span>, <span class="st">"More"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
</div>
<div id="the-navbar-or-header" class="section level3">
<h3>
<span class="header-section-number">18.2.4</span> The navbar (or header)<a class="anchor" aria-label="anchor" href="#the-navbar-or-header"><i class="fas fa-link"></i></a>
</h3>
<p>This function is called <code>tabler_header()</code>. In the Tabler template, the <strong>header</strong> has the
<code>navbar navbar-expand-md navbar-light</code> classes. We don’t need the <code>navbar-light</code> class
since we are only interested in the dark theme. As shown on Figure <a href="custom-templates-skeleton.html#fig:tabler-header">18.2</a>,
the header is composed of four elements:</p>
<ul>
<li>The navbar <strong>toggler</strong> is only visible when we reduce the screen width, like on mobile devices.</li>
<li>The <strong>brand</strong> image</li>
<li>The <strong>navigation</strong> menu.</li>
<li>The <strong>dropdown</strong> menus (this is not mandatory).</li>
</ul>
<div class="figure">
<span id="fig:tabler-header"></span>
<img src="images/practice/tabler-header.png" alt="Tabler header structure" width="100%"><p class="caption">
FIGURE 18.2: Tabler header structure
</p>
</div>
<p>You may have a look at the <a href="https://getbootstrap.com/docs/4.0/components/navbar/">Bootstrap 4</a> documentation for extra configuration and layout.</p>
<p>Each of these element will be considered as a parameter to the <code><a href="https://rdrr.io/pkg/OSUICode/man/tabler_navbar.html">tabler_navbar()</a></code> function,
except the navbar toggler which is a default element and must not be removed.
Morever, we only show the brand element when it is provided. The <strong>…</strong>
parameter is a slot for extra elements (between the menu and dropdowns).
In the following, we start by creating the main container, that is <code>header_tag</code> and its unique child <code>container_tag</code>. The latter has four children <code>toggler_tag</code>, <code>brand_tag</code>, <code>dropdown_tag</code> and <code>navmenu_tag</code>. In this situations, <a href="https://github.com/rstudio/htmltools">htmltools</a> functions like <code><a href="https://rdrr.io/pkg/htmltools/man/tagAppendChild.html">tagAppendChild()</a></code> and <code><a href="https://rdrr.io/pkg/htmltools/man/tagAppendChild.html">tagAppendChildren()</a></code> are game changers to better organize the code and make it more <strong>maintainable</strong>. One never knows in advance how much extra feature will be added to that component. Hence being cautious at the very beginning is crucial!</p>
<div class="sourceCode" id="cb610"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_navbar</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">brand_url</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">brand_image</span> <span class="op">=</span> <span class="cn">NULL</span>, 
                          <span class="va">nav_menu</span>, <span class="va">nav_right</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">header_tag</span> <span class="op">&lt;-</span> <span class="va">tags</span><span class="op">$</span><span class="fu">header</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"navbar navbar-expand-md"</span><span class="op">)</span>
  <span class="va">container_tag</span> <span class="op">&lt;-</span> <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"container-xl"</span><span class="op">)</span>
  
  <span class="co"># toggler for small devices (must not be removed)</span>
  <span class="va">toggler_tag</span> <span class="op">&lt;-</span> <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"navbar-toggler"</span>, 
    type <span class="op">=</span> <span class="st">"button"</span>, 
    `data-toggle` <span class="op">=</span> <span class="st">"collapse"</span>, 
    `data-target` <span class="op">=</span> <span class="st">"#navbar-menu"</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">span</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"navbar-toggler-icon"</span><span class="op">)</span>
  <span class="op">)</span>
  
  <span class="co"># brand elements</span>
  <span class="va">brand_tag</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">brand_url</span><span class="op">)</span> <span class="op">||</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">brand_image</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">a</a></span><span class="op">(</span>
      href <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">brand_url</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">brand_url</span>
      <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
        <span class="st">"#"</span>
      <span class="op">}</span>,
      class <span class="op">=</span> <span class="st">"navbar-brand navbar-brand-autodark 
      d-none-navbar-horizontal pr-0 pr-md-3"</span>,
      <span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">brand_image</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">img</a></span><span class="op">(</span>
          src <span class="op">=</span> <span class="va">brand_image</span>, 
          alt <span class="op">=</span> <span class="st">"brand Image"</span>,
          class <span class="op">=</span> <span class="st">"navbar-brand-image"</span>
        <span class="op">)</span>
      <span class="op">}</span>
    <span class="op">)</span>
  <span class="op">}</span>
  
  <span class="va">dropdown_tag</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">nav_right</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"navbar-nav flex-row order-md-last"</span>, <span class="va">nav_right</span><span class="op">)</span>
  <span class="op">}</span>
  
  <span class="va">navmenu_tag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"collapse navbar-collapse"</span>, 
    id <span class="op">=</span> <span class="st">"navbar-menu"</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
      class <span class="op">=</span> <span class="st">"d-flex flex-column flex-md-row flex-fill 
      align-items-stretch align-items-md-center"</span>,
      <span class="va">nav_menu</span>
    <span class="op">)</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
        class <span class="op">=</span> <span class="st">"ml-md-auto pl-md-4 py-2 py-md-0 mr-md-4 
        order-first order-md-last flex-grow-1 flex-md-grow-0"</span>, 
        <span class="va">...</span>
      <span class="op">)</span>
    <span class="op">}</span>
  <span class="op">)</span>
  
  <span class="va">container_tag</span> <span class="op">&lt;-</span> <span class="va">container_tag</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagAppendChild.html">tagAppendChildren</a></span><span class="op">(</span>
    <span class="va">toggler_tag</span>,
    <span class="va">brand_tag</span>,
    <span class="va">dropdown_tag</span>,
    <span class="va">navmenu_tag</span>
  <span class="op">)</span>
  
  <span class="va">header_tag</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagAppendChild.html">tagAppendChild</a></span><span class="op">(</span><span class="va">container_tag</span><span class="op">)</span>
  
<span class="op">}</span></code></pre></div>
<p>The <strong>navbar menu</strong> is the main navbar component. The <strong>…</strong> parameter is a slot for the <strong>menu items</strong>.
Compared to the original tabler dashboard template where there is only the <code>navbar-nav</code> class, we have to add at least, the <code>nav</code> class to make sure items are correctly activated/inactivated. The <code>nav-pills</code> class is to select pills instead of basic tabs (see <a href="https://getbootstrap.com/docs/4.0/components/navs/">here</a>), which is nothing more than a cosmetic consideration. Notice the <code>ul</code> tag that will contain <code>li</code> elements, that is the navbar items:</p>
<div class="sourceCode" id="cb611"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_navbar_menu</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">tags</span><span class="op">$</span><span class="fu">ul</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"nav nav-pills navbar-nav"</span>, <span class="va">...</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Besides, each navbar menu item could be either a simple button or contain multiple menu sub-items.
For now, we only focus on simple items.</p>
<div id="tabler-navbar-navigation" class="section level4">
<h4>
<span class="header-section-number">18.2.4.1</span> Navbar navigation<a class="anchor" aria-label="anchor" href="#tabler-navbar-navigation"><i class="fas fa-link"></i></a>
</h4>
<p>The navbar is crucial since it drives the template navigation. We would like to associate each item to a separate page in the body content. This would allow us to navigate to a new page each time we change an item. In brief, it is very similar to the Shiny <code><a href="https://rdrr.io/pkg/shiny/man/tabsetPanel.html">tabsetPanel()</a></code> function.</p>
<p>In HTML, menu items are <code>&lt;a&gt;</code> tags (links) with a given <code>href</code> attribute pointing to a specific page located in the server files. With Shiny, as applications are single page by design, we can’t split our content into multiple pages. The strategy here is to create a <strong>tabbed navigation</strong>, to mimic <strong>multi-pages layout</strong>.</p>
<p>Let’s see how the tab navigation works. In the menu list, all items must have:</p>
<ul>
<li>A <strong>data-toggle</strong> attribute set to <code>tab</code> or <code>pill</code>.</li>
<li>A <strong>href</strong> or <strong>data-target</strong> attribute holding a unique <strong>id</strong>, being mandatory since it points the menu item to the corresponding body content.</li>
</ul>
<div class="importantblock">
<p>Importantly, <code>href</code> navigation appears to be broken on shinyapps.io, RStudio Connect (actually all rstudio product relying on <strong>workers</strong> to spread the user load across multiple R processes).
Therefore, we’ll choose the <code>data-target</code> attribute.</p>
</div>
<p>On the body side, tab panels are contained in a <strong>tabset</strong> panel (simple div container), have a <code>role</code> attribute set to <code>tabpanel</code> and an <strong>id</strong> corresponding the <strong>data-target</strong> passed in the menu item. The exact match between <strong>id</strong> and <strong>data-target</strong> is mandatory, as shown in Figure <a href="custom-templates-skeleton.html#fig:tabler-tabset">18.3</a>.</p>
<div class="figure">
<span id="fig:tabler-tabset"></span>
<img src="images/practice/tabler-tabset.png" alt="Tabler tabset main principle" width="100%"><p class="caption">
FIGURE 18.3: Tabler tabset main principle
</p>
</div>
<p>Below, we propose a possible implementation of a menu item, as well as the corresponding body tab panel. The text parameter corresponds to the nav item text displayed in the menu. We also added an optional icon and the ability to select the item at start:</p>
<div class="sourceCode" id="cb612"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_navbar_menu_item</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">text</span>, <span class="va">tabName</span>, <span class="va">icon</span> <span class="op">=</span> <span class="cn">NULL</span>, 
                                    <span class="va">selected</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">item_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"nav-link"</span>, <span class="kw">if</span><span class="op">(</span><span class="va">selected</span><span class="op">)</span> <span class="st">" active"</span><span class="op">)</span>
  
  <span class="va">tags</span><span class="op">$</span><span class="fu">li</span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"nav-item"</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">a</a></span><span class="op">(</span>
      class <span class="op">=</span> <span class="va">item_cl</span>,
      `data-target` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"#"</span>, <span class="va">tabName</span><span class="op">)</span>,
      `data-toggle` <span class="op">=</span> <span class="st">"pill"</span>,
      `data-value` <span class="op">=</span> <span class="va">tabName</span>,
      role <span class="op">=</span> <span class="st">"tab"</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">span</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"nav-link-icon d-md-none d-lg-inline-block"</span>, <span class="va">icon</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">span</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"nav-link-title"</span>, <span class="va">text</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We also decided to add a fade transition effect between tabs, as per Bootstrap 4 documentation,
which consists in the <code>fade</code> extra class:</p>
<div class="sourceCode" id="cb613"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_tab_items</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"tab-content"</span>, <span class="va">...</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">tabler_tab_item</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">tabName</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    role <span class="op">=</span> <span class="st">"tabpanel"</span>,
    class <span class="op">=</span> <span class="st">"tab-pane fade container-fluid"</span>,
    id <span class="op">=</span> <span class="va">tabName</span>,
    <span class="va">...</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>What about testing this in a shiny app?</p>
<div class="sourceCode" id="cb614"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_page.html">tabler_page</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_navbar.html">tabler_navbar</a></span><span class="op">(</span>
    brand_url <span class="op">=</span> <span class="st">"https://preview-dev.tabler.io"</span>, 
    brand_image <span class="op">=</span> <span class="st">"https://preview-dev.tabler.io/static/logo.svg"</span>, 
    nav_menu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_navbar_menu.html">tabler_navbar_menu</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_navbar_menu_item.html">tabler_navbar_menu_item</a></span><span class="op">(</span>
        text <span class="op">=</span> <span class="st">"Tab 1"</span>,
        icon <span class="op">=</span> <span class="cn">NULL</span>,
        tabName <span class="op">=</span> <span class="st">"tab1"</span>,
        selected <span class="op">=</span> <span class="cn">TRUE</span>
      <span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_navbar_menu_item.html">tabler_navbar_menu_item</a></span><span class="op">(</span>
        text <span class="op">=</span> <span class="st">"Tab 2"</span>,
        icon <span class="op">=</span> <span class="cn">NULL</span>,
        tabName <span class="op">=</span> <span class="st">"tab2"</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_body.html">tabler_body</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_tab_items.html">tabler_tab_items</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_tab_item.html">tabler_tab_item</a></span><span class="op">(</span>
        tabName <span class="op">=</span> <span class="st">"tab1"</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Hello World"</span><span class="op">)</span>
      <span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_tab_item.html">tabler_tab_item</a></span><span class="op">(</span>
        tabName <span class="op">=</span> <span class="st">"tab2"</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Second Tab"</span><span class="op">)</span>
      <span class="op">)</span>
    <span class="op">)</span>,
    footer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_footer.html">tabler_footer</a></span><span class="op">(</span>
      left <span class="op">=</span> <span class="st">"Rstats, 2020"</span>, 
      right <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">a</a></span><span class="op">(</span>href <span class="op">=</span> <span class="st">"https://www.google.com"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>At this point you might argue that we did not even validated the template elements.
For instance, going back to the <code>tabler_navbar_menu_item</code> function, we find the following possible issues:</p>
<ul>
<li>What happens if the user provides an invalid tabName,
ie a text that is not valid for jQuery like <code>tab&amp;?++</code>?</li>
<li>What happens if the user accidentally activates two tabs at start?</li>
</ul>
<p>We see later in Chapter <a href="custom-templates-testing.html#custom-templates-testing">21</a> how to validate those parameters.</p>
</div>
<div id="fine-tune-tabs-behavior" class="section level4">
<h4>
<span class="header-section-number">18.2.4.2</span> Fine tune tabs behavior<a class="anchor" aria-label="anchor" href="#fine-tune-tabs-behavior"><i class="fas fa-link"></i></a>
</h4>
<p>Quite good isn’t it? You notice however that even if the first tab is selected by default, its content is not shown. To fix this, we apply our jQuery skills. According to the Bootstrap documentation, we must trigger the <strong>show</strong> event on the active tab at start, as well as add the classes <code>show</code> and <code>active</code> to the associated tab panel in the dashboard body. We therefore target the nav item that has the active class and if no item is found, we select the first item by default and activate its body content.</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb615-1"><a href="custom-templates-skeleton.html#cb615-1"></a><span class="at">$</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb615-2"><a href="custom-templates-skeleton.html#cb615-2"></a>  <span class="co">// this makes sure to trigger the show event on the active   tab at start</span></span>
<span id="cb615-3"><a href="custom-templates-skeleton.html#cb615-3"></a>  <span class="kw">let</span> activeTab <span class="op">=</span> <span class="at">$</span>(<span class="st">'#navbar-menu .nav-link.active'</span>)<span class="op">;</span></span>
<span id="cb615-4"><a href="custom-templates-skeleton.html#cb615-4"></a>  <span class="co">// if multiple items are found</span></span>
<span id="cb615-5"><a href="custom-templates-skeleton.html#cb615-5"></a>  <span class="cf">if</span> (<span class="va">activeTab</span>.<span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></span>
<span id="cb615-6"><a href="custom-templates-skeleton.html#cb615-6"></a>    <span class="kw">let</span> tabId <span class="op">=</span> <span class="at">$</span>(activeTab).<span class="at">attr</span>(<span class="st">'data-value'</span>)<span class="op">;</span></span>
<span id="cb615-7"><a href="custom-templates-skeleton.html#cb615-7"></a>    <span class="at">$</span>(activeTab).<span class="at">tab</span>(<span class="st">'show'</span>)<span class="op">;</span></span>
<span id="cb615-8"><a href="custom-templates-skeleton.html#cb615-8"></a>    <span class="at">$</span>(<span class="vs">`#</span><span class="sc">${</span>tabId<span class="sc">}</span><span class="vs">`</span>).<span class="at">addClass</span>(<span class="st">'show active'</span>)<span class="op">;</span></span>
<span id="cb615-9"><a href="custom-templates-skeleton.html#cb615-9"></a>  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb615-10"><a href="custom-templates-skeleton.html#cb615-10"></a>    <span class="at">$</span>(<span class="st">'#navbar-menu .nav-link'</span>)</span>
<span id="cb615-11"><a href="custom-templates-skeleton.html#cb615-11"></a>      .<span class="at">first</span>()</span>
<span id="cb615-12"><a href="custom-templates-skeleton.html#cb615-12"></a>      .<span class="at">tab</span>(<span class="st">'show'</span>)<span class="op">;</span></span>
<span id="cb615-13"><a href="custom-templates-skeleton.html#cb615-13"></a>  <span class="op">}</span></span>
<span id="cb615-14"><a href="custom-templates-skeleton.html#cb615-14"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>This script is included in the the below app <code>www</code> folder. We see in Chapter <a href="custom-templates-inputs.html#custom-templates-inputs">19</a> that custom input binding may perfectly handle this situation and are actually preferred.</p>
<div class="sourceCode" id="cb616"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rstudio.github.io/thematic/reference/thematic_on.html">thematic_shiny</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># example with custom JS code to activate tabs</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyAppDir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"tabler/tabler_tabs"</span>, package <span class="op">=</span> <span class="st">"OSUICode"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The result is shown on Figure <a href="custom-templates-skeleton.html#fig:tabler-nav">18.4</a>. We’d also suggest to include at least one input/output per tab, to test whether everything works properly.</p>
<div class="figure">
<span id="fig:tabler-nav"></span>
<img src="images/practice/tabler-nav.png" alt="Tabler template with navbar" width="100%"><p class="caption">
FIGURE 18.4: Tabler template with navbar
</p>
</div>
<p>Looks like we are done for the main template elements. Actually, wouldn’t it be better to include, at least, card containers?</p>
</div>
</div>
<div id="card-containers" class="section level3">
<h3>
<span class="header-section-number">18.2.5</span> Card containers<a class="anchor" aria-label="anchor" href="#card-containers"><i class="fas fa-link"></i></a>
</h3>
<p>Card are a central piece of template as they may contain visualizations, metrics and much more. Fortunately, Tabler has a large range of <strong>card containers</strong>.</p>
<div id="classic-card" class="section level4">
<h4>
<span class="header-section-number">18.2.5.1</span> Classic card<a class="anchor" aria-label="anchor" href="#classic-card"><i class="fas fa-link"></i></a>
</h4>
<p>What we call a classic card is like the <a href="https://rstudio.github.io/shinydashboard/structure.html">shinydashboard</a> <code><a href="https://rdrr.io/pkg/OSUICode/man/box.html">box()</a></code> container. The card structure has key elements:</p>
<ul>
<li>A <strong>width</strong> to control the space taken by the card in the Bootstrap <a href="https://getbootstrap.com/docs/4.0/layout/grid/">grid</a>.</li>
<li>A <strong>title</strong>, in general in the header (tabler does always not follow this rule and header is optional).</li>
<li>A <strong>body</strong> where is the main content.</li>
<li>Style elements like color <strong>statuses</strong>.</li>
<li>A <strong>footer</strong> (optional, tabler does not include this).</li>
</ul>
<p>A comprehensive list of all tabler card features may be found <a href="https://preview-dev.tabler.io/docs/cards.html">here</a>. To be faster, we copy the following HTML code in the <a href="https://github.com/alandipert/html2r">html2R</a> shiny app to convert it to Shiny tags:</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb617-1"><a href="custom-templates-skeleton.html#cb617-1"></a><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">"col-md-6"</span><span class="kw">&gt;</span></span>
<span id="cb617-2"><a href="custom-templates-skeleton.html#cb617-2"></a>  <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">"card"</span><span class="kw">&gt;</span></span>
<span id="cb617-3"><a href="custom-templates-skeleton.html#cb617-3"></a>    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">"card-status-top bg-danger"</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb617-4"><a href="custom-templates-skeleton.html#cb617-4"></a>    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">"card-body"</span><span class="kw">&gt;</span></span>
<span id="cb617-5"><a href="custom-templates-skeleton.html#cb617-5"></a>      <span class="kw">&lt;h3</span><span class="ot"> class=</span><span class="st">"card-title"</span><span class="kw">&gt;</span>Title<span class="kw">&lt;/h3&gt;</span></span>
<span id="cb617-6"><a href="custom-templates-skeleton.html#cb617-6"></a>      <span class="kw">&lt;p&gt;</span>Some Text.<span class="kw">&lt;/p&gt;</span></span>
<span id="cb617-7"><a href="custom-templates-skeleton.html#cb617-7"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb617-8"><a href="custom-templates-skeleton.html#cb617-8"></a>  <span class="kw">&lt;/div&gt;</span></span>
<span id="cb617-9"><a href="custom-templates-skeleton.html#cb617-9"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>Below is the result. The next step consists in replacing all content by parameters to the <code><a href="https://rdrr.io/pkg/OSUICode/man/tabler_card.html">tabler_card()</a></code> function, whenever necessary. For instance, the first <code>&lt;div&gt;</code> sets the card width. The Bootstrap grid ranges from 0 to 12, so why not create a width parameter to control the card size. We proceed similarly for the title, status, body content. It seems reasonable to allow title to be <code>NULL</code> (if so, the title is not be shown), same thing for the status. Regarding the card default width, a value of six also makes sense, which would take half of the row:</p>
<div class="sourceCode" id="cb618"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_card</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">title</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">status</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">width</span> <span class="op">=</span> <span class="fl">6</span>,
                        <span class="va">stacked</span> <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">padding</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>

  <span class="va">card_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span>
    <span class="st">"card"</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="va">stacked</span><span class="op">)</span> <span class="st">" card-stacked"</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">padding</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">" card-"</span>, <span class="va">padding</span><span class="op">)</span>
  <span class="op">)</span>

  <span class="va">status_tag</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"card-status-top bg-"</span>, <span class="va">status</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span>

  <span class="va">body_tag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>
    class <span class="op">=</span> <span class="st">"card-body"</span>,
    <span class="co"># we could have a smaller title like h4 or h5...</span>
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">h3</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"card-title"</span>, <span class="va">title</span><span class="op">)</span>
    <span class="op">}</span>,
    <span class="va">...</span>
  <span class="op">)</span>

  <span class="va">main_wrapper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"col-md-"</span>, <span class="va">width</span><span class="op">)</span><span class="op">)</span>
  <span class="va">card_wrapper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="va">card_cl</span><span class="op">)</span>

  <span class="va">card_wrapper</span> <span class="op">&lt;-</span> <span class="va">card_wrapper</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagAppendChild.html">tagAppendChildren</a></span><span class="op">(</span><span class="va">status_tag</span>, <span class="va">body_tag</span><span class="op">)</span>
  <span class="va">main_wrapper</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagAppendChild.html">tagAppendChild</a></span><span class="op">(</span><span class="va">card_wrapper</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>In the meantime, it would be also convenient to be able to display cards in the same row.
Let’s create the <code><a href="https://rdrr.io/pkg/OSUICode/man/tabler_row.html">tabler_row()</a></code>:</p>
<div class="sourceCode" id="cb619"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_row</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="st">"row row-deck"</span>, <span class="va">...</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Below, we show an example of the <code><a href="https://rdrr.io/pkg/OSUICode/man/tabler_card.html">tabler_card()</a></code> function, in combination with the <a href="https://github.com/dreamRs/apexcharter">apexcharter</a> package.</p>
<div class="sourceCode" id="cb620"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dreamRs/apexcharter">apexcharter</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="co"># test the card</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"economics_long"</span><span class="op">)</span>
<span class="va">economics_long</span> <span class="op">&lt;-</span> <span class="va">economics_long</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">variable</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">-</span><span class="fl">100</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="va">spark_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span>,
  var1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">50</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,
  var2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">50</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,
  var3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">50</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">my_card</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_card.html">tabler_card</a></span><span class="op">(</span>
  <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/apexcharter-shiny.html">apexchartOutput</a></span><span class="op">(</span><span class="st">"my_chart"</span><span class="op">)</span>, 
  title <span class="op">=</span> <span class="st">"My card"</span>, 
  status <span class="op">=</span> <span class="st">"danger"</span>
<span class="op">)</span>

<span class="fu"><a href="https://rstudio.github.io/thematic/reference/thematic_on.html">thematic_shiny</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_page.html">tabler_page</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_body.html">tabler_body</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_row.html">tabler_row</a></span><span class="op">(</span>
      <span class="va">my_card</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_card.html">tabler_card</a></span><span class="op">(</span>
        <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/apexcharter-shiny.html">apexchartOutput</a></span><span class="op">(</span><span class="st">"spark_box"</span><span class="op">)</span>, 
        title <span class="op">=</span> <span class="st">"My card"</span>, 
        status <span class="op">=</span> <span class="st">"success"</span>
      <span class="op">)</span> 
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">output</span><span class="op">$</span><span class="va">my_chart</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/apexcharter-shiny.html">renderApexchart</a></span><span class="op">(</span><span class="op">{</span>
    <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/apex.html">apex</a></span><span class="op">(</span>
      data <span class="op">=</span> <span class="va">economics_long</span>, 
      type <span class="op">=</span> <span class="st">"area"</span>, 
      mapping <span class="op">=</span> <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/apexcharter-exports.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value01</span>, fill <span class="op">=</span> <span class="va">variable</span><span class="op">)</span>
    <span class="op">)</span> <span class="op">%&gt;%</span>
      <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/ax_yaxis.html">ax_yaxis</a></span><span class="op">(</span>decimalsInFloat <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># number of decimals to keep</span>
      <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/ax_chart.html">ax_chart</a></span><span class="op">(</span>stacked <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span>
      <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/ax_yaxis.html">ax_yaxis</a></span><span class="op">(</span>max <span class="op">=</span> <span class="fl">4</span>, tickAmount <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
  
  <span class="va">output</span><span class="op">$</span><span class="va">spark_box</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/apexcharter-shiny.html">renderApexchart</a></span><span class="op">(</span><span class="op">{</span>
    <span class="fu"><a href="https://dreamrs.github.io/apexcharter/reference/spark_box.html">spark_box</a></span><span class="op">(</span>
      data <span class="op">=</span> <span class="va">spark_data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"date"</span>, <span class="st">"var3"</span><span class="op">)</span><span class="op">]</span>,
      title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">spark_data</span><span class="op">$</span><span class="va">var3</span><span class="op">)</span>, 
      subtitle <span class="op">=</span> <span class="st">"Variable 3"</span>,
      color <span class="op">=</span> <span class="st">"#FFF"</span>, background <span class="op">=</span> <span class="st">"#2E93fA"</span>,
      title_style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#FFF"</span><span class="op">)</span>,
      subtitle_style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#FFF"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>The code output is shown on Figure <a href="custom-templates-skeleton.html#fig:tabler-card">18.5</a>.</p>
<div class="figure">
<span id="fig:tabler-card"></span>
<img src="images/practice/tabler-card.png" alt="Tabler card component" width="100%"><p class="caption">
FIGURE 18.5: Tabler card component
</p>
</div>
</div>
</div>
<div id="ribbons-card-components" class="section level3">
<h3>
<span class="header-section-number">18.2.6</span> Ribbons: card components<a class="anchor" aria-label="anchor" href="#ribbons-card-components"><i class="fas fa-link"></i></a>
</h3>
<p>Let’s finish this part by including a card component,
namely the <a href="https://preview-dev.tabler.io/docs/ribbons.html">ribbon</a>.</p>
<div class="sourceCode" id="cb621"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tabler_ribbon</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">position</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">color</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">bookmark</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">ribbon_cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span>
    <span class="st">"ribbon"</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">position</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">" bg-%s"</span>, <span class="va">position</span><span class="op">)</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">color</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">" bg-%s"</span>, <span class="va">color</span><span class="op">)</span>,
    <span class="kw">if</span> <span class="op">(</span><span class="va">bookmark</span><span class="op">)</span> <span class="st">" ribbon-bookmark"</span>
  <span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">div</a></span><span class="op">(</span>class <span class="op">=</span> <span class="va">ribbon_cl</span>, <span class="va">...</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Integrating the freshly created ribbon component requires to modify the card structure since the ribbon is added after the body tag, and no parameter is associated with this slot. We could also modify the <code><a href="https://rdrr.io/pkg/OSUICode/man/tabler_card.html">tabler_card()</a></code> function but <a href="https://github.com/rstudio/htmltools">htmltools</a> offers tools to help us. Since the ribbon should be put after the card body, we may think about the <code><a href="https://rdrr.io/pkg/htmltools/man/tagAppendChild.html">tagAppendChild()</a></code> function, introduced in Chapter <a href="htmltools-overview.html#htmltools-overview">2</a>:</p>
<div class="sourceCode" id="cb622"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add the ribbon to a card</span>
<span class="va">my_card</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_card.html">tabler_card</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Ribbon"</span>, status <span class="op">=</span> <span class="st">"info"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">my_card</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; List of 3
#&gt;  $ name    : chr "div"
#&gt;  $ attribs :List of 1
#&gt;   ..$ class: chr "col-md-6"
#&gt;  $ children:List of 1
#&gt;   ..$ :List of 3
#&gt;   .. ..$ name    : chr "div"
#&gt;   .. ..$ attribs :List of 1
#&gt;   .. .. ..$ class: chr "card"
#&gt;   .. ..$ children:List of 2
#&gt;   .. .. ..$ :List of 3
#&gt;   .. .. .. ..$ name    : chr "div"
#&gt;   .. .. .. ..$ attribs :List of 1
#&gt;   .. .. .. .. ..$ class: chr "card-status-top bg-info"
#&gt;   .. .. .. ..$ children: list()
#&gt;   .. .. .. ..- attr(*, "class")= chr "shiny.tag"
#&gt;   .. .. ..$ :List of 3
#&gt;   .. .. .. ..$ name    : chr "div"
#&gt;   .. .. .. ..$ attribs :List of 1
#&gt;   .. .. .. .. ..$ class: chr "card-body"
#&gt;   .. .. .. ..$ children:List of 1
#&gt;   .. .. .. .. ..$ :List of 3
#&gt;   .. .. .. .. .. ..$ name    : chr "h3"
#&gt;   .. .. .. .. .. ..$ attribs :List of 1
#&gt;   .. .. .. .. .. .. ..$ class: chr "card-title"
#&gt;   .. .. .. .. .. ..$ children:List of 1
#&gt;   .. .. .. .. .. .. ..$ : chr "Ribbon"
#&gt;   .. .. .. .. .. ..- attr(*, "class")= chr "shiny.tag"
#&gt;   .. .. .. ..- attr(*, "class")= chr "shiny.tag"
#&gt;   .. ..- attr(*, "class")= chr "shiny.tag"
#&gt;  - attr(*, "class")= chr "shiny.tag"</code></pre>
<div class="sourceCode" id="cb624"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_card</span><span class="op">$</span><span class="va">children</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">my_card</span><span class="op">$</span><span class="va">children</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagAppendChild.html">tagAppendChild</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_ribbon.html">tabler_ribbon</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon</a></span><span class="op">(</span><span class="st">"info-circle"</span>, class <span class="op">=</span> <span class="st">"fa-lg"</span><span class="op">)</span>, 
      bookmark <span class="op">=</span> <span class="cn">TRUE</span>,
      color <span class="op">=</span> <span class="st">"red"</span>
    <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<p>As shown above, the ribbon has been successfuly included in the card tag. Now, we check how it looks in a shiny app.</p>
<div class="sourceCode" id="cb625"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rstudio.github.io/thematic/reference/thematic_on.html">thematic_shiny</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_page.html">tabler_page</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/tabler_body.html">tabler_body</a></span><span class="op">(</span>
    <span class="va">my_card</span>
  <span class="op">)</span>
<span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<div class="figure">
<span id="fig:tabler-ribbon"></span>
<img src="images/practice/tabler-ribbon.png" alt="Tabler ribbon component" width="100%"><p class="caption">
FIGURE 18.6: Tabler ribbon component
</p>
</div>
</div>
<div id="icons" class="section level3">
<h3>
<span class="header-section-number">18.2.7</span> Icons<a class="anchor" aria-label="anchor" href="#icons"><i class="fas fa-link"></i></a>
</h3>
<p>Not mentioned before but we may include fontawesome icons provided with Shiny, as well as other libraries.
Moreover, Tabler has a internal svg library located <a href="https://preview-dev.tabler.io/icons.html">here</a>.</p>
</div>
</div>
<div id="exercises-1" class="section level2">
<h2>
<span class="header-section-number">18.3</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-1"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Consider the tab card at the very bottom of the tabler <a href="https://preview-dev.tabler.io/docs/cards.html">documentation</a>. Propose an implementation of that feature.</li>
<li>Have a look at this <a href="https://preview-dev.tabler.io/snippets.html">page</a>. Select two elements and create the corresponding R functions.</li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="custom-templates-dependencies.html"><span class="header-section-number">17</span> Define dependencies</a></div>
<div class="next"><a href="custom-templates-inputs.html"><span class="header-section-number">19</span> Develop custom input widgets</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#custom-templates-skeleton"><span class="header-section-number">18</span> Create template elements</a></li>
<li><a class="nav-link" href="#identify-template-elements"><span class="header-section-number">18.1</span> Identify template elements</a></li>
<li>
<a class="nav-link" href="#design-the-page-layout"><span class="header-section-number">18.2</span> Design the page layout</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#the-page-wrapper"><span class="header-section-number">18.2.1</span> The page wrapper</a></li>
<li><a class="nav-link" href="#the-body-content"><span class="header-section-number">18.2.2</span> The body content</a></li>
<li><a class="nav-link" href="#the-footer"><span class="header-section-number">18.2.3</span> The footer</a></li>
<li><a class="nav-link" href="#the-navbar-or-header"><span class="header-section-number">18.2.4</span> The navbar (or header)</a></li>
<li><a class="nav-link" href="#card-containers"><span class="header-section-number">18.2.5</span> Card containers</a></li>
<li><a class="nav-link" href="#ribbons-card-components"><span class="header-section-number">18.2.6</span> Ribbons: card components</a></li>
<li><a class="nav-link" href="#icons"><span class="header-section-number">18.2.7</span> Icons</a></li>
</ul>
</li>
<li><a class="nav-link" href="#exercises-1"><span class="header-section-number">18.3</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/custom-templates-skeleton.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/custom-templates-skeleton.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It was last built on 2021-08-27.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
