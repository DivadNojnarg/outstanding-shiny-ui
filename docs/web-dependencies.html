<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Discover Shiny dependencies | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<!-- CSS --><link rel="stylesheet" href="css/style.css">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.2/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.2/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.1.9000/tabs.js"></script><script src="libs/bs3compat-0.2.1.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="foreword.html">Foreword</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="active" href="web-dependencies.html"><span class="header-section-number">2</span> Discover Shiny dependencies</a></li>
<li class="book-part">From R to HTML: discover and master {htmltools}:</li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">3</span> htmltools overview</a></li>
<li><a class="" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Dependency utilities</a></li>
<li class="book-part">Beautify with CSS and SASS</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">5</span> CSS for Shiny</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">6</span> Introduction to SASS</a></li>
<li><a class="" href="beautify-with-fresh.html"><span class="header-section-number">7</span> Beautify with fresh</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">8</span> Beautify with bslib</a></li>
<li><a class="" href="beautify-other-tools.html"><span class="header-section-number">9</span> Other tools</a></li>
<li class="book-part">Unleash interactivity with JavaScript</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">10</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">11</span> Shiny’s internal: session and websockets</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">12</span> Shiny’s input system</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">13</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">14</span> Hidden gems about inputs</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">15</span> Dynamically manage content with handlers</a></li>
<li class="book-part">Practice 1: a dashboard template</li>
<li><a class="" href="custom-templates-selection.html"><span class="header-section-number">16</span> Template selection</a></li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">17</span> Define dependencies</a></li>
<li><a class="" href="custom-templates-skeleton.html"><span class="header-section-number">18</span> Template skeleton</a></li>
<li><a class="" href="custom-templates-testing.html"><span class="header-section-number">19</span> Testing and validating templates elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">20</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">21</span> Adding more interactivity</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">22</span> Introduction to {charpente}</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source</a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="web-dependencies" class="section level1">
<h1>
<span class="header-section-number">2</span> Discover Shiny dependencies<a class="anchor" aria-label="anchor" href="#web-dependencies"><i class="fas fa-link"></i></a>
</h1>
<div id="introduction" class="section level2">
<h2>
<span class="header-section-number">2.1</span> Introduction<a class="anchor" aria-label="anchor" href="#introduction"><i class="fas fa-link"></i></a>
</h2>
<p>If Shiny creates HTML code for us, it is not enough to design a beautiful working app with user interactions. As shown earlier, all modern web sites and apps have a lot of CSS and JavaScript under the hood. Let’s explore these elements in the following exercise.</p>
<p>The simplest Shiny layout is the <code>fluidPage</code>. The <code>shinyapp</code> predefined Rstudio snippet will create a basic app skeleton (type shinyapp in RStudio IDE):</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">p</a></span><span class="op">(</span><span class="st">"Hello World"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>At first glance, the page only contains text. Wait … are you sure about this? Let’s run the above example and open the HTML inspector introduced in <a href="web-intro.html#web-intro-html">1.2</a>. Results are displayed on Figure <a href="web-dependencies.html#fig:shiny-deps">2.1</a>.</p>
<div class="figure">
<span id="fig:shiny-deps"></span>
<img src="images/survival-kit/shiny-deps.png" alt="Shiny dependencies" width="100%"><p class="caption">
FIGURE 2.1: Shiny dependencies
</p>
</div>
<ol style="list-style-type: decimal">
<li>Click on “Open in Browser”</li>
<li>Open the HTML inspector</li>
<li>Locate the <code>&lt;head&gt;</code> tag</li>
<li>Uncollapse it and search for the script containing <code>application/html-dependencies</code>
</li>
<li>List all dependencies</li>
</ol>
<p>We see in the head section (delimited by <code>&lt;head&gt;&lt;/head&gt;</code>) that Shiny has four dependencies:</p>
<ul>
<li>json2</li>
<li>jQuery 3.4.1</li>
<li>shiny (custom JavaScript and CSS)</li>
<li>Bootstrap 3.4.1 (JavaScript and CSS) + other files (html5shiv, respond)</li>
</ul>
</div>
<div id="bootstrap" class="section level2">
<h2>
<span class="header-section-number">2.2</span> Bootstrap<a class="anchor" aria-label="anchor" href="#bootstrap"><i class="fas fa-link"></i></a>
</h2>
<p>According to the gitstar ranking, <a href="https://getbootstrap.com">Bootstrap</a> comes at the 7th place (144563 stars) and 22th place for repositories and organization, respectively. It has been first released in 2011 and will welcome the fifth <a href="https://v5.getbootstrap.com/">version</a> in few months. It provides plug and play layout and interactive elements such as tabs, navigation bars, tooltips, popovers and many input (forms), which is rather convenient since it avoids writing a large amount of CSS/JavaScript that would bring more complexity. The first release of Shiny was shipped with <a href="https://github.com/rstudio/shinybootstrap2">Bootstrap 2</a>. Shiny currently relies on Bootstrap 3 since v0.11, while a lot of efforts are being made to provide a Bootstrap 4 compatibility, essentially through the <a href="https://github.com/rstudio/bootstraplib">bootstraplib</a> R package.</p>
<p>One of the great advantage of using Bootstrap is the responsiveness of the design that can work either on desktop or mobile, even though advanced user likely prefer other specialized libraries like <a href="https://framework7.io/">Framework7</a> or <a href="https://onsen.io/">onsenUI</a> to develop native looking apps.</p>
<p>Bootstrap 3 relies on the grid layout <a href="https://getbootstrap.com/docs/3.4/examples/grid/">system</a> that allows to efficiently organize the content in row and columns. For instance the <code>fluidRow</code> and <code>column</code> Shiny functions leverage the Bootstrap grid to control how elements are displayed in a page.</p>
<p>How does Shiny attach the Bootstrap dependencies? The well know <code>fluidPage</code> layout is actually hiding a lower level function, that is <code>bootstrapPage</code>. The latter is also called in many other high level layout functions for instance <code>fixedPage</code>, <code>fillPage</code> and <code>navbarPage</code>. It simply attaches <code>bootstraplib</code> as well as any Bootstrap compatible theme css files that one can pass with the <a href="http://rstudio.github.io/shinythemes/">shinythemes</a> <a href="https://github.com/rstudio/shinythemes">package</a>.</p>
<p>The interested reader will have a look at the following <a href="https://github.com/rstudio/shiny/blob/master/R/bootstrap-layout.R">script</a>.</p>
</div>
<div id="jquery-dom-manipulation" class="section level2">
<h2>
<span class="header-section-number">2.3</span> jQuery, DOM manipulation<a class="anchor" aria-label="anchor" href="#jquery-dom-manipulation"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://jquery.com/">jQuery</a> allows to perform DOM manipulation, that is interacting with HMTL elements, in a more user-friendly manner than with pure JavaScript. At that step, you might not be familiar with JavaScript nor jQuery. Don’t worry chapter <a href="survival-kit-javascript.html#survival-kit-javascript">10</a> will expose the basics. Below is a comparison on how you would select a button HTML element with both technologies. I am sure you’ll notice how jQuery<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;The next iteration of Bootstrap, namely &lt;a href="https://blog.getbootstrap.com/2020/06/16/bootstrap-5-alpha/"&gt;Bootstrap 5&lt;/a&gt; completely abandons jQuery for vanilla JavaScript. The main reason is to lighten the Bootstrap code.&lt;/p&gt;'><sup>2</sup></a> is more intuitive than JavaScript.</p>
<p>Javascript:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb79-1"><a href="web-dependencies.html#cb79-1"></a><span class="kw">var</span> btn <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">'mybutton'</span>)<span class="op">;</span> <span class="co">// select the button</span></span>
<span id="cb79-2"><a href="web-dependencies.html#cb79-2"></a><span class="va">btn</span>.<span class="at">addEventListener</span>(<span class="st">'click'</span><span class="op">,</span> <span class="kw">function</span>() <span class="op">{</span> <span class="co">// action + consequences</span></span>
<span id="cb79-3"><a href="web-dependencies.html#cb79-3"></a>  <span class="at">alert</span>(<span class="st">'You clicked me!'</span>)<span class="op">;</span> <span class="co">// action</span></span>
<span id="cb79-4"><a href="web-dependencies.html#cb79-4"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>jQuery:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb80-1"><a href="web-dependencies.html#cb80-1"></a><span class="at">$</span>(<span class="st">'#mybutton'</span>).<span class="at">on</span>(<span class="st">'click'</span><span class="op">,</span> <span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb80-2"><a href="web-dependencies.html#cb80-2"></a>  <span class="at">alert</span>(<span class="st">'You clicked me!'</span>)<span class="op">;</span></span>
<span id="cb80-3"><a href="web-dependencies.html#cb80-3"></a><span class="op">}</span>)<span class="op">;</span></span></code></pre></div>
<p>Interestingly, the work in progress <code>{jquerylib}</code> will provide <a href="https://github.com/rstudio/jquerylib">support</a> for <a href="http://shiny.rstudio.com">shiny</a> in future releases.</p>
</div>
<div id="data-formating" class="section level2">
<h2>
<span class="header-section-number">2.4</span> Data formating<a class="anchor" aria-label="anchor" href="#data-formating"><i class="fas fa-link"></i></a>
</h2>
<p>json2 is a library to handle the <a href="https://www.json.org/json-en.html">JSON</a> data format (JavaScript Object Notation). We will see in section <a href="shiny-intro.html#shiny-websocket">11.2</a> of Chapter <a href="shiny-intro.html#shiny-intro">11</a> that the R / JS communication involves data exchange and given that data structures are not the same in R and JS, there must be a way to ensure the translation. This is done through the <a href="https://cran.r-project.org/web/packages/jsonlite/index.html">jsonlite</a> package that allows to transform JSON objects in R objects with <code><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">jsonlite::fromJSON</a></code> and inversely with <code><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">jsonlite::toJSON</a></code>. Shiny automatically handles the process and it works well most of the time!</p>
</div>
<div id="custom-dependencies" class="section level2">
<h2>
<span class="header-section-number">2.5</span> Custom dependencies<a class="anchor" aria-label="anchor" href="#custom-dependencies"><i class="fas fa-link"></i></a>
</h2>
<p>The last dependency contains custom JS and CSS code necessary for Shiny to work, that is:</p>
<ul>
<li>Fine tuning the layout</li>
<li>Registering input/output</li>
<li>Handling every single input/output action</li>
<li>Initializing and controlling the R/JS communication</li>
<li>Handling alerts/modals/notifications</li>
<li>…</li>
</ul>
<p>Part <a href="shiny-intro.html#shiny-js-object">11.1</a>, <a href="shiny-input-system.html#shiny-input-system">12</a>, <a href="shiny-custom-handler.html#shiny-custom-handler">15</a> and <a href="custom-templates-interactivity.html#custom-templates-interactivity">21</a> showcase the most important elements of those custom files.</p>
<p>TO DO: link to CSS part</p>
<p>The interested reader will have a look at the following <a href="https://github.com/rstudio/shiny/blob/master/R/shinyui.R">script</a>.</p>
</div>
<div id="exercise" class="section level2">
<h2>
<span class="header-section-number">2.6</span> Exercise<a class="anchor" aria-label="anchor" href="#exercise"><i class="fas fa-link"></i></a>
</h2>
<p>In the following exercise, we consider a more complex app with a slider as well as a plot output.</p>
<ol style="list-style-type: decimal">
<li>Run the app <code><a href="https://rdrr.io/pkg/shiny/man/runExample.html">runExample("01_hello")</a></code>
</li>
<li>Open the HTML inspector</li>
<li>Delete the bootstrap.min.css and ion.rangeSlider.css</li>
<li>Conclusions</li>
</ol>
<p>To sump up, all these libraries are necessary to make Shiny what it is!</p>
<p>In Chapter <a href="htmltools-dependencies.html#htmltools-dependencies">4</a>, we explore tools to manage HTML dependencies. In Chapter <a href="custom-templates-interactivity.html#insert-tabs">21.4.1</a>, we study a special case to insert dependencies during the app runtime.</p>
<p>Let’s move to the next part to discover the internal engine that creates HTML code from R!</p>

</div>
</div>




<div class="chapter-nav">
<div class="prev"><a href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></div>
<div class="next"><a href="htmltools-overview.html"><span class="header-section-number">3</span> htmltools overview</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#web-dependencies"><span class="header-section-number">2</span> Discover Shiny dependencies</a></li>
<li><a class="nav-link" href="#introduction"><span class="header-section-number">2.1</span> Introduction</a></li>
<li><a class="nav-link" href="#bootstrap"><span class="header-section-number">2.2</span> Bootstrap</a></li>
<li><a class="nav-link" href="#jquery-dom-manipulation"><span class="header-section-number">2.3</span> jQuery, DOM manipulation</a></li>
<li><a class="nav-link" href="#data-formating"><span class="header-section-number">2.4</span> Data formating</a></li>
<li><a class="nav-link" href="#custom-dependencies"><span class="header-section-number">2.5</span> Custom dependencies</a></li>
<li><a class="nav-link" href="#exercise"><span class="header-section-number">2.6</span> Exercise</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/web-dependencies.Rmd">View source</a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/web-dependencies.Rmd">Edit this page</a></li>
        </ul>
</div>
    </nav>
</div>
</div>

  

  

</div>
 <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It waslast built on 2020-12-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This website is produced by the <a class="text-light" href="https://bookdown.org">bookdown</a> bs4_book template.</p>
  </div>

</div></div>
</footer>
</body>
</html>
