<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 4 Handle HTML dependencies with {htmltools} | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<meta name="description" content="In this chapter, I’ll demonstrate how we can utilize {htmltools} (Cheng, Sievert, et al. 2021) to manage web dependencies, that is handling CSS and JS code as well as other assets in your shiny...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 4 Handle HTML dependencies with {htmltools} | Outstanding User Interfaces with Shiny">
<meta property="og:type" content="book">
<meta property="og:image" content="https://raw.githubusercontent.com/DivadNojnarg/outstanding-shiny-ui/master/images/intro/crc-press-cover.svg">
<meta property="og:description" content="In this chapter, I’ll demonstrate how we can utilize {htmltools} (Cheng, Sievert, et al. 2021) to manage web dependencies, that is handling CSS and JS code as well as other assets in your shiny...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 4 Handle HTML dependencies with {htmltools} | Outstanding User Interfaces with Shiny">
<meta name="twitter:description" content="In this chapter, I’ll demonstrate how we can utilize {htmltools} (Cheng, Sievert, et al. 2021) to manage web dependencies, that is handling CSS and JS code as well as other assets in your shiny...">
<meta name="twitter:image" content="https://raw.githubusercontent.com/DivadNojnarg/outstanding-shiny-ui/master/images/intro/crc-press-cover.svg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="foreword.html">Foreword</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">2</span> Manipulate HTML tags from R with {htmltools}</a></li>
<li><a class="" href="web-dependencies.html"><span class="header-section-number">3</span> Discover Shiny dependencies</a></li>
<li><a class="active" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Handle HTML dependencies with {htmltools}</a></li>
<li><a class="" href="web-applications.html"><span class="header-section-number">5</span> Web application concepts</a></li>
<li class="book-part">Beautify with CSS and Sass</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">6</span> CSS for Shiny</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">7</span> Tidy your CSS with Sass</a></li>
<li><a class="" href="beautify-with-fresh.html"><span class="header-section-number">8</span> Beautify with {fresh}</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">9</span> Become a theming wizard with {bslib}</a></li>
<li class="book-part">Unleash interactivity with JavaScript</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">10</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">11</span> Communicate between R and JS</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">12</span> Understand and develop new Shiny inputs</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">13</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">14</span> Mastering Shiny’s events</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">15</span> Optimize your apps with custom handlers</a></li>
<li class="book-part">Practice: A Bootstrap 4 dashboard template</li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">16</span> Define dependencies</a></li>
<li><a class="" href="custom-templates-skeleton.html"><span class="header-section-number">17</span> Create template elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">18</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">19</span> Adding more interactivity</a></li>
<li><a class="" href="custom-templates-testing.html"><span class="header-section-number">20</span> Testing and validating templates elements</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">21</span> Automate new template creation with {charpente}</a></li>
<li class="book-part">Case study: Mobile development for Shiny</li>
<li><a class="" href="mobile-shiny-intro.html"><span class="header-section-number">22</span> Introduction</a></li>
<li><a class="" href="mobile-shinyMobile.html"><span class="header-section-number">23</span> Reconstruct {shinyMobile}</a></li>
<li><a class="" href="mobile-pwa.html"><span class="header-section-number">24</span> {shinyMobile} and PWA</a></li>
<li><a class="" href="mobile-widgets.html"><span class="header-section-number">25</span> Design widgets</a></li>
<li><a class="" href="mobile-going-further.html"><span class="header-section-number">26</span> Fine tune {shinyMobile}</a></li>
<li class="book-part">Going further</li>
<li><a class="" href="going-further-reactR.html"><span class="header-section-number">27</span> Shiny and React with {reactR}</a></li>
<li><a class="" href="going-further-webdev.html"><span class="header-section-number">28</span> Divide and Conquere</a></li>
<li><a class="" href="going-further-where-to-go.html"><span class="header-section-number">29</span> What to do next?</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="code-outputs.html"><span class="header-section-number">A</span> Code outputs</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="htmltools-dependencies" class="section level1" number="4">
<h1>
<span class="header-section-number">4</span> Handle HTML dependencies with {htmltools}<a class="anchor" aria-label="anchor" href="#htmltools-dependencies"><i class="fas fa-link"></i></a>
</h1>
<p>In this chapter, I’ll demonstrate how we can utilize <a href="https://github.com/rstudio/htmltools">htmltools</a> <span class="citation">(<a href="references.html#ref-R-htmltools" role="doc-biblioref">Cheng, Sievert, et al. 2021</a>)</span> to manage web <strong>dependencies</strong>, that is handling CSS and JS code as well as other <strong>assets</strong> in your shiny apps. This literally opens the doors to work with almost any web framework and design outstanding user experiences with Shiny in a reasonable amount of time and <strong>reproducible</strong> manner.</p>
<div id="motivations" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> Motivations<a class="anchor" aria-label="anchor" href="#motivations"><i class="fas fa-link"></i></a>
</h2>
<p>In this example, we would like to include a Material Bootstrap <a href="https://mdbootstrap.com/docs/standard/components/cards/">card</a> in a shiny app.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:mdb-card"></span>
<img src="images/htmltools/mdb-card.png" alt="Material Bootstrap design card." width="50%"><p class="caption">
FIGURE 4.1: Material Bootstrap design card.
</p>
</div>
<p>The naive approach would be to include the HTML code directly in the app code. <code><a href="https://rdrr.io/pkg/OSUICode/man/my_card.html">my_card()</a></code> creates the card structure:</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="co"># we create the card function before</span>
<span class="va">my_card</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/withTags.html">withTags</a></span><span class="op">(</span>
    <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span>
      class <span class="op">=</span> <span class="st">"card"</span>,
      <span class="va">tags</span><span class="op">$</span><span class="fu">div</span><span class="op">(</span>
        class <span class="op">=</span> <span class="st">"card-body"</span>,
        <span class="va">tags</span><span class="op">$</span><span class="fu">h5</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"card-title"</span>, <span class="st">"Card title"</span><span class="op">)</span>,
        <span class="va">tags</span><span class="op">$</span><span class="fu">p</span><span class="op">(</span>class <span class="op">=</span> <span class="st">"card-text"</span>, <span class="st">"Card content"</span><span class="op">)</span>,
        <span class="va">tags</span><span class="op">$</span><span class="fu">button</span><span class="op">(</span>
          type <span class="op">=</span> <span class="st">"button"</span>,
          class <span class="op">=</span> <span class="st">"btn btn-primary"</span>,
          <span class="st">"Button"</span>
        <span class="op">)</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Below is a Shiny app example:</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "htmltools/deps/card/ex1" </span>
<span class="co">#   "package = "OSUICode" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">OSUICode</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>
  ui <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span>
        width <span class="op">=</span> <span class="fl">6</span>,
        align <span class="op">=</span> <span class="st">"center"</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/my_card.html">my_card</a></span><span class="op">(</span><span class="st">"Card Content"</span><span class="op">)</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>,
  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>
<span class="op">)</span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:mdb-card-dirty"></span>
<img src="images/htmltools/mdb-card-dirty.png" alt="Attempt to display a Material Bootstrap card without dependencies in a shiny app." width="100%"><p class="caption">
FIGURE 4.2: Attempt to display a Material Bootstrap card without dependencies in a shiny app.
</p>
</div>
<p>As depicted by Figure <a href="htmltools-dependencies.html#fig:mdb-card-dirty">4.2</a>, nothing is displayed which was expected since <a href="https://shiny.rstudio.com/">shiny</a> <span class="citation">(<a href="references.html#ref-R-shiny" role="doc-biblioref">Chang et al. 2021</a>)</span> does not import Bootstrap 4 dependencies. Don’t panic! We load the necessary css to display this card (if required, we could include the javascript as well). We could use either <code><a href="https://rdrr.io/pkg/htmltools/man/include.html">includeCSS()</a></code>, <code>tags$head(tags$link(rel = "stylesheet", type = "text/css", href = "custom.css"))</code>, as described in the shiny documentation <a href="https://shiny.rstudio.com/articles/css.html">here</a>. Web development best practice recommend to point to external file rather than including CSS in the head or as inline CSS (see chapter <a href="beautify-css.html#beautify-css">6</a>). In the below example, we use a <strong>CDN</strong> (content delivery network) but that could be a local file in the <code>www/</code> folder:</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "htmltools/deps/card/ex2" </span>
<span class="co">#   "package = "OSUICode" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">OSUICode</span><span class="op">)</span>

<span class="va">mdb_cdn</span> <span class="op">&lt;-</span> <span class="st">"https://cdnjs.cloudflare.com/ajax/libs/"</span>
<span class="va">mdb_css</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">mdb_cdn</span>, <span class="st">"mdb-ui-kit/3.6.0/mdb.min.css"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>
  ui <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
    <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span><span class="st">"body {background: gainsboro;}"</span><span class="op">)</span>,
    <span class="co"># load the css code</span>
    <span class="va">tags</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span>
      <span class="va">tags</span><span class="op">$</span><span class="fu">link</span><span class="op">(</span>
        rel <span class="op">=</span> <span class="st">"stylesheet"</span>,
        type <span class="op">=</span> <span class="st">"text/css"</span>,
        href <span class="op">=</span> <span class="va">mdb_css</span>
      <span class="op">)</span>
    <span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span>
        width <span class="op">=</span> <span class="fl">6</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,
        <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/my_card.html">my_card</a></span><span class="op">(</span><span class="st">"Card Content"</span><span class="op">)</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>,
  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>
<span class="op">)</span></code></pre></div>
<p>The card may seem ugly but at least it is displayed as shown on Figure <a href="htmltools-dependencies.html#fig:mdb-card-deps">4.3</a>. This approach is however not easy to share with other developers since there is no way to recover the specific dependency.</p>
<div class="figure">
<span style="display:block;" id="fig:mdb-card-deps"></span>
<img src="images/htmltools/mdb-card-deps.png" alt="Material Bootstrap card within a simple app." width="100%"><p class="caption">
FIGURE 4.3: Material Bootstrap card within a simple app.
</p>
</div>
<p>The best approach actually consists in leveraging the <code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency()</a></code> and <code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependencies.html">attachDependencies()</a></code> functions from <a href="https://github.com/rstudio/htmltools">htmltools</a>.
<code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency()</a></code> takes the following main parameters:</p>
<ul>
<li>A <strong>name</strong>.</li>
<li>A <strong>version</strong> (useful to remember on which version it is built upon).</li>
<li>A <strong>path</strong> to the dependency (can be a CDN or a local folder).</li>
<li>
<strong>script</strong> and <strong>stylesheet</strong> to respectively pass css and scripts.</li>
</ul>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># handle dependency</span>
<span class="va">mdb_cdn</span> <span class="op">&lt;-</span> <span class="st">"https://cdnjs.cloudflare.com/ajax/libs/"</span>
<span class="va">mdb_card_dep</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
    name <span class="op">=</span> <span class="st">"mdb-card"</span>,
    version <span class="op">=</span> <span class="st">"1.0"</span>,
    src <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>href <span class="op">=</span> <span class="va">mdb_cdn</span><span class="op">)</span>,
    stylesheet <span class="op">=</span> <span class="st">"mdb-ui-kit/3.6.0/mdb.min.css"</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>If you are not pointing to a CDN and use local files, this is crucial to wrap the newly created dependency in a function since the path has to be determined at run time and not when the package builds. It means that if you are developing a package with dependencies, forgetting this step might prevent other users to get the dependency working on their own machine (the differences between Unix and Windows OS paths is clearly a good example).</p>
<p>We create the card tag and give it the Material Bootstrap dependency through the <code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependencies.html">attachDependencies()</a></code> function.</p>
<div class="noteblock">
<p>In recent version of <a href="https://github.com/rstudio/htmltools">htmltools</a>, we may simply use <code><a href="https://rdrr.io/pkg/htmltools/man/tagList.html">tagList(tag, deps)</a></code> instead. Importantly, <code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependencies.html">attachDependencies()</a></code> has an <code>append</code> parameter FALSE by default. Ensure to set it to TRUE if you want to keep already attached dependencies.</p>
</div>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create the card</span>
<span class="va">my_card</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">cardTag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/my_card.html">my_card</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span>

  <span class="co"># attach dependencies (old way)</span>
  <span class="co"># htmltools::attachDependencies(cardTag, bs4_card_dep())</span>

  <span class="co"># simpler way</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagList.html">tagList</a></span><span class="op">(</span><span class="va">cardTag</span>, <span class="fu">mdb_card_dep</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="op">}</span></code></pre></div>
<p>We finally run our app:</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "htmltools/deps/card/ex3" </span>
<span class="co">#   "package = "OSUICode" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">OSUICode</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  title <span class="op">=</span> <span class="st">"Hello Shiny!"</span>,
  <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span><span class="st">"body {background: gainsboro;}"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html">column</a></span><span class="op">(</span>
      width <span class="op">=</span> <span class="fl">6</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">br</a></span><span class="op">(</span><span class="op">)</span>,
      <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/my_card_with_deps.html">my_card_with_deps</a></span><span class="op">(</span><span class="st">"Card Content"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span><span class="op">)</span></code></pre></div>
<p>According to Figure <a href="htmltools-dependencies.html#fig:mdb-card-deps-conflict">4.4</a>, something seems to be broken or conflicting. If we look at the developer tools, we realize that the new Material Design stylesheet comes before the Shiny Bootstrap CSS, which is the source of our problems.</p>
<div class="importantblock">
<p>This raises an important consideration about <code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency()</a></code>. Under the hood, Shiny adds many necessary dependencies like Bootstrap, jQuery and you have no control over where your own dependencies will be inserted. Section <a href="htmltools-dependencies.html#htmltools-suppress-deps">4.3</a> explains how to seamlessly solve that issue.</p>
</div>
<div class="figure">
<span style="display:block;" id="fig:mdb-card-deps-conflict"></span>
<img src="images/htmltools/mdb-card-deps-conflict.png" alt="Conflict between Material Bootstrap and Bootstrap CSS. " width="100%"><p class="caption">
FIGURE 4.4: Conflict between Material Bootstrap and Bootstrap CSS.
</p>
</div>
<p>With this approach, you can develop a package of custom dependencies that people
could use when they need to add custom elements in shiny.</p>
</div>
<div id="htmldeps-import" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> Importing HTML dependencies from other packages<a class="anchor" aria-label="anchor" href="#htmldeps-import"><i class="fas fa-link"></i></a>
</h2>
<p>The <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a> <span class="citation">(<a href="references.html#ref-R-shinydashboard" role="doc-biblioref">Chang and Borges Ribeiro 2018</a>)</span> package helps to design dashboards with shiny. In the following, we would like to integrate the box component in a classic Shiny App (without the dashboard layout). However, if you try to include the box tag, you will notice that nothing is displayed since <a href="https://shiny.rstudio.com/">shiny</a> does not have <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a> dependencies. <a href="https://github.com/rstudio/htmltools">htmltools</a> contains a function, namely <code><a href="https://rdrr.io/pkg/htmltools/man/findDependencies.html">findDependencies()</a></code> that looks for all dependencies attached to a tag. Before going further, let’s define the basic dashboard skeleton:</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a></span><span class="op">)</span>
<span class="va">dashboard_ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardPage.html">dashboardPage</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardHeader.html">dashboardHeader</a></span><span class="op">(</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardSidebar.html">dashboardSidebar</a></span><span class="op">(</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardBody.html">dashboardBody</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>There are numerous details associated with <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a> that we will not go into.
If you are interested in learning more, please <a href="https://rstudio.github.io/shinydashboard/">check out the package website</a>. The key point here is the main wrapper function <code><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardPage.html">dashboardPage()</a></code>. The <code><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage()</a></code> is another wrapper function that most are already familiar with. We apply <code><a href="https://rdrr.io/pkg/htmltools/man/findDependencies.html">findDependencies()</a></code> on <code>dashboard_ui</code>:</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/htmltools">htmltools</a></span><span class="op">)</span>
<span class="va">dashboard_deps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/findDependencies.html">findDependencies</a></span><span class="op">(</span><span class="va">dashboard_ui</span><span class="op">)</span>
<span class="va">dashboard_deps</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>#&gt; List of 10
#&gt;  $ name      : chr "font-awesome"
#&gt;  $ version   : chr "5.13.0"
#&gt;  $ src       :List of 1
#&gt;   ..$ file: chr "www/shared/fontawesome"
#&gt;  $ meta      : NULL
#&gt;  $ script    : NULL
#&gt;  $ stylesheet: chr [1:2] "css/all.min.css" "css/v4-shims.min.css"
#&gt;  $ head      : NULL
#&gt;  $ attachment: NULL
#&gt;  $ package   : chr "shiny"
#&gt;  $ all_files : logi TRUE
#&gt;  - attr(*, "class")= chr "html_dependency"</code></pre>
<p>For space reasons, we only printed the first dependency output but <code>dashboard_deps</code> is a list containing four dependencies:</p>
<ul>
<li>
<a href="https://fontawesome.com">Font Awesome</a> handles icons. Interestingly, this dependency is provided by <code>dashboardHeader</code>, especially the <code><a href="https://rdrr.io/pkg/shiny/man/icon.html">shiny::icon("bars")</a></code> that collapses the left sidebar.</li>
<li>
<a href="https://getbootstrap.com/docs/3.3/">Bootstrap</a> is the main HTML/CSS/JS template. Importantly,
please note the version 3.3.7, whereas the current is 4.5.2.</li>
<li>
<a href="https://adminlte.io">AdminLTE</a> is the dependency containing HTML/CSS/JS related to the admin template.
It is closely linked to Bootstrap 3.</li>
<li>shinydashboard, the CSS and javascript necessary for our dashboard to work properly. In practice,
integrating custom HTML templates to shiny does not usually work out of the box for many reasons and some modifications are necessary. For instance, here is a list of <a href="https://github.com/rstudio/shinydashboard/blob/4ac99720653f2295f486734c862e56c82edb5d80/srcjs/AdminLTE/README-shiny-mods.md">changes</a> to optimize AdminLTE for shiny. This has major consequences on the template maintenance such that upgrading to another AdminLTE version would require to modify all these elements by hand. You may understand why template maintainers are quite often reluctant to upgrade their dependencies as it might brake the whole package, quite easily.</li>
</ul>
<p>Below, we attach the dependencies to the <code><a href="https://rdrr.io/pkg/shinydashboard/man/box.html">box()</a></code> with <code><a href="https://rdrr.io/pkg/htmltools/man/tagList.html">tagList()</a></code>, as shown above. Notice that our custom <code><a href="https://rdrr.io/pkg/shinydashboard/man/box.html">box()</a></code> does not contain all parameters as in the official <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a> version, which is actually ok at this time. For a better contrast with the body, we add a custom color to the background,
as depicted by Figure <a href="htmltools-dependencies.html#fig:shiny-import-box">4.5</a>:</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_dashboard_box</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">title</span>, <span class="va">status</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tagList.html">tagList</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/box.html">box</a></span><span class="op">(</span>title <span class="op">=</span> <span class="va">title</span>, status <span class="op">=</span> <span class="va">status</span><span class="op">)</span>, 
    <span class="va">dashboard_deps</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "htmltools/deps/dashboard" </span>
<span class="co">#   "package = "OSUICode" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">OSUICode</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span><span class="st">"body { background-color: gainsboro; }"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html">titlePanel</a></span><span class="op">(</span><span class="st">"Shiny with a box"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/OSUICode/man/my_dashboard_box.html">my_dashboard_box</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"My box"</span>, status <span class="op">=</span> <span class="st">"danger"</span><span class="op">)</span>,
<span class="op">)</span>
<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span><span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:shiny-import-box"></span>
<img src="images/htmltools/shiny-import-box.png" alt="AdminLTE2 box inside classic shiny app." width="100%"><p class="caption">
FIGURE 4.5: AdminLTE2 box inside classic shiny app.
</p>
</div>
<p>You now have limitless possibilities. Interestingly, the <a href="https://github.com/dreamRs/shinyWidgets/blob/5b1fe07eaa13ff9157effaa13187d560d4d97644/R/useBs4Dash.R#L123">shinyWidgets</a> <code>useBs4Dash()</code> function relies on the same approach.</p>
</div>
<div id="htmltools-suppress-deps" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> Suppress dependencies<a class="anchor" aria-label="anchor" href="#htmltools-suppress-deps"><i class="fas fa-link"></i></a>
</h2>
<p>In rare cases, you may need to remove an existing <strong>conflicting</strong> dependency. The <code><a href="https://rdrr.io/pkg/htmltools/man/suppressDependencies.html">suppressDependencies()</a></code> function allows users to perform this task. For instance, <a href="https://github.com/Appsilon/shiny.semantic/tree/f184da21864db3c39ea5233187400a87df85fb0f">shiny.semantic</a> built on top of
semantic ui is not compatible with Bootstrap, the latter being dropped from the list, as illustrated by Figure <a href="htmltools-dependencies.html#fig:semantic-suppress-bootstrap">4.6</a>.</p>
<div class="figure">
<span style="display:block;" id="fig:semantic-suppress-bootstrap"></span>
<img src="images/htmltools/semantic-suppress-bootstrap.png" alt="Deletion of Bootstrap inside semanticPage." width="100%"><p class="caption">
FIGURE 4.6: Deletion of Bootstrap inside semanticPage.
</p>
</div>
<p>Below, we remove the AdminLTE2 dependency
from a <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a> page and nothing is displayed (as expected):</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "htmltools/deps/remove-deps" </span>
<span class="co">#   "package = "OSUICode" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>
  ui <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardPage.html">dashboardPage</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardHeader.html">dashboardHeader</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardSidebar.html">dashboardSidebar</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardBody.html">dashboardBody</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/suppressDependencies.html">suppressDependencies</a></span><span class="op">(</span><span class="st">"AdminLTE"</span><span class="op">)</span><span class="op">)</span>,
    title <span class="op">=</span> <span class="st">"Dashboard example"</span>
  <span class="op">)</span>,
  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="resolve-dependencies" class="section level2" number="4.4">
<h2>
<span class="header-section-number">4.4</span> Resolve dependencies<a class="anchor" aria-label="anchor" href="#resolve-dependencies"><i class="fas fa-link"></i></a>
</h2>
<p>Imagine a situation in which we would like to use the very last version of Font Awesome icons, that is currently 5.15.1 according to <a href="https://www.jsdelivr.com/package/npm/@fortawesome/fontawesome-free">jsdelivr</a>. We recall that <a href="https://shiny.rstudio.com/">shiny</a> already provides version 5.13.0 through the <code><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon()</a></code> function. Including another version would probably cause conflicts and we would like to avoid that case. <a href="https://github.com/rstudio/htmltools">htmltools</a> has a <code><a href="https://rdrr.io/pkg/htmltools/man/resolveDependencies.html">resolveDependencies()</a></code> tool that removes any redundant dependencies, keeping the dependency with the higher version if names are identical:</p>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">jsdelivr_cdn</span> <span class="op">&lt;-</span> <span class="st">"https://cdn.jsdelivr.net/npm/@fortawesome/"</span>
<span class="va">ft_aws</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">jsdelivr_cdn</span>, <span class="st">"fontawesome-free@5.15.1/"</span><span class="op">)</span>
<span class="va">new_icon_dep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
  name <span class="op">=</span> <span class="st">"font-awesome"</span>,
  version <span class="op">=</span> <span class="st">"5.15.1"</span>,
  src <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>href <span class="op">=</span> <span class="va">ft_aws</span><span class="op">)</span>,
  stylesheet <span class="op">=</span> <span class="st">"css/all.min.css"</span>
<span class="op">)</span>

<span class="va">icon_deps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  <span class="va">new_icon_dep</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/findDependencies.html">findDependencies</a></span><span class="op">(</span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon</a></span><span class="op">(</span><span class="st">"th"</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/resolveDependencies.html">resolveDependencies</a></span><span class="op">(</span><span class="va">icon_deps</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; List of 10
#&gt;  $ name      : chr "font-awesome"
#&gt;  $ version   : chr "5.15.1"
#&gt;  $ src       :List of 1
#&gt;   ..$ href: chr "https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/"
#&gt;  $ meta      : NULL
#&gt;  $ script    : NULL
#&gt;  $ stylesheet: chr "css/all.min.css"
#&gt;  $ head      : NULL
#&gt;  $ attachment: NULL
#&gt;  $ package   : NULL
#&gt;  $ all_files : logi TRUE
#&gt;  - attr(*, "class")= chr "html_dependency"</code></pre>
<p>Combining <code><a href="https://rdrr.io/pkg/htmltools/man/findDependencies.html">findDependencies()</a></code>, <code><a href="https://rdrr.io/pkg/htmltools/man/suppressDependencies.html">suppressDependencies()</a></code> and <code><a href="https://rdrr.io/pkg/htmltools/man/resolveDependencies.html">resolveDependencies()</a></code> gives you great power to successfully manage your dependencies!</p>
</div>
<div id="insert-custom-script-in-the-head" class="section level2" number="4.5">
<h2>
<span class="header-section-number">4.5</span> Insert Custom script in the head<a class="anchor" aria-label="anchor" href="#insert-custom-script-in-the-head"><i class="fas fa-link"></i></a>
</h2>
<p>With <a href="https://github.com/RinteRface/shinydashboardPlus">shinydashboardPlus</a>, users can fine tune their dashboard behavior with a simple option parameter passed to <code><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardPage.html">dashboardPage()</a></code>. The <code>sidebarExpandOnHover</code> capability, that consists in expanding the sidebar when hovering on it, is part of those <a href="https://adminlte.io/themes/AdminLTE/documentation/index.html#adminlte-options">options</a>, yet not exposed by <a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a>. Under the hood, all those options are gathered in a list, then converted into <strong>JSON</strong> to eventually generate a JavaScript configuration file. Until now, we only saw two ways to include scripts or stylesheets. How do we include any arbitrary script (defined on the fly by the user when the app starts) in a dependency?</p>
<p><code><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency()</a></code> has a <code>head</code> parameter allowing to pass any lines of HTML to insert into the document head. We can easily imagine giving it a string containing a script. Below, we first construct the options list. Then, we create the dependency: notice since <code>src</code> is mandatory, we have to give it a value but we will not use <code>script</code> nor <code>stylesheet</code> arguments.</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">options</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  sidebarExpandOnHover <span class="op">=</span> <span class="cn">TRUE</span>,
  boxWidgetSelectors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    remove <span class="op">=</span> <span class="st">'[data-widget="remove"]'</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">config_script</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">options</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
    <span class="st">"options"</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageVersion</a></span><span class="op">(</span><span class="st">"shinydashboardPlus"</span><span class="op">)</span><span class="op">)</span>,
    src <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span>
      <span class="st">"shinydashboardPlus-2.0.0"</span>,
      package <span class="op">=</span> <span class="st">"shinydashboardPlus"</span><span class="op">)</span>
    <span class="op">)</span>,
    head <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">options</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span>
        <span class="st">"&lt;script&gt;var AdminLTEOptions = "</span>,
        <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">toJSON</a></span><span class="op">(</span>
          <span class="va">options</span>,
          auto_unbox <span class="op">=</span> <span class="cn">TRUE</span>,
          pretty <span class="op">=</span> <span class="cn">TRUE</span>
        <span class="op">)</span>,
        <span class="st">";&lt;/script&gt;"</span>
      <span class="op">)</span>
    <span class="op">}</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="co"># show the script</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML</a></span><span class="op">(</span><span class="fu">config_script</span><span class="op">(</span><span class="va">options</span><span class="op">)</span><span class="op">$</span><span class="va">head</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; &lt;script&gt;var AdminLTEOptions = {
#&gt;   "sidebarExpandOnHover": true,
#&gt;   "boxWidgetSelectors": {
#&gt;     "remove": "[data-widget=\"remove\"]"
#&gt;   }
#&gt; };&lt;/script&gt;</code></pre>
<p>We invite the reader to run the example below involving <a href="https://github.com/RinteRface/shinydashboardPlus">shinydashboardPlus</a>, open the HTML inspector and look at the head.</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "htmltools/deps/custom" </span>
<span class="co">#   "package = "OSUICode" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://rstudio.github.io/shinydashboard/">shinydashboard</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RinteRface/shinydashboardPlus">shinydashboardPlus</a></span><span class="op">)</span>

<span class="va">options</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
  sidebarExpandOnHover <span class="op">=</span> <span class="cn">TRUE</span>,
  boxWidgetSelectors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    remove <span class="op">=</span> <span class="st">'[data-widget="remove"]'</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>
  ui <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardPage.html">dashboardPage</a></span><span class="op">(</span>
    options <span class="op">=</span> <span class="va">options</span>,
    header <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardHeader.html">dashboardHeader</a></span><span class="op">(</span><span class="op">)</span>,
    sidebar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardSidebar.html">dashboardSidebar</a></span><span class="op">(</span><span class="op">)</span>,
    body <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shinydashboard/man/dashboardBody.html">dashboardBody</a></span><span class="op">(</span><span class="op">)</span>,
    controlbar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/shinydashboardPlus/man/controlbar.html">dashboardControlbar</a></span><span class="op">(</span><span class="op">)</span>,
    title <span class="op">=</span> <span class="st">"DashboardPage"</span>
  <span class="op">)</span>,
  server <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span>
<span class="op">)</span></code></pre></div>
<p>According the the AdminLTE <a href="https://adminlte.io/themes/AdminLTE/documentation/index.html#adminlte-options">documentation</a>, global options must be passed before loading the <code>app.min.js</code> script. Creating this “dummy” dependency allowed us to do so, as shown on Figure <a href="htmltools-dependencies.html#fig:htmltools-head-deps">4.7</a>.</p>
<div class="figure">
<span style="display:block;" id="fig:htmltools-head-deps"></span>
<img src="images/htmltools/htmltools-head-deps.png" alt="Insert arbitrary script in the head." width="100%"><p class="caption">
FIGURE 4.7: Insert arbitrary script in the head.
</p>
</div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="web-dependencies.html"><span class="header-section-number">3</span> Discover Shiny dependencies</a></div>
<div class="next"><a href="web-applications.html"><span class="header-section-number">5</span> Web application concepts</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#htmltools-dependencies"><span class="header-section-number">4</span> Handle HTML dependencies with {htmltools}</a></li>
<li><a class="nav-link" href="#motivations"><span class="header-section-number">4.1</span> Motivations</a></li>
<li><a class="nav-link" href="#htmldeps-import"><span class="header-section-number">4.2</span> Importing HTML dependencies from other packages</a></li>
<li><a class="nav-link" href="#htmltools-suppress-deps"><span class="header-section-number">4.3</span> Suppress dependencies</a></li>
<li><a class="nav-link" href="#resolve-dependencies"><span class="header-section-number">4.4</span> Resolve dependencies</a></li>
<li><a class="nav-link" href="#insert-custom-script-in-the-head"><span class="header-section-number">4.5</span> Insert Custom script in the head</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/htmltools-dependencies.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/htmltools-dependencies.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It was last built on 2021-10-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
