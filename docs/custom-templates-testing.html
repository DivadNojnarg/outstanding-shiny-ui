<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 Testing and validating templates elements | Outstanding User Interfaces with Shiny</title>
  <meta name="description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 Testing and validating templates elements | Outstanding User Interfaces with Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will serve as content for the 2020 erum workshop." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Testing and validating templates elements | Outstanding User Interfaces with Shiny" />
  
  <meta name="twitter:description" content="This book will serve as content for the 2020 erum workshop." />
  

<meta name="author" content="David Granjon" />


<meta name="date" content="2020-06-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="custom-templates-skeleton.html"/>
<link rel="next" href="custom-templates-inputs.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Outstanding User Interfaces with Shiny</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#is-this-book-for-me"><i class="fa fa-check"></i>Is this book for me?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#related-content"><i class="fa fa-check"></i>Related content</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#about-the-code"><i class="fa fa-check"></i><b>1.1</b> About the code</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#preliminary-exercices"><i class="fa fa-check"></i><b>1.2</b> Preliminary exercices</a></li>
</ul></li>
<li class="part"><span><b>Survival Kit</b></span></li>
<li class="chapter" data-level="2" data-path="survival-kit-html.html"><a href="survival-kit-html.html"><i class="fa fa-check"></i><b>2</b> HTML</a><ul>
<li class="chapter" data-level="2.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-basics"><i class="fa fa-check"></i><b>2.1</b> HTML Basics</a></li>
<li class="chapter" data-level="2.2" data-path="survival-kit-html.html"><a href="survival-kit-html.html#tag-attributes"><i class="fa fa-check"></i><b>2.2</b> Tag attributes</a></li>
<li class="chapter" data-level="2.3" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-page-skeleton"><i class="fa fa-check"></i><b>2.3</b> HTML page: skeleton</a></li>
<li class="chapter" data-level="2.4" data-path="survival-kit-html.html"><a href="survival-kit-html.html#about-the-document-object-model-dom"><i class="fa fa-check"></i><b>2.4</b> About the Document Object Model (DOM)</a><ul>
<li class="chapter" data-level="2.4.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#visualizing-the-dom-the-html-inspector"><i class="fa fa-check"></i><b>2.4.1</b> Visualizing the DOM: the HTML inspector</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="survival-kit-html.html"><a href="survival-kit-html.html#preliminary-introduction-to-css-and-javascript"><i class="fa fa-check"></i><b>2.5</b> Preliminary introduction to CSS and JavaScript</a><ul>
<li class="chapter" data-level="2.5.1" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-and-css"><i class="fa fa-check"></i><b>2.5.1</b> HTML and CSS</a></li>
<li class="chapter" data-level="2.5.2" data-path="survival-kit-html.html"><a href="survival-kit-html.html#html-and-javascript"><i class="fa fa-check"></i><b>2.5.2</b> HTML and JavaScript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html"><i class="fa fa-check"></i><b>3</b> JavaScript</a><ul>
<li class="chapter" data-level="3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#setup"><i class="fa fa-check"></i><b>3.2</b> Setup</a><ul>
<li class="chapter" data-level="3.2.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#node"><i class="fa fa-check"></i><b>3.2.1</b> Node</a></li>
<li class="chapter" data-level="3.2.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#choose-a-good-ide"><i class="fa fa-check"></i><b>3.2.2</b> Choose a good IDE</a></li>
<li class="chapter" data-level="3.2.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#first-script"><i class="fa fa-check"></i><b>3.2.3</b> First Script</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#programming-with-js-basis"><i class="fa fa-check"></i><b>3.3</b> Programming with JS: basis</a><ul>
<li class="chapter" data-level="3.3.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#js-types"><i class="fa fa-check"></i><b>3.3.1</b> JS types</a></li>
<li class="chapter" data-level="3.3.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#variables"><i class="fa fa-check"></i><b>3.3.2</b> Variables</a></li>
<li class="chapter" data-level="3.3.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#conditions"><i class="fa fa-check"></i><b>3.3.3</b> Conditions</a></li>
<li class="chapter" data-level="3.3.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#objects"><i class="fa fa-check"></i><b>3.3.4</b> Objects</a></li>
<li class="chapter" data-level="3.3.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations"><i class="fa fa-check"></i><b>3.3.5</b> Iterations</a></li>
<li class="chapter" data-level="3.3.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#functions"><i class="fa fa-check"></i><b>3.3.6</b> Functions</a></li>
<li class="chapter" data-level="3.3.7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#event-listeners"><i class="fa fa-check"></i><b>3.3.7</b> Event listeners</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#jquery"><i class="fa fa-check"></i><b>3.4</b> jQuery</a><ul>
<li class="chapter" data-level="3.4.1" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#introduction-1"><i class="fa fa-check"></i><b>3.4.1</b> Introduction</a></li>
<li class="chapter" data-level="3.4.2" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#syntax"><i class="fa fa-check"></i><b>3.4.2</b> Syntax</a></li>
<li class="chapter" data-level="3.4.3" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#useful-functions"><i class="fa fa-check"></i><b>3.4.3</b> Useful functions</a></li>
<li class="chapter" data-level="3.4.4" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#chaining-jquery-methods"><i class="fa fa-check"></i><b>3.4.4</b> Chaining jQuery methods</a></li>
<li class="chapter" data-level="3.4.5" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#iterations-1"><i class="fa fa-check"></i><b>3.4.5</b> Iterations</a></li>
<li class="chapter" data-level="3.4.6" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#good-practice"><i class="fa fa-check"></i><b>3.4.6</b> Good practice</a></li>
<li class="chapter" data-level="3.4.7" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#events"><i class="fa fa-check"></i><b>3.4.7</b> Events</a></li>
<li class="chapter" data-level="3.4.8" data-path="survival-kit-javascript.html"><a href="survival-kit-javascript.html#extending-objects"><i class="fa fa-check"></i><b>3.4.8</b> Extending objects</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Shiny: What’s under the Hood?</b></span></li>
<li class="chapter" data-level="4" data-path="shiny-intro.html"><a href="shiny-intro.html"><i class="fa fa-check"></i><b>4</b> Introduction</a><ul>
<li class="chapter" data-level="4.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-html-css-and-javascript"><i class="fa fa-check"></i><b>4.1</b> Shiny, HTML, CSS and JavaScript</a></li>
<li class="chapter" data-level="4.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-websocket"><i class="fa fa-check"></i><b>4.2</b> Websocket: R/JS bidirectional communication</a></li>
<li class="chapter" data-level="4.3" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-session"><i class="fa fa-check"></i><b>4.3</b> The Shiny session object</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="shiny-input-system.html"><a href="shiny-input-system.html"><i class="fa fa-check"></i><b>5</b> Shiny’s input system</a><ul>
<li class="chapter" data-level="5.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#shiny-javascript-sources"><i class="fa fa-check"></i><b>5.1</b> Shiny JavaScript sources</a></li>
<li class="chapter" data-level="5.2" data-path="shiny-input-system.html"><a href="shiny-input-system.html#the-shiny-javascript-object"><i class="fa fa-check"></i><b>5.2</b> The Shiny JavaScript object</a></li>
<li class="chapter" data-level="5.3" data-path="shiny-input-system.html"><a href="shiny-input-system.html#initialization"><i class="fa fa-check"></i><b>5.3</b> Initialization</a></li>
<li class="chapter" data-level="5.4" data-path="shiny-input-system.html"><a href="shiny-input-system.html#input-bindings"><i class="fa fa-check"></i><b>5.4</b> Input bindings</a><ul>
<li class="chapter" data-level="5.4.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#input-structure"><i class="fa fa-check"></i><b>5.4.1</b> Input structure</a></li>
<li class="chapter" data-level="5.4.2" data-path="shiny-input-system.html"><a href="shiny-input-system.html#binding-shiny-inputs"><i class="fa fa-check"></i><b>5.4.2</b> Binding Shiny inputs</a></li>
<li class="chapter" data-level="5.4.3" data-path="shiny-input-system.html"><a href="shiny-input-system.html#binding-other-elements"><i class="fa fa-check"></i><b>5.4.3</b> Binding other elements</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="shiny-input-system.html"><a href="shiny-input-system.html#utilities-to-quickly-define-new-inputs"><i class="fa fa-check"></i><b>5.5</b> Utilities to quickly define new inputs</a><ul>
<li class="chapter" data-level="5.5.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#introduction-2"><i class="fa fa-check"></i><b>5.5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.5.2" data-path="shiny-input-system.html"><a href="shiny-input-system.html#examples"><i class="fa fa-check"></i><b>5.5.2</b> Examples</a></li>
<li class="chapter" data-level="5.5.3" data-path="shiny-input-system.html"><a href="shiny-input-system.html#custom-data-format"><i class="fa fa-check"></i><b>5.5.3</b> Custom data format</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="shiny-input-system.html"><a href="shiny-input-system.html#miscellaneous"><i class="fa fa-check"></i><b>5.6</b> Miscellaneous</a><ul>
<li class="chapter" data-level="5.6.1" data-path="shiny-input-system.html"><a href="shiny-input-system.html#get-access-to-initial-values"><i class="fa fa-check"></i><b>5.6.1</b> Get access to initial values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="shiny-custom-handler.html"><a href="shiny-custom-handler.html"><i class="fa fa-check"></i><b>6</b> Custom handlers: from R to JavaScript</a></li>
<li class="part"><span><b>htmltools</b></span></li>
<li class="chapter" data-level="7" data-path="htmltools-overview.html"><a href="htmltools-overview.html"><i class="fa fa-check"></i><b>7</b> htmltools overview</a><ul>
<li class="chapter" data-level="7.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#html-tags"><i class="fa fa-check"></i><b>7.1</b> HTML Tags</a></li>
<li class="chapter" data-level="7.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#notations"><i class="fa fa-check"></i><b>7.2</b> Notations</a></li>
<li class="chapter" data-level="7.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#adding-new-tags"><i class="fa fa-check"></i><b>7.3</b> Adding new tags</a></li>
<li class="chapter" data-level="7.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#alternative-way-to-write-tags"><i class="fa fa-check"></i><b>7.4</b> Alternative way to write tags</a></li>
<li class="chapter" data-level="7.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#playing-with-tags"><i class="fa fa-check"></i><b>7.5</b> Playing with tags</a><ul>
<li class="chapter" data-level="7.5.1" data-path="htmltools-overview.html"><a href="htmltools-overview.html#tags-structure"><i class="fa fa-check"></i><b>7.5.1</b> Tags structure</a></li>
<li class="chapter" data-level="7.5.2" data-path="htmltools-overview.html"><a href="htmltools-overview.html#useful-functions-for-tags"><i class="fa fa-check"></i><b>7.5.2</b> Useful functions for tags</a></li>
<li class="chapter" data-level="7.5.3" data-path="htmltools-overview.html"><a href="htmltools-overview.html#other-interesting-functions"><i class="fa fa-check"></i><b>7.5.3</b> Other interesting functions</a></li>
<li class="chapter" data-level="7.5.4" data-path="htmltools-overview.html"><a href="htmltools-overview.html#conditionally-set-attributes"><i class="fa fa-check"></i><b>7.5.4</b> Conditionally set attributes</a></li>
<li class="chapter" data-level="7.5.5" data-path="htmltools-overview.html"><a href="htmltools-overview.html#using"><i class="fa fa-check"></i><b>7.5.5</b> Using %&gt;%</a></li>
<li class="chapter" data-level="7.5.6" data-path="htmltools-overview.html"><a href="htmltools-overview.html#programmatically-create-children-elements"><i class="fa fa-check"></i><b>7.5.6</b> Programmatically create children elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html"><i class="fa fa-check"></i><b>8</b> Dependency utilities</a><ul>
<li class="chapter" data-level="8.1" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-dirty-approach"><i class="fa fa-check"></i><b>8.1</b> The dirty approach</a></li>
<li class="chapter" data-level="8.2" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#the-clean-approach"><i class="fa fa-check"></i><b>8.2</b> The clean approach</a></li>
<li class="chapter" data-level="8.3" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#another-example-importing-html-dependencies-from-other-packages"><i class="fa fa-check"></i><b>8.3</b> Another example: Importing HTML dependencies from other packages</a></li>
<li class="chapter" data-level="8.4" data-path="htmltools-dependencies.html"><a href="htmltools-dependencies.html#suppress-dependencies"><i class="fa fa-check"></i><b>8.4</b> Suppress dependencies</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html"><i class="fa fa-check"></i><b>9</b> Other tools</a><ul>
<li class="chapter" data-level="9.1" data-path="htmltools-other-tools.html"><a href="htmltools-other-tools.html#css"><i class="fa fa-check"></i><b>9.1</b> CSS</a></li>
</ul></li>
<li class="part"><span><b>Practice 1: a dashboard template</b></span></li>
<li class="chapter" data-level="10" data-path="custom-templates-selection.html"><a href="custom-templates-selection.html"><i class="fa fa-check"></i><b>10</b> Template selection</a></li>
<li class="chapter" data-level="11" data-path="custom-templates-package.html"><a href="custom-templates-package.html"><i class="fa fa-check"></i><b>11</b> Package creation</a><ul>
<li class="chapter" data-level="11.1" data-path="custom-templates-package.html"><a href="custom-templates-package.html#introduction-3"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="custom-templates-package.html"><a href="custom-templates-package.html#step-by-step"><i class="fa fa-check"></i><b>11.2</b> Step by step</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html"><i class="fa fa-check"></i><b>12</b> Define dependencies</a><ul>
<li class="chapter" data-level="12.1" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#discover-the-project"><i class="fa fa-check"></i><b>12.1</b> Discover the project</a></li>
<li class="chapter" data-level="12.2" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#identify-mandatory-dependencies"><i class="fa fa-check"></i><b>12.2</b> Identify mandatory dependencies</a></li>
<li class="chapter" data-level="12.3" data-path="custom-templates-dependencies.html"><a href="custom-templates-dependencies.html#bundle-dependencies"><i class="fa fa-check"></i><b>12.3</b> Bundle dependencies</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html"><i class="fa fa-check"></i><b>13</b> Template skeleton</a><ul>
<li class="chapter" data-level="13.1" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#identify-template-elements"><i class="fa fa-check"></i><b>13.1</b> Identify template elements</a></li>
<li class="chapter" data-level="13.2" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#design-the-page-layout"><i class="fa fa-check"></i><b>13.2</b> Design the page layout</a><ul>
<li class="chapter" data-level="13.2.1" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-page-wrapper"><i class="fa fa-check"></i><b>13.2.1</b> The page wrapper</a></li>
<li class="chapter" data-level="13.2.2" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-body-content"><i class="fa fa-check"></i><b>13.2.2</b> The body content</a></li>
<li class="chapter" data-level="13.2.3" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-footer"><i class="fa fa-check"></i><b>13.2.3</b> The footer</a></li>
<li class="chapter" data-level="13.2.4" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#the-navbar-or-header"><i class="fa fa-check"></i><b>13.2.4</b> The navbar (or header)</a></li>
<li class="chapter" data-level="13.2.5" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#card-containers"><i class="fa fa-check"></i><b>13.2.5</b> Card containers</a></li>
<li class="chapter" data-level="13.2.6" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#ribbons-card-components"><i class="fa fa-check"></i><b>13.2.6</b> Ribbons: card components</a></li>
<li class="chapter" data-level="13.2.7" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#icons"><i class="fa fa-check"></i><b>13.2.7</b> Icons</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="custom-templates-skeleton.html"><a href="custom-templates-skeleton.html#exercises"><i class="fa fa-check"></i><b>13.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html"><i class="fa fa-check"></i><b>14</b> Testing and validating templates elements</a><ul>
<li class="chapter" data-level="14.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#validate-template-functions"><i class="fa fa-check"></i><b>14.1</b> Validate template functions</a><ul>
<li class="chapter" data-level="14.1.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#create-your-own-validations"><i class="fa fa-check"></i><b>14.1.1</b> Create your own validations</a></li>
<li class="chapter" data-level="14.1.2" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#existing-utils-functions"><i class="fa fa-check"></i><b>14.1.2</b> Existing utils functions</a></li>
<li class="chapter" data-level="14.1.3" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#example-refine-navbar-menu-items"><i class="fa fa-check"></i><b>14.1.3</b> Example: refine navbar menu items</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-templates-elements"><i class="fa fa-check"></i><b>14.2</b> Testing templates elements</a><ul>
<li class="chapter" data-level="14.2.1" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-template-behavior"><i class="fa fa-check"></i><b>14.2.1</b> Testing template behavior</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="custom-templates-testing.html"><a href="custom-templates-testing.html#testing-javascript"><i class="fa fa-check"></i><b>14.3</b> Testing JavaScript</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html"><i class="fa fa-check"></i><b>15</b> Develop custom input widgets</a><ul>
<li class="chapter" data-level="15.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#tabler-action-button"><i class="fa fa-check"></i><b>15.1</b> Tabler action button</a><ul>
<li class="chapter" data-level="15.1.1" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#reminders-about-the-action-button"><i class="fa fa-check"></i><b>15.1.1</b> Reminders about the action button</a></li>
<li class="chapter" data-level="15.1.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#application-to-tabler"><i class="fa fa-check"></i><b>15.1.2</b> Application to Tabler</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#toggle-switch"><i class="fa fa-check"></i><b>15.2</b> Toggle Switch</a></li>
<li class="chapter" data-level="15.3" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#navbar-menu-input"><i class="fa fa-check"></i><b>15.3</b> Navbar menu input</a></li>
<li class="chapter" data-level="15.4" data-path="custom-templates-inputs.html"><a href="custom-templates-inputs.html#exercises-1"><i class="fa fa-check"></i><b>15.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html"><i class="fa fa-check"></i><b>16</b> Adding more interactivity</a><ul>
<li class="chapter" data-level="16.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#custom-progress-bars"><i class="fa fa-check"></i><b>16.1</b> Custom progress bars</a></li>
<li class="chapter" data-level="16.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#user-feedback-toasts"><i class="fa fa-check"></i><b>16.2</b> User feedback: toasts</a><ul>
<li class="chapter" data-level="16.2.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#toast-skeleton"><i class="fa fa-check"></i><b>16.2.1</b> Toast skeleton</a></li>
<li class="chapter" data-level="16.2.2" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#the-toast-api"><i class="fa fa-check"></i><b>16.2.2</b> The toast API</a></li>
<li class="chapter" data-level="16.2.3" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#r-implementation"><i class="fa fa-check"></i><b>16.2.3</b> R implementation</a></li>
<li class="chapter" data-level="16.2.4" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#wrap-up"><i class="fa fa-check"></i><b>16.2.4</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#transform-an-element-in-a-custom-action-button"><i class="fa fa-check"></i><b>16.3</b> Transform an element in a custom action button</a></li>
<li class="chapter" data-level="16.4" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#tab-events"><i class="fa fa-check"></i><b>16.4</b> Tab events</a><ul>
<li class="chapter" data-level="16.4.1" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#insert-tabs"><i class="fa fa-check"></i><b>16.4.1</b> Insert/Remove tabs in tabsetpanel</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="custom-templates-interactivity.html"><a href="custom-templates-interactivity.html#exercises-2"><i class="fa fa-check"></i><b>16.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Beautify with CSS and SASS</b></span></li>
<li class="chapter" data-level="17" data-path="beautify-with-fresh.html"><a href="beautify-with-fresh.html"><i class="fa fa-check"></i><b>17</b> Beautify with fresh</a><ul>
<li class="chapter" data-level="17.1" data-path="beautify-with-fresh.html"><a href="beautify-with-fresh.html#fresh-the-big-picture"><i class="fa fa-check"></i><b>17.1</b> {fresh}, the big picture</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Outstanding User Interfaces with Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="custom-templates-testing" class="section level1">
<h1><span class="header-section-number">Chapter 14</span> Testing and validating templates elements</h1>
<p>Until now, we have been building the template boilerplate, that is the main skeleton functions (page, navbar, navbar menu, …) as well as some components such as cards, ribbons, progress bars. We also exposed some techniques to substantially give more interactivity to the template, leveraging our freshly acquired JavaScript skills. Does this mean we are ready to make the template public? Not yet since some essentials steps are missing:</p>
<ul>
<li>Input validation is a crucial step toward success. Briefly, it consists in checking user inputs so that your functions fail safely and elegantly by providing meaningful error messages or warnings. This concept has already been covered in R for Data Science, Advanced R and a lot of other resources. Hence, I am not trying to reinvent the wheel and we will rely on already existing patterns, whose effectiveness is no longer to be demonstrated. Welcome to the defensive programming world!</li>
<li>On the other hand, testing components allows to check if a functions does what it is supposed to do. Consequently, it is a proof of robustness, and increases reproducibility. It significantly reduces the mental load when it comes to start code refactoring, thereby making you feel slightly less guilty about creating breaking changes since, most of the time, your tests will be able to capture those error.</li>
</ul>
<div id="validate-template-functions" class="section level2">
<h2><span class="header-section-number">14.1</span> Validate template functions</h2>
<div id="create-your-own-validations" class="section level3">
<h3><span class="header-section-number">14.1.1</span> Create your own validations</h3>
<p>Below, we will show some examples to validate user inputs. We first consider the <code>tabler_card</code> element from Chapter <a href="custom-templates-skeleton.html#custom-templates-skeleton">13</a>.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="custom-templates-testing.html#cb193-1"></a>tabler_card &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">status =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">stacked =</span> <span class="ot">FALSE</span>, <span class="dt">padding =</span> <span class="ot">NULL</span>) {</span>
<span id="cb193-2"><a href="custom-templates-testing.html#cb193-2"></a>  </span>
<span id="cb193-3"><a href="custom-templates-testing.html#cb193-3"></a>  card_cl &lt;-<span class="st"> </span><span class="kw">paste0</span>(</span>
<span id="cb193-4"><a href="custom-templates-testing.html#cb193-4"></a>    <span class="st">&quot;card&quot;</span>, </span>
<span id="cb193-5"><a href="custom-templates-testing.html#cb193-5"></a>    <span class="cf">if</span> (stacked) <span class="st">&quot; card-stacked&quot;</span>,</span>
<span id="cb193-6"><a href="custom-templates-testing.html#cb193-6"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(padding)) <span class="kw">paste0</span>(<span class="st">&quot; card-&quot;</span>, padding)</span>
<span id="cb193-7"><a href="custom-templates-testing.html#cb193-7"></a>  )</span>
<span id="cb193-8"><a href="custom-templates-testing.html#cb193-8"></a>  </span>
<span id="cb193-9"><a href="custom-templates-testing.html#cb193-9"></a>  <span class="kw">div</span>(</span>
<span id="cb193-10"><a href="custom-templates-testing.html#cb193-10"></a>    <span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;col-md-&quot;</span>, width),</span>
<span id="cb193-11"><a href="custom-templates-testing.html#cb193-11"></a>    <span class="kw">div</span>(</span>
<span id="cb193-12"><a href="custom-templates-testing.html#cb193-12"></a>      <span class="dt">class =</span> card_cl,</span>
<span id="cb193-13"><a href="custom-templates-testing.html#cb193-13"></a>      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(status)) {</span>
<span id="cb193-14"><a href="custom-templates-testing.html#cb193-14"></a>        <span class="kw">div</span>(<span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;card-status-top bg-&quot;</span>, status))</span>
<span id="cb193-15"><a href="custom-templates-testing.html#cb193-15"></a>      },</span>
<span id="cb193-16"><a href="custom-templates-testing.html#cb193-16"></a>      <span class="kw">div</span>(</span>
<span id="cb193-17"><a href="custom-templates-testing.html#cb193-17"></a>        <span class="dt">class =</span> <span class="st">&quot;card-body&quot;</span>,</span>
<span id="cb193-18"><a href="custom-templates-testing.html#cb193-18"></a>        <span class="co"># we could have a smaller title like h4 or h5...</span></span>
<span id="cb193-19"><a href="custom-templates-testing.html#cb193-19"></a>        <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(title)) {</span>
<span id="cb193-20"><a href="custom-templates-testing.html#cb193-20"></a>          <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, title)</span>
<span id="cb193-21"><a href="custom-templates-testing.html#cb193-21"></a>        },</span>
<span id="cb193-22"><a href="custom-templates-testing.html#cb193-22"></a>        ...</span>
<span id="cb193-23"><a href="custom-templates-testing.html#cb193-23"></a>      )</span>
<span id="cb193-24"><a href="custom-templates-testing.html#cb193-24"></a>    )</span>
<span id="cb193-25"><a href="custom-templates-testing.html#cb193-25"></a>  )</span>
<span id="cb193-26"><a href="custom-templates-testing.html#cb193-26"></a>  </span>
<span id="cb193-27"><a href="custom-templates-testing.html#cb193-27"></a>}</span></code></pre></div>
<p>The first thing is to think about what to validate. Here, I see at least 3 test:</p>
<ul>
<li>checking the status value</li>
<li>checking the width value</li>
<li>checking the padding value</li>
</ul>
<p>Writing validation tests requires knowledge about the underlying mechanisms. In our case, we must know the Bootstrap 4 grid rules and valid color statuses. The Bootstrap 4 <a href="https://getbootstrap.com/docs/4.0/layout/grid/">grid</a> ranges from 1 to 12. In other words, a card having a width of 12 will take the full page wherease, we may align 3 cards or width 4. Valid <a href="https://getbootstrap.com/docs/4.0/utilities/colors/">statuses</a> are primary, secondary, success, info, danger, warning, light and dark.</p>
<p>It is therefore pretty straightforward to validate the card width: it must be numeric and between 1 and 12. Moreover, since the template has other containers including the width parameter, we will create a function</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="custom-templates-testing.html#cb194-1"></a>validate_width &lt;-<span class="st"> </span><span class="cf">function</span>(width) {</span>
<span id="cb194-2"><a href="custom-templates-testing.html#cb194-2"></a>  <span class="cf">if</span> (<span class="kw">is.numeric</span>(width)) {</span>
<span id="cb194-3"><a href="custom-templates-testing.html#cb194-3"></a>    <span class="cf">if</span> (width <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">||</span><span class="st"> </span>width <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span>) {</span>
<span id="cb194-4"><a href="custom-templates-testing.html#cb194-4"></a>      <span class="kw">stop</span>(<span class="st">&quot;width must belong to [1, 12], as per Bootstrap 4 grid documentation. See more at https://getbootstrap.com/docs/4.0/layout/grid/&quot;</span>)</span>
<span id="cb194-5"><a href="custom-templates-testing.html#cb194-5"></a>    }</span>
<span id="cb194-6"><a href="custom-templates-testing.html#cb194-6"></a>  } <span class="cf">else</span> {</span>
<span id="cb194-7"><a href="custom-templates-testing.html#cb194-7"></a>    <span class="kw">stop</span>(<span class="st">&quot;width must be numeric&quot;</span>)</span>
<span id="cb194-8"><a href="custom-templates-testing.html#cb194-8"></a>  }</span>
<span id="cb194-9"><a href="custom-templates-testing.html#cb194-9"></a>}</span>
<span id="cb194-10"><a href="custom-templates-testing.html#cb194-10"></a></span>
<span id="cb194-11"><a href="custom-templates-testing.html#cb194-11"></a><span class="co"># validate_width(-1)</span></span>
<span id="cb194-12"><a href="custom-templates-testing.html#cb194-12"></a><span class="co"># validate_width(13)</span></span>
<span id="cb194-13"><a href="custom-templates-testing.html#cb194-13"></a><span class="co"># validate_width(&quot;string&quot;)</span></span></code></pre></div>
<p>To check the status parameter, we save the valid statuses in a vector and take the <code>validStatuses</code> function from shinydashboard <a href="https://github.com/rstudio/shinydashboard/blob/master/R/utils.R">utils</a>. It also make sense to create a function since this parameter is widely used among template components. Contrary to the shinydashboard function, our custom <code>valid_status</code> does not fail if the status is NULL since it is not a mandatory parameter.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="custom-templates-testing.html#cb195-1"></a>valid_statuses &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb195-2"><a href="custom-templates-testing.html#cb195-2"></a>  <span class="st">&quot;primary&quot;</span>, </span>
<span id="cb195-3"><a href="custom-templates-testing.html#cb195-3"></a>  <span class="st">&quot;secondary&quot;</span>,</span>
<span id="cb195-4"><a href="custom-templates-testing.html#cb195-4"></a>  <span class="st">&quot;success&quot;</span>, </span>
<span id="cb195-5"><a href="custom-templates-testing.html#cb195-5"></a>  <span class="st">&quot;info&quot;</span>, </span>
<span id="cb195-6"><a href="custom-templates-testing.html#cb195-6"></a>  <span class="st">&quot;warning&quot;</span>, </span>
<span id="cb195-7"><a href="custom-templates-testing.html#cb195-7"></a>  <span class="st">&quot;danger&quot;</span>,</span>
<span id="cb195-8"><a href="custom-templates-testing.html#cb195-8"></a>  <span class="st">&quot;light&quot;</span>,</span>
<span id="cb195-9"><a href="custom-templates-testing.html#cb195-9"></a>  <span class="st">&quot;dark&quot;</span></span>
<span id="cb195-10"><a href="custom-templates-testing.html#cb195-10"></a>)</span>
<span id="cb195-11"><a href="custom-templates-testing.html#cb195-11"></a></span>
<span id="cb195-12"><a href="custom-templates-testing.html#cb195-12"></a>validate_status &lt;-<span class="st"> </span><span class="cf">function</span>(status) {</span>
<span id="cb195-13"><a href="custom-templates-testing.html#cb195-13"></a></span>
<span id="cb195-14"><a href="custom-templates-testing.html#cb195-14"></a>  <span class="cf">if</span> (<span class="kw">is.null</span>(status)) {</span>
<span id="cb195-15"><a href="custom-templates-testing.html#cb195-15"></a>    <span class="kw">return</span>(<span class="ot">TRUE</span>) </span>
<span id="cb195-16"><a href="custom-templates-testing.html#cb195-16"></a>  } <span class="cf">else</span> {</span>
<span id="cb195-17"><a href="custom-templates-testing.html#cb195-17"></a>    <span class="cf">if</span> (status <span class="op">%in%</span><span class="st"> </span>valid_statuses) {</span>
<span id="cb195-18"><a href="custom-templates-testing.html#cb195-18"></a>      <span class="kw">return</span>(<span class="ot">TRUE</span>)</span>
<span id="cb195-19"><a href="custom-templates-testing.html#cb195-19"></a>    }</span>
<span id="cb195-20"><a href="custom-templates-testing.html#cb195-20"></a>  }</span>
<span id="cb195-21"><a href="custom-templates-testing.html#cb195-21"></a></span>
<span id="cb195-22"><a href="custom-templates-testing.html#cb195-22"></a>  <span class="kw">stop</span>(<span class="st">&quot;Invalid status: &quot;</span>, status, <span class="st">&quot;. Valid statuses are: &quot;</span>,</span>
<span id="cb195-23"><a href="custom-templates-testing.html#cb195-23"></a>       <span class="kw">paste</span>(valid_statuses, <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>), <span class="st">&quot;.&quot;</span>)</span>
<span id="cb195-24"><a href="custom-templates-testing.html#cb195-24"></a>}</span></code></pre></div>
<p>We finish by the padding validation. According to the Tabler documentation, there are three possible choices, namely <code>sm</code>, <code>md</code> or <code>lg</code>.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="custom-templates-testing.html#cb196-1"></a>valid_paddings &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;sm&quot;</span>, <span class="st">&quot;md&quot;</span>, <span class="st">&quot;lg&quot;</span>)</span>
<span id="cb196-2"><a href="custom-templates-testing.html#cb196-2"></a></span>
<span id="cb196-3"><a href="custom-templates-testing.html#cb196-3"></a>validate_padding &lt;-<span class="st"> </span><span class="cf">function</span>(padding) {</span>
<span id="cb196-4"><a href="custom-templates-testing.html#cb196-4"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(padding)) {</span>
<span id="cb196-5"><a href="custom-templates-testing.html#cb196-5"></a>    <span class="cf">if</span> (<span class="op">!</span>(padding <span class="op">%in%</span><span class="st"> </span>valid_paddings)) {</span>
<span id="cb196-6"><a href="custom-templates-testing.html#cb196-6"></a>      <span class="kw">stop</span>(<span class="st">&quot;Invalid status: &quot;</span>, padding, <span class="st">&quot;. Valid choices are: &quot;</span>,</span>
<span id="cb196-7"><a href="custom-templates-testing.html#cb196-7"></a>       <span class="kw">paste</span>(valid_paddings, <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>), <span class="st">&quot;.&quot;</span>)</span>
<span id="cb196-8"><a href="custom-templates-testing.html#cb196-8"></a>    }</span>
<span id="cb196-9"><a href="custom-templates-testing.html#cb196-9"></a>  }</span>
<span id="cb196-10"><a href="custom-templates-testing.html#cb196-10"></a>}</span></code></pre></div>
<p>We apply all these validation to our card element.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="custom-templates-testing.html#cb197-1"></a>tabler_card &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">status =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">stacked =</span> <span class="ot">FALSE</span>, <span class="dt">padding =</span> <span class="ot">NULL</span>) {</span>
<span id="cb197-2"><a href="custom-templates-testing.html#cb197-2"></a>  </span>
<span id="cb197-3"><a href="custom-templates-testing.html#cb197-3"></a>  <span class="kw">validate_status</span>(status)</span>
<span id="cb197-4"><a href="custom-templates-testing.html#cb197-4"></a>  <span class="kw">validate_width</span>(width)</span>
<span id="cb197-5"><a href="custom-templates-testing.html#cb197-5"></a>  <span class="kw">validate_padding</span>(padding)</span>
<span id="cb197-6"><a href="custom-templates-testing.html#cb197-6"></a>  </span>
<span id="cb197-7"><a href="custom-templates-testing.html#cb197-7"></a>  card_cl &lt;-<span class="st"> </span><span class="kw">paste0</span>(</span>
<span id="cb197-8"><a href="custom-templates-testing.html#cb197-8"></a>    <span class="st">&quot;card&quot;</span>, </span>
<span id="cb197-9"><a href="custom-templates-testing.html#cb197-9"></a>    <span class="cf">if</span> (stacked) <span class="st">&quot; card-stacked&quot;</span>,</span>
<span id="cb197-10"><a href="custom-templates-testing.html#cb197-10"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(padding)) <span class="kw">paste0</span>(<span class="st">&quot; card-&quot;</span>, padding)</span>
<span id="cb197-11"><a href="custom-templates-testing.html#cb197-11"></a>  )</span>
<span id="cb197-12"><a href="custom-templates-testing.html#cb197-12"></a>  </span>
<span id="cb197-13"><a href="custom-templates-testing.html#cb197-13"></a>  <span class="kw">div</span>(</span>
<span id="cb197-14"><a href="custom-templates-testing.html#cb197-14"></a>    <span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;col-md-&quot;</span>, width),</span>
<span id="cb197-15"><a href="custom-templates-testing.html#cb197-15"></a>    <span class="kw">div</span>(</span>
<span id="cb197-16"><a href="custom-templates-testing.html#cb197-16"></a>      <span class="dt">class =</span> card_cl,</span>
<span id="cb197-17"><a href="custom-templates-testing.html#cb197-17"></a>      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(status)) {</span>
<span id="cb197-18"><a href="custom-templates-testing.html#cb197-18"></a>        <span class="kw">div</span>(<span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;card-status-top bg-&quot;</span>, status))</span>
<span id="cb197-19"><a href="custom-templates-testing.html#cb197-19"></a>      },</span>
<span id="cb197-20"><a href="custom-templates-testing.html#cb197-20"></a>      <span class="kw">div</span>(</span>
<span id="cb197-21"><a href="custom-templates-testing.html#cb197-21"></a>        <span class="dt">class =</span> <span class="st">&quot;card-body&quot;</span>,</span>
<span id="cb197-22"><a href="custom-templates-testing.html#cb197-22"></a>        <span class="co"># we could have a smaller title like h4 or h5...</span></span>
<span id="cb197-23"><a href="custom-templates-testing.html#cb197-23"></a>        <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(title)) {</span>
<span id="cb197-24"><a href="custom-templates-testing.html#cb197-24"></a>          <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, title)</span>
<span id="cb197-25"><a href="custom-templates-testing.html#cb197-25"></a>        },</span>
<span id="cb197-26"><a href="custom-templates-testing.html#cb197-26"></a>        ...</span>
<span id="cb197-27"><a href="custom-templates-testing.html#cb197-27"></a>      )</span>
<span id="cb197-28"><a href="custom-templates-testing.html#cb197-28"></a>    )</span>
<span id="cb197-29"><a href="custom-templates-testing.html#cb197-29"></a>  )</span>
<span id="cb197-30"><a href="custom-templates-testing.html#cb197-30"></a>  </span>
<span id="cb197-31"><a href="custom-templates-testing.html#cb197-31"></a>}</span></code></pre></div>
<p>As of R 4.0.0, the <code>stopifnot</code> function may be a good alternative to <code>stop</code>.</p>
<p>We recommend to be reasonable and not to validate every single parameter.</p>
</div>
<div id="existing-utils-functions" class="section level3">
<h3><span class="header-section-number">14.1.2</span> Existing utils functions</h3>
<div id="validating-tags" class="section level4">
<h4><span class="header-section-number">14.1.2.1</span> Validating tags</h4>
<p>The problem with the above approach is that it may take time to create all validation functions. Fortunately, packages like {shinydashboard} include really powerful validation functions, especially <code>tagAssert</code>. This function has been included in the book side package so that you may use it at any time.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="custom-templates-testing.html#cb198-1"></a>myTag &lt;-<span class="st"> </span><span class="kw">div</span>(<span class="dt">class =</span> <span class="st">&quot;bg-blue&quot;</span>)</span>
<span id="cb198-2"><a href="custom-templates-testing.html#cb198-2"></a></span>
<span id="cb198-3"><a href="custom-templates-testing.html#cb198-3"></a><span class="kw">tagAssert</span>(myTag, <span class="dt">type =</span> <span class="st">&quot;div&quot;</span>)</span>
<span id="cb198-4"><a href="custom-templates-testing.html#cb198-4"></a><span class="kw">tagAssert</span>(myTag, <span class="dt">type =</span> <span class="st">&quot;li&quot;</span>) <span class="co"># will fail</span></span>
<span id="cb198-5"><a href="custom-templates-testing.html#cb198-5"></a><span class="kw">tagAssert</span>(myTag, <span class="dt">class =</span> <span class="st">&quot;bg-blue&quot;</span>)</span></code></pre></div>
<p>Importantly, <code>tagAssert</code> will raise an error if the condition is not fulfilled. Another function, <code>tagMatches</code> simply returns TRUE/FALSE. It looks for <code>ìd</code>, <code>class</code>, <code>name</code> and any other tag attribute like <code>data-value</code>. Like <code>tagAssert</code>, <code>tagMatches</code> is also available in the book side package.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="custom-templates-testing.html#cb199-1"></a><span class="kw">tagMatches</span>(myTag, <span class="dt">id =</span> <span class="st">&quot;d&quot;</span>)</span>
<span id="cb199-2"><a href="custom-templates-testing.html#cb199-2"></a><span class="kw">tagMatches</span>(myTag, <span class="dt">class =</span> <span class="st">&quot;bg-blue&quot;</span>)</span></code></pre></div>
</div>
<div id="validating-css-units" class="section level4">
<h4><span class="header-section-number">14.1.2.2</span> Validating CSS units</h4>
<p>The <code>validateCssUnit</code> belongs to the Shiny exported function. It is useful to validate any parameter involving a CSS unit like <code>width</code> and <code>height</code>.</p>
<p>There is no point to reuse what already exists and these tools will help you to be efficient for validating your template elements.</p>
</div>
</div>
<div id="example-refine-navbar-menu-items" class="section level3">
<h3><span class="header-section-number">14.1.3</span> Example: refine navbar menu items</h3>
<div id="avoid-wrong-jquery-selectors" class="section level4">
<h4><span class="header-section-number">14.1.3.1</span> Avoid wrong jQuery selectors</h4>
<p>In Chapter <a href="custom-templates-skeleton.html#custom-templates-skeleton">13</a>, we developed the <code>tabler_navbar_menu_item</code> function. The tabName parameter is critical since it is responsible for driving the navigation. We must ensure that the value provided by the user is compatible with jQuery selectors <a href="https://api.jquery.com/category/selectors/">conventions</a>. To illustrate the problem, we consider the example below, where the second tab name is <code>hello%%&amp;1</code>:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="custom-templates-testing.html#cb200-1"></a>ui &lt;-<span class="st"> </span><span class="kw">tabler_page</span>(</span>
<span id="cb200-2"><a href="custom-templates-testing.html#cb200-2"></a>  <span class="kw">tabler_navbar</span>(</span>
<span id="cb200-3"><a href="custom-templates-testing.html#cb200-3"></a>    <span class="dt">brand_url =</span> <span class="st">&quot;https://preview-dev.tabler.io&quot;</span>, </span>
<span id="cb200-4"><a href="custom-templates-testing.html#cb200-4"></a>    <span class="dt">brand_image =</span> <span class="st">&quot;https://preview-dev.tabler.io/static/logo.svg&quot;</span>, </span>
<span id="cb200-5"><a href="custom-templates-testing.html#cb200-5"></a>    <span class="dt">nav_menu =</span> <span class="kw">tabler_navbar_menu</span>(</span>
<span id="cb200-6"><a href="custom-templates-testing.html#cb200-6"></a>      <span class="dt">inputId =</span> <span class="st">&quot;mymenu&quot;</span>,</span>
<span id="cb200-7"><a href="custom-templates-testing.html#cb200-7"></a>      <span class="kw">tabler_navbar_menu_item</span>(</span>
<span id="cb200-8"><a href="custom-templates-testing.html#cb200-8"></a>        <span class="dt">text =</span> <span class="st">&quot;Tab 1&quot;</span>,</span>
<span id="cb200-9"><a href="custom-templates-testing.html#cb200-9"></a>        <span class="dt">icon =</span> <span class="ot">NULL</span>,</span>
<span id="cb200-10"><a href="custom-templates-testing.html#cb200-10"></a>        <span class="dt">tabName =</span> <span class="st">&quot;tab1&quot;</span>,</span>
<span id="cb200-11"><a href="custom-templates-testing.html#cb200-11"></a>        <span class="dt">selected =</span> <span class="ot">TRUE</span></span>
<span id="cb200-12"><a href="custom-templates-testing.html#cb200-12"></a>      ),</span>
<span id="cb200-13"><a href="custom-templates-testing.html#cb200-13"></a>      <span class="kw">tabler_navbar_menu_item</span>(</span>
<span id="cb200-14"><a href="custom-templates-testing.html#cb200-14"></a>        <span class="dt">text =</span> <span class="st">&quot;Tab 2&quot;</span>,</span>
<span id="cb200-15"><a href="custom-templates-testing.html#cb200-15"></a>        <span class="dt">icon =</span> <span class="ot">NULL</span>,</span>
<span id="cb200-16"><a href="custom-templates-testing.html#cb200-16"></a>        <span class="dt">tabName =</span> <span class="st">&quot;hello%%&amp;1&quot;</span></span>
<span id="cb200-17"><a href="custom-templates-testing.html#cb200-17"></a>      )</span>
<span id="cb200-18"><a href="custom-templates-testing.html#cb200-18"></a>    )</span>
<span id="cb200-19"><a href="custom-templates-testing.html#cb200-19"></a>  ),</span>
<span id="cb200-20"><a href="custom-templates-testing.html#cb200-20"></a>  <span class="kw">tabler_body</span>(</span>
<span id="cb200-21"><a href="custom-templates-testing.html#cb200-21"></a>    <span class="kw">tabler_tab_items</span>(</span>
<span id="cb200-22"><a href="custom-templates-testing.html#cb200-22"></a>      <span class="kw">tabler_tab_item</span>(</span>
<span id="cb200-23"><a href="custom-templates-testing.html#cb200-23"></a>        <span class="dt">tabName =</span> <span class="st">&quot;tab1&quot;</span>,</span>
<span id="cb200-24"><a href="custom-templates-testing.html#cb200-24"></a>        <span class="kw">sliderInput</span>(</span>
<span id="cb200-25"><a href="custom-templates-testing.html#cb200-25"></a>          <span class="st">&quot;obs&quot;</span>, </span>
<span id="cb200-26"><a href="custom-templates-testing.html#cb200-26"></a>          <span class="st">&quot;Number of observations:&quot;</span>,</span>
<span id="cb200-27"><a href="custom-templates-testing.html#cb200-27"></a>          <span class="dt">min =</span> <span class="dv">0</span>,</span>
<span id="cb200-28"><a href="custom-templates-testing.html#cb200-28"></a>          <span class="dt">max =</span> <span class="dv">1000</span>, </span>
<span id="cb200-29"><a href="custom-templates-testing.html#cb200-29"></a>          <span class="dt">value =</span> <span class="dv">500</span></span>
<span id="cb200-30"><a href="custom-templates-testing.html#cb200-30"></a>        ),</span>
<span id="cb200-31"><a href="custom-templates-testing.html#cb200-31"></a>        <span class="kw">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>)</span>
<span id="cb200-32"><a href="custom-templates-testing.html#cb200-32"></a>      ),</span>
<span id="cb200-33"><a href="custom-templates-testing.html#cb200-33"></a>      <span class="kw">tabler_tab_item</span>(</span>
<span id="cb200-34"><a href="custom-templates-testing.html#cb200-34"></a>        <span class="dt">tabName =</span> <span class="st">&quot;hello%%&amp;1&quot;</span>,</span>
<span id="cb200-35"><a href="custom-templates-testing.html#cb200-35"></a>        <span class="kw">p</span>(<span class="st">&quot;Second Tab&quot;</span>)</span>
<span id="cb200-36"><a href="custom-templates-testing.html#cb200-36"></a>      )</span>
<span id="cb200-37"><a href="custom-templates-testing.html#cb200-37"></a>    ),</span>
<span id="cb200-38"><a href="custom-templates-testing.html#cb200-38"></a>    <span class="dt">footer =</span> <span class="kw">tabler_footer</span>(</span>
<span id="cb200-39"><a href="custom-templates-testing.html#cb200-39"></a>      <span class="dt">left =</span> <span class="st">&quot;Rstats, 2020&quot;</span>, </span>
<span id="cb200-40"><a href="custom-templates-testing.html#cb200-40"></a>      <span class="dt">right =</span> <span class="kw">a</span>(<span class="dt">href =</span> <span class="st">&quot;https://www.google.com&quot;</span>, <span class="st">&quot;More&quot;</span>)</span>
<span id="cb200-41"><a href="custom-templates-testing.html#cb200-41"></a>    )</span>
<span id="cb200-42"><a href="custom-templates-testing.html#cb200-42"></a>  )</span>
<span id="cb200-43"><a href="custom-templates-testing.html#cb200-43"></a>)</span>
<span id="cb200-44"><a href="custom-templates-testing.html#cb200-44"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</span>
<span id="cb200-45"><a href="custom-templates-testing.html#cb200-45"></a>  output<span class="op">$</span>distPlot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</span>
<span id="cb200-46"><a href="custom-templates-testing.html#cb200-46"></a>    <span class="kw">hist</span>(<span class="kw">rnorm</span>(input<span class="op">$</span>obs))</span>
<span id="cb200-47"><a href="custom-templates-testing.html#cb200-47"></a>  })</span>
<span id="cb200-48"><a href="custom-templates-testing.html#cb200-48"></a>}</span>
<span id="cb200-49"><a href="custom-templates-testing.html#cb200-49"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
<p>Notice that we cannot see the second tab content. Below is a proposal for the <code>validate_tab</code> function. We first detect any punctuation in the provided input. Although not mandatory, we extract it to send a meaningful error message.
We finally raise an error if any punctuation is found.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="custom-templates-testing.html#cb201-1"></a>validate_tabName &lt;-<span class="st"> </span><span class="cf">function</span>(tabName) {</span>
<span id="cb201-2"><a href="custom-templates-testing.html#cb201-2"></a>  temp &lt;-<span class="st"> </span><span class="kw">grepl</span>(<span class="st">&quot;[[:punct:]]&quot;</span>, tabName)</span>
<span id="cb201-3"><a href="custom-templates-testing.html#cb201-3"></a>  wrong_selector &lt;-<span class="st"> </span>stringr<span class="op">::</span><span class="kw">str_extract_all</span>(tabName, <span class="st">&quot;[[:punct:]]&quot;</span>)[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb201-4"><a href="custom-templates-testing.html#cb201-4"></a><span class="st">    </span>stringr<span class="op">::</span><span class="kw">str_c</span>(<span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb201-5"><a href="custom-templates-testing.html#cb201-5"></a>  <span class="cf">if</span> (temp) <span class="kw">stop</span>(<span class="kw">paste</span>(<span class="st">&quot;Please do not use punctuation characters like&quot;</span>,  wrong_selector,<span class="st">&quot;in tabNames. This might cause JavaScript issues.&quot;</span>))</span>
<span id="cb201-6"><a href="custom-templates-testing.html#cb201-6"></a>}</span>
<span id="cb201-7"><a href="custom-templates-testing.html#cb201-7"></a><span class="co"># validate_tabName(&quot;test%&quot;) # fails</span></span>
<span id="cb201-8"><a href="custom-templates-testing.html#cb201-8"></a><span class="kw">validate_tabName</span>(<span class="st">&quot;plop&quot;</span>)</span></code></pre></div>
<p><code>validate_tabName</code> must be then inserted at the beginning of <code>tabler_navbar_menu_item</code> as well as in <code>tabler_tab_item</code>, the latter also relying on tabName.</p>
</div>
<div id="checking-for-multiple-selected-items" class="section level4">
<h4><span class="header-section-number">14.1.3.2</span> Checking for multiple selected items</h4>
<p>Another issue is the possibility to have multiple selected tab items at start. Looking back at <code>tabler_navbar_menu</code>, this is not surprising since there are absolutely no checks!</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="custom-templates-testing.html#cb202-1"></a>tabler_navbar_menu &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</span>
<span id="cb202-2"><a href="custom-templates-testing.html#cb202-2"></a>  tags<span class="op">$</span><span class="kw">ul</span>(<span class="dt">class =</span> <span class="st">&quot;nav nav-pills navbar-nav&quot;</span>, ...)</span>
<span id="cb202-3"><a href="custom-templates-testing.html#cb202-3"></a>}</span></code></pre></div>
<p>A classic method to inspect items provided to <code>tabler_navbar_menu</code> is to capture them in a list. We extract the children of those items <code>lapply(list(...) , "[", 3)</code> (A shiny tag is a structure where the first position holds the tag name, the second is a named list of attributes and the third slot is for children). For each children we apply the shinydashboard internal function <code>findAttribute</code>, that allows to search for a specific attribute value in a given tag. We use the <code>vapply</code> to return an atomic vector (like <code>c(1, 2</code>), lists are vectors but recursive!) and compute the sum of the vector. Each TRUE occurrence is counted as 1 and FALSE 0. Therefore, if the latter is higher than 1, it means that the user provided more than 1 selected tab, which should subsequently raise an error.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="custom-templates-testing.html#cb203-1"></a>tabler_navbar_menu &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</span>
<span id="cb203-2"><a href="custom-templates-testing.html#cb203-2"></a>  </span>
<span id="cb203-3"><a href="custom-templates-testing.html#cb203-3"></a>  items &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">list</span>(...) , <span class="st">`</span><span class="dt">[</span><span class="st">`</span>, <span class="dv">3</span>)</span>
<span id="cb203-4"><a href="custom-templates-testing.html#cb203-4"></a>  res &lt;-<span class="st"> </span><span class="kw">sum</span>(<span class="kw">vapply</span>(items, findAttribute, <span class="st">&quot;class&quot;</span>, <span class="st">&quot;nav-link active&quot;</span>, <span class="dt">FUN.VALUE =</span> <span class="kw">logical</span>(<span class="dv">1</span>)))</span>
<span id="cb203-5"><a href="custom-templates-testing.html#cb203-5"></a>  <span class="cf">if</span> (res <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) <span class="kw">stop</span>(<span class="st">&quot;Cannot have multiple selected items at start!&quot;</span>)</span>
<span id="cb203-6"><a href="custom-templates-testing.html#cb203-6"></a>  </span>
<span id="cb203-7"><a href="custom-templates-testing.html#cb203-7"></a>  tags<span class="op">$</span><span class="kw">ul</span>(<span class="dt">class =</span> <span class="st">&quot;nav nav-pills navbar-nav&quot;</span>, ...)</span>
<span id="cb203-8"><a href="custom-templates-testing.html#cb203-8"></a>}</span>
<span id="cb203-9"><a href="custom-templates-testing.html#cb203-9"></a></span>
<span id="cb203-10"><a href="custom-templates-testing.html#cb203-10"></a><span class="co"># the code below must fail</span></span>
<span id="cb203-11"><a href="custom-templates-testing.html#cb203-11"></a>menu &lt;-<span class="st"> </span><span class="kw">tabler_navbar_menu</span>(</span>
<span id="cb203-12"><a href="custom-templates-testing.html#cb203-12"></a>  <span class="kw">tabler_navbar_menu_item</span>(</span>
<span id="cb203-13"><a href="custom-templates-testing.html#cb203-13"></a>    <span class="dt">text =</span> <span class="st">&quot;Tab 1&quot;</span>,</span>
<span id="cb203-14"><a href="custom-templates-testing.html#cb203-14"></a>    <span class="dt">icon =</span> <span class="ot">NULL</span>,</span>
<span id="cb203-15"><a href="custom-templates-testing.html#cb203-15"></a>    <span class="dt">tabName =</span> <span class="st">&quot;tab1&quot;</span>,</span>
<span id="cb203-16"><a href="custom-templates-testing.html#cb203-16"></a>    <span class="dt">selected =</span> <span class="ot">TRUE</span></span>
<span id="cb203-17"><a href="custom-templates-testing.html#cb203-17"></a>  ),</span>
<span id="cb203-18"><a href="custom-templates-testing.html#cb203-18"></a>  <span class="kw">tabler_navbar_menu_item</span>(</span>
<span id="cb203-19"><a href="custom-templates-testing.html#cb203-19"></a>    <span class="dt">text =</span> <span class="st">&quot;Tab 2&quot;</span>,</span>
<span id="cb203-20"><a href="custom-templates-testing.html#cb203-20"></a>    <span class="dt">icon =</span> <span class="ot">NULL</span>,</span>
<span id="cb203-21"><a href="custom-templates-testing.html#cb203-21"></a>    <span class="dt">tabName =</span> <span class="st">&quot;tab2&quot;</span>,</span>
<span id="cb203-22"><a href="custom-templates-testing.html#cb203-22"></a>    <span class="dt">selected =</span> <span class="ot">TRUE</span></span>
<span id="cb203-23"><a href="custom-templates-testing.html#cb203-23"></a>  )</span>
<span id="cb203-24"><a href="custom-templates-testing.html#cb203-24"></a>)</span></code></pre></div>
</div>
</div>
</div>
<div id="testing-templates-elements" class="section level2">
<h2><span class="header-section-number">14.2</span> Testing templates elements</h2>
<p>Imagine if one day, someone or yourself accidentally remove the width validation function, after a significant refactoring. Later, you receive a new message from github, stating that someone opened a new issue. According to the report, the card is not properly displayed although no error is thrown. Among the 400 lines of code provided, you hardly notice that the width parameter is set to 13, which is not in line with the Bootstrap 4 documentation, as it should remain between 1 and 12. You lost 10 minutes, so is your end user, which is even worse.</p>
<p>With a proper testing pipeline, this problem could have been avoided. Ironically, writing the corresponding test takes only 2 minutes.</p>
<p>A reference for testing functions is the <a href="https://testthat.r-lib.org/index.html">{testthat}</a> package. In short, a unit test consists in setting expectations about our function and check whether they fail or pass. For instance, with our <code>tabler_card</code> example, the <code>validate_width</code> must fail if the given width is not in the expected bounds or not numeric. We apply the <code>test_that</code> function with a description of the test context, followed by the expectations inside the curly brackets.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="custom-templates-testing.html#cb204-1"></a><span class="kw">test_that</span>(<span class="st">&quot;validate width works&quot;</span>, {</span>
<span id="cb204-2"><a href="custom-templates-testing.html#cb204-2"></a>  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="dv">-1</span>))</span>
<span id="cb204-3"><a href="custom-templates-testing.html#cb204-3"></a>  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="dv">13</span>))</span>
<span id="cb204-4"><a href="custom-templates-testing.html#cb204-4"></a>  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="st">&quot;hello world&quot;</span>))</span>
<span id="cb204-5"><a href="custom-templates-testing.html#cb204-5"></a>})</span></code></pre></div>
<p>We then test <code>validate_status</code> and <code>validate_padding</code>.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="custom-templates-testing.html#cb205-1"></a><span class="kw">test_that</span>(<span class="st">&quot;validate status works&quot;</span>, {</span>
<span id="cb205-2"><a href="custom-templates-testing.html#cb205-2"></a>  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">status =</span> <span class="st">&quot;toto&quot;</span>))</span>
<span id="cb205-3"><a href="custom-templates-testing.html#cb205-3"></a>})</span>
<span id="cb205-4"><a href="custom-templates-testing.html#cb205-4"></a></span>
<span id="cb205-5"><a href="custom-templates-testing.html#cb205-5"></a><span class="kw">test_that</span>(<span class="st">&quot;validate padding works&quot;</span>, {</span>
<span id="cb205-6"><a href="custom-templates-testing.html#cb205-6"></a>  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="st">&quot;xs&quot;</span>))</span>
<span id="cb205-7"><a href="custom-templates-testing.html#cb205-7"></a>})</span></code></pre></div>
<p>So far so good. In few lines of code, we substantially increased the robustness of our function without increasing its complexity. Now, let’s try to remove the <code>validate_width</code> step from the <code>tabler_card</code>.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="custom-templates-testing.html#cb206-1"></a>tabler_card &lt;-<span class="st"> </span><span class="cf">function</span>(..., <span class="dt">title =</span> <span class="ot">NULL</span>, <span class="dt">status =</span> <span class="ot">NULL</span>, <span class="dt">width =</span> <span class="dv">6</span>, <span class="dt">stacked =</span> <span class="ot">FALSE</span>, <span class="dt">padding =</span> <span class="ot">NULL</span>) {</span>
<span id="cb206-2"><a href="custom-templates-testing.html#cb206-2"></a>  </span>
<span id="cb206-3"><a href="custom-templates-testing.html#cb206-3"></a>  <span class="kw">validate_status</span>(status)</span>
<span id="cb206-4"><a href="custom-templates-testing.html#cb206-4"></a>  <span class="kw">validate_padding</span>(padding)</span>
<span id="cb206-5"><a href="custom-templates-testing.html#cb206-5"></a>  </span>
<span id="cb206-6"><a href="custom-templates-testing.html#cb206-6"></a>  card_cl &lt;-<span class="st"> </span><span class="kw">paste0</span>(</span>
<span id="cb206-7"><a href="custom-templates-testing.html#cb206-7"></a>    <span class="st">&quot;card&quot;</span>, </span>
<span id="cb206-8"><a href="custom-templates-testing.html#cb206-8"></a>    <span class="cf">if</span> (stacked) <span class="st">&quot; card-stacked&quot;</span>,</span>
<span id="cb206-9"><a href="custom-templates-testing.html#cb206-9"></a>    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(padding)) <span class="kw">paste0</span>(<span class="st">&quot; card-&quot;</span>, padding)</span>
<span id="cb206-10"><a href="custom-templates-testing.html#cb206-10"></a>  )</span>
<span id="cb206-11"><a href="custom-templates-testing.html#cb206-11"></a>  </span>
<span id="cb206-12"><a href="custom-templates-testing.html#cb206-12"></a>  <span class="kw">div</span>(</span>
<span id="cb206-13"><a href="custom-templates-testing.html#cb206-13"></a>    <span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;col-md-&quot;</span>, width),</span>
<span id="cb206-14"><a href="custom-templates-testing.html#cb206-14"></a>    <span class="kw">div</span>(</span>
<span id="cb206-15"><a href="custom-templates-testing.html#cb206-15"></a>      <span class="dt">class =</span> card_cl,</span>
<span id="cb206-16"><a href="custom-templates-testing.html#cb206-16"></a>      <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(status)) {</span>
<span id="cb206-17"><a href="custom-templates-testing.html#cb206-17"></a>        <span class="kw">div</span>(<span class="dt">class =</span> <span class="kw">paste0</span>(<span class="st">&quot;card-status-top bg-&quot;</span>, status))</span>
<span id="cb206-18"><a href="custom-templates-testing.html#cb206-18"></a>      },</span>
<span id="cb206-19"><a href="custom-templates-testing.html#cb206-19"></a>      <span class="kw">div</span>(</span>
<span id="cb206-20"><a href="custom-templates-testing.html#cb206-20"></a>        <span class="dt">class =</span> <span class="st">&quot;card-body&quot;</span>,</span>
<span id="cb206-21"><a href="custom-templates-testing.html#cb206-21"></a>        <span class="co"># we could have a smaller title like h4 or h5...</span></span>
<span id="cb206-22"><a href="custom-templates-testing.html#cb206-22"></a>        <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(title)) {</span>
<span id="cb206-23"><a href="custom-templates-testing.html#cb206-23"></a>          <span class="kw">h3</span>(<span class="dt">class =</span> <span class="st">&quot;card-title&quot;</span>, title)</span>
<span id="cb206-24"><a href="custom-templates-testing.html#cb206-24"></a>        },</span>
<span id="cb206-25"><a href="custom-templates-testing.html#cb206-25"></a>        ...</span>
<span id="cb206-26"><a href="custom-templates-testing.html#cb206-26"></a>      )</span>
<span id="cb206-27"><a href="custom-templates-testing.html#cb206-27"></a>    )</span>
<span id="cb206-28"><a href="custom-templates-testing.html#cb206-28"></a>  )</span>
<span id="cb206-29"><a href="custom-templates-testing.html#cb206-29"></a>  </span>
<span id="cb206-30"><a href="custom-templates-testing.html#cb206-30"></a>}</span>
<span id="cb206-31"><a href="custom-templates-testing.html#cb206-31"></a></span>
<span id="cb206-32"><a href="custom-templates-testing.html#cb206-32"></a></span>
<span id="cb206-33"><a href="custom-templates-testing.html#cb206-33"></a><span class="kw">test_that</span>(<span class="st">&quot;validate width works&quot;</span>, {</span>
<span id="cb206-34"><a href="custom-templates-testing.html#cb206-34"></a>  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="dv">-1</span>))</span>
<span id="cb206-35"><a href="custom-templates-testing.html#cb206-35"></a>  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="dv">13</span>))</span>
<span id="cb206-36"><a href="custom-templates-testing.html#cb206-36"></a>  <span class="kw">expect_error</span>(<span class="kw">tabler_card</span>(<span class="dt">width =</span> <span class="st">&quot;hello world&quot;</span>))</span>
<span id="cb206-37"><a href="custom-templates-testing.html#cb206-37"></a>})</span></code></pre></div>
<p>Notice how the 3 above tests elegantly fail. The provided context (“validate width works”) immediately indicates the culprit, which is a game changer for debugging.</p>
<div id="testing-template-behavior" class="section level3">
<h3><span class="header-section-number">14.2.1</span> Testing template behavior</h3>
<p>DO DO (with crrry)</p>
</div>
</div>
<div id="testing-javascript" class="section level2">
<h2><span class="header-section-number">14.3</span> Testing JavaScript</h2>
<p>We could not finish this chapter without mentionning tools to validate JavaScript code. We will particularly focus on <a href="https://jshint.com">JSHint</a>, which has a R <a href="https://github.com/dreamRs/jstools">wrapper</a>, nicely provided by the dreamRs team. Below is an example of how to check all the <a href="https://github.com/RinteRface/shinyMobile">shinyMobile</a> JavaScript input bindings at once:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="custom-templates-testing.html#cb207-1"></a>bindings &lt;-<span class="st"> </span><span class="kw">list.files</span>(</span>
<span id="cb207-2"><a href="custom-templates-testing.html#cb207-2"></a>  <span class="dt">path =</span> <span class="kw">system.file</span>(<span class="st">&quot;framework7-5.5.0/input-bindings&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;shinyMobile&quot;</span>),</span>
<span id="cb207-3"><a href="custom-templates-testing.html#cb207-3"></a>  <span class="dt">recursive =</span> <span class="ot">TRUE</span>,</span>
<span id="cb207-4"><a href="custom-templates-testing.html#cb207-4"></a>  <span class="dt">full.names =</span> <span class="ot">TRUE</span></span>
<span id="cb207-5"><a href="custom-templates-testing.html#cb207-5"></a>)</span>
<span id="cb207-6"><a href="custom-templates-testing.html#cb207-6"></a><span class="kw">jshint_file</span>(<span class="dt">input =</span> bindings, <span class="dt">options =</span> <span class="kw">jshint_options</span>(<span class="dt">jquery =</span> <span class="ot">TRUE</span>, <span class="dt">globals =</span> <span class="kw">list</span>(<span class="st">&quot;Shiny&quot;</span>, <span class="st">&quot;app&quot;</span>)))</span></code></pre></div>
<pre><code>## ── Checking actionSheetInputBinding.js ───────────────────────────────────────── 
## No errors found. 
## ── Checking autoCompleteInputBinding.js ──────────────────────────────────────── 
## No errors found. 
## ── Checking buttonInputBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking cardInputBinding.js ──────────────────────────────────────────────── 
## No errors found. 
## ── Checking collapsibleInputBinding.js ───────────────────────────────────────── 
## No errors found. 
## ── Checking colorPickerInputBinding.js ───────────────────────────────────────── 
## 9 errors found. 
##  - Line 11: &#39;colorPickerModules&#39; is not defined. 
##  - Line 16: &#39;colorPickerSliderValue&#39; is not defined. 
##  - Line 17: &#39;colorPickerSliderValueEditable&#39; is not defined. 
##  - Line 18: &#39;colorPickerSliderLabel&#39; is not defined. 
##  - Line 19: &#39;colorPickerHexLabel&#39; is not defined. 
##  - Line 20: &#39;colorPickerHexValueEditable&#39; is not defined. 
##  - Line 21: &#39;colorPickerGroupedModules&#39; is not defined. 
##  - Line 24: &#39;colorPickerPalettes&#39; is not defined. 
##  - Line 29: &#39;colorPickerValue&#39; is not defined. 
## ── Checking dateInputBinding.js ──────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 11: &#39;console&#39; is not defined. 
## ── Checking datePickerInputBinding.js ────────────────────────────────────────── 
## No errors found. 
## ── Checking fabsInputBinding.js ──────────────────────────────────────────────── 
## No errors found. 
## ── Checking gaugeInputBinding.js ─────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 47: &#39;g&#39; is defined but never used. 
## ── Checking loginInputBinding.js ─────────────────────────────────────────────── 
## No errors found. 
## ── Checking messageBarInputBinding.js ────────────────────────────────────────── 
## No errors found. 
## ── Checking messagesInputBinding.js ──────────────────────────────────────────── 
## 2 errors found. 
##  - Line 70: &#39;responseInProgress&#39; is not defined. 
##  - Line 85: &#39;responseInProgress&#39; is not defined. 
## ── Checking panelInputBinding.js ─────────────────────────────────────────────── 
## No errors found. 
## ── Checking pickerInputBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking popupInputBinding.js ─────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 20: &#39;p&#39; is defined but never used. 
## ── Checking selectInputBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking sheetInputBinding.js ─────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 34: &#39;s&#39; is defined but never used. 
## ── Checking sliderInputBinding.js ────────────────────────────────────────────── 
## 1 errors found. 
##  - Line 35: &#39;r&#39; is defined but never used. 
## ── Checking smartSelectBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking stepperInputBinding.js ───────────────────────────────────────────── 
## 1 errors found. 
##  - Line 33: &#39;s&#39; is defined but never used. 
## ── Checking tabsInputBinding.js ──────────────────────────────────────────────── 
## No errors found. 
## ── Checking toggleInputBinding.js ────────────────────────────────────────────── 
## No errors found. 
## ── Checking virtualListBinding.js ────────────────────────────────────────────── 
## 3 errors found. 
##  - Line 21: &#39;for of&#39; is available in ES6 (use &#39;esversion: 6&#39;) or Mozilla JS extensions (use moz). 
##  - Line 107: &#39;template literal syntax&#39; is only available in ES6 (use &#39;esversion: 6&#39;). 
##  - Line 111: &#39;template literal syntax&#39; is only available in ES6 (use &#39;esversion: 6&#39;).</code></pre>
<p>You may fine tune the <code>jshint_file</code> behavior with the <a href="https://jshint.com/docs/options/"><code>jshint_options</code></a>. One is often tempted to call <code>eval</code> in JS code, which will result in a JSHint error. An option called <code>evil</code> exists to disable the corresponding test. However, we recommand to play the game, accept those error and try to fix them instead of cheating with options!</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="custom-templates-skeleton.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="custom-templates-inputs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/custom-templates-testing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["outstanding-shiny-ui.pdf", "outstanding-shiny-ui.epub", "outstanding-shiny-ui.mobi"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
