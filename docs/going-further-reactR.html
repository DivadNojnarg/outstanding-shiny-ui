<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 27 Shiny and React with {reactR} | Outstanding User Interfaces with Shiny</title>
<meta name="author" content="David Granjon">
<meta name="description" content="React is an open-source library designed to quickly develop user interfaces or UI components, on the front end. It has been developed by Facebook and the community (more than 1500 contributors)...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 27 Shiny and React with {reactR} | Outstanding User Interfaces with Shiny">
<meta property="og:type" content="book">
<meta property="og:image" content="https://raw.githubusercontent.com/DivadNojnarg/outstanding-shiny-ui/master/images/intro/crc-press-cover.svg">
<meta property="og:description" content="React is an open-source library designed to quickly develop user interfaces or UI components, on the front end. It has been developed by Facebook and the community (more than 1500 contributors)...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 27 Shiny and React with {reactR} | Outstanding User Interfaces with Shiny">
<meta name="twitter:description" content="React is an open-source library designed to quickly develop user interfaces or UI components, on the front end. It has been developed by Facebook and the community (more than 1500 contributors)...">
<meta name="twitter:image" content="https://raw.githubusercontent.com/DivadNojnarg/outstanding-shiny-ui/master/images/intro/crc-press-cover.svg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Outstanding User Interfaces with Shiny</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="foreword.html">Foreword</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="web-intro.html"><span class="header-section-number">1</span> Shiny and the Web</a></li>
<li><a class="" href="htmltools-overview.html"><span class="header-section-number">2</span> Manipulate HTML tags from R with {htmltools}</a></li>
<li><a class="" href="web-dependencies.html"><span class="header-section-number">3</span> Discover Shiny dependencies</a></li>
<li><a class="" href="htmltools-dependencies.html"><span class="header-section-number">4</span> Handle HTML dependencies with {htmltools}</a></li>
<li><a class="" href="web-applications.html"><span class="header-section-number">5</span> Web application concepts</a></li>
<li class="book-part">Beautify with CSS and Sass</li>
<li><a class="" href="beautify-css.html"><span class="header-section-number">6</span> CSS for Shiny</a></li>
<li><a class="" href="beautify-sass.html"><span class="header-section-number">7</span> Tidy your CSS with Sass</a></li>
<li><a class="" href="beautify-with-fresh.html"><span class="header-section-number">8</span> Beautify with {fresh}</a></li>
<li><a class="" href="beautify-with-bootstraplib.html"><span class="header-section-number">9</span> Become a theming wizard with {bslib}</a></li>
<li class="book-part">Unleash interactivity with JavaScript</li>
<li><a class="" href="survival-kit-javascript.html"><span class="header-section-number">10</span> JavaScript for Shiny</a></li>
<li><a class="" href="shiny-intro.html"><span class="header-section-number">11</span> Communicate between R and JS</a></li>
<li><a class="" href="shiny-input-system.html"><span class="header-section-number">12</span> Understand and develop new Shiny inputs</a></li>
<li><a class="" href="shiny-input-lifecycle.html"><span class="header-section-number">13</span> Shiny inputs lifecycles</a></li>
<li><a class="" href="shiny-input-gems.html"><span class="header-section-number">14</span> Mastering Shinyâ€™s events</a></li>
<li><a class="" href="shiny-custom-handler.html"><span class="header-section-number">15</span> Optimize your apps with custom handlers</a></li>
<li class="book-part">Practice: A Bootstrap 4 dashboard template</li>
<li><a class="" href="custom-templates-dependencies.html"><span class="header-section-number">16</span> Define dependencies</a></li>
<li><a class="" href="custom-templates-skeleton.html"><span class="header-section-number">17</span> Create template elements</a></li>
<li><a class="" href="custom-templates-inputs.html"><span class="header-section-number">18</span> Develop custom input widgets</a></li>
<li><a class="" href="custom-templates-interactivity.html"><span class="header-section-number">19</span> Adding more interactivity</a></li>
<li><a class="" href="custom-templates-testing.html"><span class="header-section-number">20</span> Testing and validating template elements</a></li>
<li class="book-part">Toward a better workflow</li>
<li><a class="" href="workflow-charpente.html"><span class="header-section-number">21</span> Automate new template creation with {charpente}</a></li>
<li class="book-part">Case study: Mobile development for Shiny</li>
<li><a class="" href="mobile-shiny-intro.html"><span class="header-section-number">22</span> Introduction</a></li>
<li><a class="" href="mobile-shinyMobile.html"><span class="header-section-number">23</span> Reconstruct {shinyMobile}</a></li>
<li><a class="" href="mobile-pwa.html"><span class="header-section-number">24</span> {shinyMobile} and PWA</a></li>
<li><a class="" href="mobile-widgets.html"><span class="header-section-number">25</span> Design widgets</a></li>
<li><a class="" href="mobile-going-further.html"><span class="header-section-number">26</span> Fine-tune {shinyMobile}</a></li>
<li class="book-part">Going further</li>
<li><a class="active" href="going-further-reactR.html"><span class="header-section-number">27</span> Shiny and React with {reactR}</a></li>
<li><a class="" href="going-further-webdev.html"><span class="header-section-number">28</span> Shiny and modern web development</a></li>
<li><a class="" href="going-further-where-to-go.html"><span class="header-section-number">29</span> What to do next?</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="code-outputs.html"><span class="header-section-number">A</span> Code outputs</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/DivadNojnarg/outstanding-shiny-ui">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="going-further-reactR" class="section level1" number="27">
<h1>
<span class="header-section-number">27</span> Shiny and React with {reactR}<a class="anchor" aria-label="anchor" href="#going-further-reactR"><i class="fas fa-link"></i></a>
</h1>
<p><a href="https://reactjs.org/">React</a> is an open-source library designed to quickly develop user interfaces or UI components, on the <strong>front end</strong>.
It has been developed by <a href="https://github.com/facebook/react">Facebook</a> and the community (more than 1500 contributors) and made public in May 2013. It is currently used worldwide and has around 163 k stars on the GitHub ranking and widely impacts the mobile market, through the <a href="https://reactnative.dev/">React Native</a> library. <strong>React</strong> is also really convenient to develop attractive documentations with <a href="https://v2.docusaurus.io/">docusaurus</a>.
If you ever have built user interfaces with pure JS, you might like React!</p>
<p>Below, we give a short introduction to the React ecosystem and see how we can benefit from it from the R Shiny side. By the end of this chapter, youâ€™ll be able to develop R interfaces to some nice React libraries like the Argon design <a href="https://demos.creative-tim.com/argon-design-system-react/?_ga=2.179634850.760978196.1612189904-282783983.1612189904#/">system</a>, shown Figure <a href="going-further-reactR.html#fig:argon-design-react">27.1</a>.</p>
<div class="figure">
<span style="display:block;" id="fig:argon-design-react"></span>
<img src="images/going-further/argon-design-react.png" alt="Argon design template with React." width="100%"><p class="caption">
FIGURE 27.1: Argon design template with React.
</p>
</div>
<p>As another example, <code>{reactable}</code> is an HTML widget developed on top of the <a href="https://github.com/tannerlinsley/react-table"><code>react-table</code></a> library.</p>
<div id="quick-introduction-to-react" class="section level2" number="27.1">
<h2>
<span class="header-section-number">27.1</span> Quick introduction to React<a class="anchor" aria-label="anchor" href="#quick-introduction-to-react"><i class="fas fa-link"></i></a>
</h2>
<p>To understand React, there are few prerequisites, notably basic HTML/CSS/JS knowledge, especially JS modules (see section <a href="survival-kit-javascript.html#about-js-modules">10.4.6.1</a>). However, if you managed to reach this chapter, you should not worry too much.</p>
<div id="setup-1" class="section level3" number="27.1.1">
<h3>
<span class="header-section-number">27.1.1</span> Setup<a class="anchor" aria-label="anchor" href="#setup-1"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Node</strong> and <strong>npm</strong> are required. If you are not sure, run:</p>
<pre><code>node -v
npm -v</code></pre>
<p>At that stage it is also good to have <a href="https://classic.yarnpkg.com/en/docs/install#mac-stable"><code>yarn</code></a>, as weâ€™ll need it for <a href="https://github.com/react-R/reactR">reactR</a>.</p>
<p>If nothing is returned, please refer to section <a href="survival-kit-javascript.html#install-node">10.3.1</a>. To initiate a React <a href="https://create-react-app.dev/">project</a>, we leverage the <a href="https://docs.npmjs.com/cli/v7/commands/npx"><code>npx</code></a> command:</p>
<pre><code>npx create-react-app &lt;PROJECT_NAME&gt;</code></pre>
<p>Replace <code>&lt;PROJECT_NAME&gt;</code> by the real name of your project. If this seems intimidating,
keep in mind this is the same concept that the <a href="https://github.com/ThinkR-open/golem">golem</a> <a href="https://github.com/ThinkR-open/golem">package</a> uses to initiate the creation of robust Shiny projects, except that we work from the terminal.</p>
<p>Once done (the package initialization takes some time),
move to the project folder and launch the demo app:</p>
<pre><code>cd &lt;PROJECT_NAME&gt; &amp;&amp; npm start</code></pre>
<p>If you have yarn, <code>yarn start</code> also works.</p>
<p>You should see something similar to Figure <a href="going-further-reactR.html#fig:basic-react-app">27.2</a>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:basic-react-app"></span>
<img src="images/going-further/basic-react-app.png" alt="npm start opens the React app." width="50%"><p class="caption">
FIGURE 27.2: npm start opens the React app.
</p>
</div>
<p>Congrats! You are running your first React app.</p>
</div>
<div id="basics-3" class="section level3" number="27.1.2">
<h3>
<span class="header-section-number">27.1.2</span> Basics<a class="anchor" aria-label="anchor" href="#basics-3"><i class="fas fa-link"></i></a>
</h3>
<p>We are now all set up to start learning the basics of React. Among all created files,
notice the <code>/src/app.js</code> file. Inside the <code>App</code> function, we remove all the content inside
the <code>return</code> statement to put a simple <code>&lt;h1&gt;Hello, world!&lt;/h1&gt;</code> HTML title. We also clean the imports
as we donâ€™t need any CSS and logo anymore. We obtain:</p>
<div class="sourceCode" id="cb995"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb995-1"><a href="going-further-reactR.html#cb995-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb995-2"><a href="going-further-reactR.html#cb995-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb995-3"><a href="going-further-reactR.html#cb995-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span>Hello, world!<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb995-4"><a href="going-further-reactR.html#cb995-4" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb995-5"><a href="going-further-reactR.html#cb995-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb995-6"><a href="going-further-reactR.html#cb995-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb995-7"><a href="going-further-reactR.html#cb995-7" aria-hidden="true" tabindex="-1"></a><span class="co">// don't remove, this is needed by index.js</span></span>
<span id="cb995-8"><a href="going-further-reactR.html#cb995-8" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span> </span></code></pre></div>
<p>Once done, we run <code>npm build</code> (or <code>yarn build</code>), to rebuild the JS code and <code>npm start</code> to
restart the server and preview the app. In practice, once the server is launched, there is
no need to restart it whenever the code is updated. A simple save will refresh the interface!</p>
<p>The code you see above is a React <strong>component</strong>. The definition is rather simple: it is a function that returns a rather complex piece of UI. How are components rendered by React?</p>
<p>So far, we didnâ€™t have a look at the <code>/src/index.js</code> script. Inside we find:</p>
<div class="sourceCode" id="cb996"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb996-1"><a href="going-further-reactR.html#cb996-1" aria-hidden="true" tabindex="-1"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(</span>
<span id="cb996-2"><a href="going-further-reactR.html#cb996-2" aria-hidden="true" tabindex="-1"></a>  App<span class="op">,</span></span>
<span id="cb996-3"><a href="going-further-reactR.html#cb996-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'root'</span>)</span>
<span id="cb996-4"><a href="going-further-reactR.html#cb996-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div>
<div class="noteblock">
<p>Recent versions of <code>npx create-react-app</code> have <code>&lt;React.StrictMode&gt;&lt;App /&gt;&lt;/React.StrictMode&gt;</code> instead of <code>App</code>, which does the same thing. You may also find <code>&lt;App /&gt;</code>. In practice, we rarely modify this part.</p>
</div>
<p>In short, this inserts the <code>App</code> component inside the element having <strong>root</strong> as id in the main
HTML page. This HTML skeleton may be found in the <code>public/index.html</code> folder. You may imagine that at the end of the day, our app will be composed of multiple bricks and call <code>ReactDOM.render</code> on the top-level component.</p>
<div id="about-jsx" class="section level4" number="27.1.2.1">
<h4>
<span class="header-section-number">27.1.2.1</span> About JSX<a class="anchor" aria-label="anchor" href="#about-jsx"><i class="fas fa-link"></i></a>
</h4>
<p>We just wrote our first React component. Didnâ€™t you notice something weird in that code?
JS and HTML are mixed, in what we called <strong>JSX</strong>, that is a syntax extension to JS. JSX makes the code
less verbose, for instance:</p>
<div class="sourceCode" id="cb997"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb997-1"><a href="going-further-reactR.html#cb997-1" aria-hidden="true" tabindex="-1"></a>React<span class="op">.</span><span class="fu">createElement</span>(</span>
<span id="cb997-2"><a href="going-further-reactR.html#cb997-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">'h1'</span><span class="op">,</span></span>
<span id="cb997-3"><a href="going-further-reactR.html#cb997-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">'Hello, world!'</span></span>
<span id="cb997-4"><a href="going-further-reactR.html#cb997-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div>
<p>does exactly the same thing as above but when the code becomes more complex, it is nearly
impossible to read.</p>
<p>Letâ€™s see how to pass variables into JSX. We want to show <code>Hello, &lt;Your Name&gt;</code>, we store
the name in a variable and modify the <code>app.js</code> code accordingly:</p>
<div class="sourceCode" id="cb998"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb998-1"><a href="going-further-reactR.html#cb998-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb998-2"><a href="going-further-reactR.html#cb998-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">'David'</span><span class="op">;</span></span>
<span id="cb998-3"><a href="going-further-reactR.html#cb998-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb998-4"><a href="going-further-reactR.html#cb998-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb998-5"><a href="going-further-reactR.html#cb998-5" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb998-6"><a href="going-further-reactR.html#cb998-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Expressions are passed within curly brackets <code>{expression}</code> and you may even call functions inside.
Tag attributes also require curly brackets. Letâ€™s modify the title tag to give it a color and
a size.</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb999-1"><a href="going-further-reactR.html#cb999-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb999-2"><a href="going-further-reactR.html#cb999-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">'David'</span><span class="op">;</span></span>
<span id="cb999-3"><a href="going-further-reactR.html#cb999-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb999-4"><a href="going-further-reactR.html#cb999-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span>color<span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> fontSize<span class="op">:</span> <span class="dv">40</span><span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb999-5"><a href="going-further-reactR.html#cb999-5" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb999-6"><a href="going-further-reactR.html#cb999-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Try to save. Why does this fail? We canâ€™t pass multiple object properties inside a single <code>{}</code>.
We need either double brackets like <code>{{object properties: values, ...}}</code> or to store the object in
a variable before:</p>
<div class="sourceCode" id="cb1000"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1000-1"><a href="going-further-reactR.html#cb1000-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb1000-2"><a href="going-further-reactR.html#cb1000-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">'David'</span><span class="op">;</span></span>
<span id="cb1000-3"><a href="going-further-reactR.html#cb1000-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1000-4"><a href="going-further-reactR.html#cb1000-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span>{<span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">40</span>}<span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb1000-5"><a href="going-further-reactR.html#cb1000-5" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1000-6"><a href="going-further-reactR.html#cb1000-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1000-7"><a href="going-further-reactR.html#cb1000-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1000-8"><a href="going-further-reactR.html#cb1000-8" aria-hidden="true" tabindex="-1"></a><span class="co">// OR</span></span>
<span id="cb1000-9"><a href="going-further-reactR.html#cb1000-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1000-10"><a href="going-further-reactR.html#cb1000-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb1000-11"><a href="going-further-reactR.html#cb1000-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> name <span class="op">=</span> <span class="st">'David'</span><span class="op">;</span></span>
<span id="cb1000-12"><a href="going-further-reactR.html#cb1000-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> myStyle <span class="op">=</span> {</span>
<span id="cb1000-13"><a href="going-further-reactR.html#cb1000-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> <span class="st">'red'</span><span class="op">,</span> </span>
<span id="cb1000-14"><a href="going-further-reactR.html#cb1000-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">40</span></span>
<span id="cb1000-15"><a href="going-further-reactR.html#cb1000-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1000-16"><a href="going-further-reactR.html#cb1000-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1000-17"><a href="going-further-reactR.html#cb1000-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span>myStyle<span class="va">}</span><span class="kw">&gt;</span>Hello, <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb1000-18"><a href="going-further-reactR.html#cb1000-18" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1000-19"><a href="going-further-reactR.html#cb1000-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Notice that we write CSS properties following the <strong>camelCase</strong> syntax, <code>font-size</code> being equivalent to <code>fontSize</code>.</p>
</div>
<div id="react-map" class="section level4" number="27.1.2.2">
<h4>
<span class="header-section-number">27.1.2.2</span> Combining components<a class="anchor" aria-label="anchor" href="#react-map"><i class="fas fa-link"></i></a>
</h4>
<p>The whole interest is to combine multiple components to create reusable pieces. We edit the above code
to create a <code>SayHello</code> component. Notice the <strong>props</strong> parameter. It is a way to pass configuration from the parent component. In that case, we want to display the person name, that is <code>props.name</code>. In the meantime, we edit the <code>App</code> parent component and call <code>SayHello</code> three times, passing a different name like <code>&lt;SayHello name="David" /&gt;</code> (this is the reason why we recover <code>props.name</code> in the lower-level component):</p>
<div class="sourceCode" id="cb1001"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1001-1"><a href="going-further-reactR.html#cb1001-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">SayHello</span>(props) {</span>
<span id="cb1001-2"><a href="going-further-reactR.html#cb1001-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1001-3"><a href="going-further-reactR.html#cb1001-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;h1&gt;</span>Hello, <span class="va">{</span>props<span class="op">.</span><span class="at">name</span><span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb1001-4"><a href="going-further-reactR.html#cb1001-4" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1001-5"><a href="going-further-reactR.html#cb1001-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1001-6"><a href="going-further-reactR.html#cb1001-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1001-7"><a href="going-further-reactR.html#cb1001-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1001-8"><a href="going-further-reactR.html#cb1001-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb1001-9"><a href="going-further-reactR.html#cb1001-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span>(</span>
<span id="cb1001-10"><a href="going-further-reactR.html#cb1001-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;&gt;</span></span>
<span id="cb1001-11"><a href="going-further-reactR.html#cb1001-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"David"</span> <span class="fu">/&gt;</span></span>
<span id="cb1001-12"><a href="going-further-reactR.html#cb1001-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"Lisa"</span> <span class="fu">/&gt;</span></span>
<span id="cb1001-13"><a href="going-further-reactR.html#cb1001-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;SayHello</span> <span class="ot">name</span><span class="op">=</span><span class="st">"Simon"</span> <span class="fu">/&gt;</span></span>
<span id="cb1001-14"><a href="going-further-reactR.html#cb1001-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/&gt;</span></span>
<span id="cb1001-15"><a href="going-further-reactR.html#cb1001-15" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1001-16"><a href="going-further-reactR.html#cb1001-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="noteblock">
<p>Notice the enclosing <code>&lt;&gt;...&lt;/&gt;</code>. This is called a React <strong>fragment</strong> and useful if we donâ€™t want to
insert any extra <code>&lt;div&gt;</code> in the DOM.</p>
</div>
<p>We could be even more efficient by leveraging the lists capabilities. We create an array
of names and apply the <code>map</code> method to return the corresponding <code>&lt;SayHello /&gt;</code> sub-component:</p>
<div class="sourceCode" id="cb1002"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1002-1"><a href="going-further-reactR.html#cb1002-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> names <span class="op">=</span> [<span class="st">'David'</span><span class="op">,</span> <span class="st">'Lisa'</span><span class="op">,</span> <span class="st">'Simon'</span>]<span class="op">;</span></span>
<span id="cb1002-2"><a href="going-further-reactR.html#cb1002-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb1002-3"><a href="going-further-reactR.html#cb1002-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> sayHelloToAll <span class="op">=</span> names<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb1002-4"><a href="going-further-reactR.html#cb1002-4" aria-hidden="true" tabindex="-1"></a>    (name) <span class="kw">=&gt; </span><span class="fu">&lt;SayHello</span> <span class="ot">key</span><span class="op">=</span><span class="va">{</span>name<span class="va">}</span> <span class="ot">name</span><span class="op">=</span><span class="va">{</span>name<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb1002-5"><a href="going-further-reactR.html#cb1002-5" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span> </span>
<span id="cb1002-6"><a href="going-further-reactR.html#cb1002-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span>(sayHelloToAll)<span class="op">;</span></span>
<span id="cb1002-7"><a href="going-further-reactR.html#cb1002-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="warningblock">
<p>By convention, all elements inside a <code>map</code> require <strong>keys</strong>.</p>
</div>
<p><strong>Props</strong> are <strong>read-only</strong> and must not be modified within their own component. How do we update components then?</p>
</div>
<div id="react-hooks" class="section level4" number="27.1.2.3">
<h4>
<span class="header-section-number">27.1.2.3</span> Component state<a class="anchor" aria-label="anchor" href="#react-hooks"><i class="fas fa-link"></i></a>
</h4>
<p>A component <strong>state</strong> is private and controlled by this same component. Since React 16.8 and the introduction of <strong>hooks</strong>, this is not necessary to convert the component function to a <a href="https://reactjs.org/docs/components-and-props.html#function-and-class-components">class</a>.
The easiest example to illustrate hooks capabilities is the button. Each time, we click on a button,
we want to keep the current number of clicks in a state, like the <code><a href="https://rdrr.io/pkg/shiny/man/actionButton.html">actionButton()</a></code>. We start by
importing the <code>useState</code> function from <code>react</code> and create a new <code>ActionButton</code> component.
Inside, we set the state with <code>useState</code>, which creates the state variable <code>count</code>, as well as the function to update it, namely <code>setCount</code>. This way to create two variables at once is called array <strong>destructuring</strong>. We set the initial number of counts to 0:</p>
<div class="sourceCode" id="cb1003"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1003-1"><a href="going-further-reactR.html#cb1003-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {useState} <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb1003-2"><a href="going-further-reactR.html#cb1003-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1003-3"><a href="going-further-reactR.html#cb1003-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ActionButton</span>() {</span>
<span id="cb1003-4"><a href="going-further-reactR.html#cb1003-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="fu">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb1003-5"><a href="going-further-reactR.html#cb1003-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Next step is to create the button skeleton. We provide an <code>onClick</code> property that updates
the button state. Inside, we write an anonymous function, which calls <code>setCount</code> and increments
the count value by 1. At this point, you may replace the <code>app.js</code> content by:</p>
<div class="sourceCode" id="cb1004"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1004-1"><a href="going-further-reactR.html#cb1004-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {useState} <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb1004-2"><a href="going-further-reactR.html#cb1004-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1004-3"><a href="going-further-reactR.html#cb1004-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ActionButton</span>() {</span>
<span id="cb1004-4"><a href="going-further-reactR.html#cb1004-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="fu">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb1004-5"><a href="going-further-reactR.html#cb1004-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span>(</span>
<span id="cb1004-6"><a href="going-further-reactR.html#cb1004-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="fu">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb1004-7"><a href="going-further-reactR.html#cb1004-7" aria-hidden="true" tabindex="-1"></a>      Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb1004-8"><a href="going-further-reactR.html#cb1004-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb1004-9"><a href="going-further-reactR.html#cb1004-9" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1004-10"><a href="going-further-reactR.html#cb1004-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1004-11"><a href="going-further-reactR.html#cb1004-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1004-12"><a href="going-further-reactR.html#cb1004-12" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">App</span>() {</span>
<span id="cb1004-13"><a href="going-further-reactR.html#cb1004-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1004-14"><a href="going-further-reactR.html#cb1004-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;ActionButton</span> <span class="fu">/&gt;</span></span>
<span id="cb1004-15"><a href="going-further-reactR.html#cb1004-15" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1004-16"><a href="going-further-reactR.html#cb1004-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1004-17"><a href="going-further-reactR.html#cb1004-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1004-18"><a href="going-further-reactR.html#cb1004-18" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></span></code></pre></div>
<p>We may improve the previous app and add a reset button within the <code>ActionButton</code> component that
sets the count back to 0:</p>
<div class="sourceCode" id="cb1005"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1005-1"><a href="going-further-reactR.html#cb1005-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ActionButton</span>() {</span>
<span id="cb1005-2"><a href="going-further-reactR.html#cb1005-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="fu">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb1005-3"><a href="going-further-reactR.html#cb1005-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span>(</span>
<span id="cb1005-4"><a href="going-further-reactR.html#cb1005-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;&gt;</span></span>
<span id="cb1005-5"><a href="going-further-reactR.html#cb1005-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="fu">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb1005-6"><a href="going-further-reactR.html#cb1005-6" aria-hidden="true" tabindex="-1"></a>      Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb1005-7"><a href="going-further-reactR.html#cb1005-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb1005-8"><a href="going-further-reactR.html#cb1005-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="fu">setCount</span>(<span class="dv">0</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb1005-9"><a href="going-further-reactR.html#cb1005-9" aria-hidden="true" tabindex="-1"></a>      Reset</span>
<span id="cb1005-10"><a href="going-further-reactR.html#cb1005-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb1005-11"><a href="going-further-reactR.html#cb1005-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/&gt;</span></span>
<span id="cb1005-12"><a href="going-further-reactR.html#cb1005-12" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1005-13"><a href="going-further-reactR.html#cb1005-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>It would make more sense to only show the reset button once the button has been clicked at least once. We define the <code>isResetVisible</code> variable which is <code>true</code> whenever the
count is higher than 0 and <code>false</code> if the count is 0, leveraging the JS <strong>ternary</strong> operator. We store the reset button in a variable and only return something if <code>isResetVisible</code> is <code>true</code>:</p>
<div class="sourceCode" id="cb1006"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1006-1"><a href="going-further-reactR.html#cb1006-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ActionButton</span>() {</span>
<span id="cb1006-2"><a href="going-further-reactR.html#cb1006-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="fu">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb1006-3"><a href="going-further-reactR.html#cb1006-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> isResetVisible <span class="op">=</span> count <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="kw">true</span> <span class="op">:</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb1006-4"><a href="going-further-reactR.html#cb1006-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> resetButton<span class="op">;</span></span>
<span id="cb1006-5"><a href="going-further-reactR.html#cb1006-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (isResetVisible) {</span>
<span id="cb1006-6"><a href="going-further-reactR.html#cb1006-6" aria-hidden="true" tabindex="-1"></a>    resetButton <span class="op">= </span><span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="fu">setCount</span>(<span class="dv">0</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb1006-7"><a href="going-further-reactR.html#cb1006-7" aria-hidden="true" tabindex="-1"></a>      Reset</span>
<span id="cb1006-8"><a href="going-further-reactR.html#cb1006-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb1006-9"><a href="going-further-reactR.html#cb1006-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1006-10"><a href="going-further-reactR.html#cb1006-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1006-11"><a href="going-further-reactR.html#cb1006-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;&gt;</span></span>
<span id="cb1006-12"><a href="going-further-reactR.html#cb1006-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="fu">setCount</span>(count <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb1006-13"><a href="going-further-reactR.html#cb1006-13" aria-hidden="true" tabindex="-1"></a>        Number of clicks: <span class="va">{</span>count<span class="va">}</span></span>
<span id="cb1006-14"><a href="going-further-reactR.html#cb1006-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;/button</span> <span class="kw">&gt;</span></span>
<span id="cb1006-15"><a href="going-further-reactR.html#cb1006-15" aria-hidden="true" tabindex="-1"></a>      <span class="va">{</span>resetButton<span class="va">}</span></span>
<span id="cb1006-16"><a href="going-further-reactR.html#cb1006-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/&gt;</span></span>
<span id="cb1006-17"><a href="going-further-reactR.html#cb1006-17" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1006-18"><a href="going-further-reactR.html#cb1006-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Thatâ€™s all folks! Now that you get a better understanding of how React works, letâ€™s see how to use it with Shiny.</p>
</div>
</div>
</div>
<div id="introduction-to-reactr" class="section level2" number="27.2">
<h2>
<span class="header-section-number">27.2</span> Introduction to <code>{reactR}</code><a class="anchor" aria-label="anchor" href="#introduction-to-reactr"><i class="fas fa-link"></i></a>
</h2>
<div class="importantblock">
<p>This section has been written and tested with <a href="https://github.com/react-R/reactR">reactR</a> <code>0.4.4</code>.
Some features may change in future releases.</p>
</div>
<p>In this part, we see how to leverage <a href="https://github.com/react-R/reactR">reactR</a> <span class="citation">(<a href="references.html#ref-R-reactR" role="doc-biblioref">Inc et al. 2021</a>)</span> to bring a few component from the <code>reactstrap</code> <a href="https://reactstrap.github.io/">library</a> to Shiny.</p>
<p>To install <a href="https://github.com/react-R/reactR">reactR</a>:</p>
<div class="sourceCode" id="cb1007"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># stable from CRAN</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"reactR"</span><span class="op">)</span>

<span class="co"># lastest from GitHub</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"react-R/reactR"</span><span class="op">)</span></code></pre></div>
<p>In the following, we are going to propose an implementation of the <code>reactstrap</code> button, which is a Bootstrap 4 and React-powered action button.</p>
<div id="setup-2" class="section level3" number="27.2.1">
<h3>
<span class="header-section-number">27.2.1</span> Setup<a class="anchor" aria-label="anchor" href="#setup-2"><i class="fas fa-link"></i></a>
</h3>
<p><a href="https://github.com/react-R/reactR">reactR</a> exposes the <code>scaffoldReactShinyInput()</code>, which sets the necessary pieces of code to get started with the input development (see Figure <a href="going-further-reactR.html#fig:reactR-init-input">27.3</a>):</p>
<ul>
<li>An <code>&lt;input_name&gt;.R</code> file containing the input skeleton as well as its related update function, located in the <code>./R</code> folder.
It also creates a custom HTML dependency pointing to the input JS logic.</li>
<li>A <code>jsx</code> file with a boilerplate to start developing the input JS logic, located in the <code>./srcjs</code> folder.</li>
<li>A <code>package.json</code> file containing dependencies.</li>
<li>An <code>app.R</code> file to host the input demonstration code.</li>
<li>A <code>webpack.config.js</code> file (discussed later).</li>
<li>Classic R package files like <code>DESCRIPTION</code>, <code>.Rbuildignore</code>â€¦
Interestingly, the <code>.Rbuildignore</code> contains a few lines to ignore non-standard files and folders like <code>srcjs</code> and <code>package.json</code>.</li>
</ul>
<p>Besides, providing an optional dependency with a name and version taken from <strong>npm</strong> installs all necessary dependencies in the <code>package.json</code> file:</p>
<div class="sourceCode" id="cb1008"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"reactstrapTest"</span><span class="op">)</span>
<span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/create_package.html">create_package</a></span><span class="op">(</span><span class="va">path</span>, rstudio <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Wait new project to be created before running </span>
<span class="co"># the following!!!</span>
<span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/scaffoldReactShinyInput.html">scaffoldReactShinyInput</a></span><span class="op">(</span>
  <span class="st">"action_button"</span>, 
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    <span class="st">"reactstrap"</span> <span class="op">=</span> <span class="st">"^8.9.0"</span>
  <span class="op">)</span>
<span class="op">)</span></code></pre></div>
<div class="figure">
<span style="display:block;" id="fig:reactR-init-input"></span>
<img src="images/going-further/reactR-init-input.png" alt="Package initialization with {reactR}." width="100%"><p class="caption">
FIGURE 27.3: Package initialization with {reactR}.
</p>
</div>
<p>Note that <a href="https://github.com/react-R/reactR">reactR</a> provides <strong>webpack</strong> as JS code manager. To <strong>build</strong> the JS code, we go to the RStudio terminal tab (or any terminal) and run at the package root:</p>
<pre><code>yarn install
yarn run webpack --mode=development</code></pre>
<p>This installs all dependencies listed in the <code>package.json</code> file and creates a <code>package-lock.json</code> file. If you ever used <a href="https://rstudio.github.io/renv/">renv</a>, this is very similar and guarantees isolation of your package. All dependencies are stored in the <code>node_modules</code> folder.</p>
<p>The <code>run webpack</code> command compiles the JS in production-ready code. Should you need to customize the build pipeline, the webpack configuration is located in <code>webpack.config.js</code>. On the R side, the generated JS file is referenced in HTML dependencies, located in the <code>&lt;input_name&gt;.R</code> file.
If you specify the <code>--mode=development</code> tag, it falls back to development code.</p>
<p>In the following, we see how to customize the newly created component.</p>
</div>
<div id="customize-the-r-logic" class="section level3" number="27.2.2">
<h3>
<span class="header-section-number">27.2.2</span> Customize the R logic<a class="anchor" aria-label="anchor" href="#customize-the-r-logic"><i class="fas fa-link"></i></a>
</h3>
<p>A <a href="https://github.com/react-R/reactR">reactR</a> input is composed of R and JS code that both exchange information. Upon initialization, we obtained a <code>.R/action_button.R</code> code:</p>
<div class="sourceCode" id="cb1010"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">action_buttonInput</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputId</span>, <span class="va">default</span> <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">createReactShinyInput</a></span><span class="op">(</span>
    <span class="va">inputId</span>,
    <span class="st">"action_button"</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
      name <span class="op">=</span> <span class="st">"action_button-input"</span>,
      version <span class="op">=</span> <span class="st">"1.0.0"</span>,
      src <span class="op">=</span> <span class="st">"www/reactstrapTest/action_button"</span>,
      package <span class="op">=</span> <span class="st">"reactstrapTest"</span>,
      script <span class="op">=</span> <span class="st">"action_button.js"</span>
    <span class="op">)</span>,
    <span class="va">default</span>,
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">tags</a></span><span class="op">$</span><span class="va">span</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>For convenience, we remove the input suffix to name it <code>action_button</code>.
Overall, this function calls <code><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">reactR::createReactShinyInput()</a></code> that:</p>
<ul>
<li>Gives the widget a class and id. The class is targeted on the JS side (see <a href="going-further-reactR.html#reactR-jsx-logic">27.2.3</a>) and is necessary to make it working.</li>
<li>Sets all necessary dependencies (React, â€¦), as well as the internal JS code (see section <a href="going-further-reactR.html#reactR-jsx-logic">27.2.3</a>).</li>
<li>Creates the input HTML code with <a href="https://github.com/rstudio/htmltools">htmltools</a>.</li>
<li>Sets the default value, through the <code>default</code> parameter.</li>
<li>Allows passing a list of options inside the <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> container. By default, nothing is sent but we will use it very soon.</li>
</ul>
<p>We also have the corresponding update input function, which we renamed to <code><a href="https://rdrr.io/pkg/reactstrapTest/man/update_action_button.html">update_action_button()</a></code> for consistency:</p>
<div class="sourceCode" id="cb1011"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">update_action_button</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">session</span>, <span class="va">inputId</span>, <span class="va">value</span>, 
                                 <span class="va">configuration</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">message</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">value</span><span class="op">)</span>
  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">configuration</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">message</span><span class="op">$</span><span class="va">configuration</span> <span class="op">&lt;-</span> <span class="va">configuration</span>
  <span class="op">}</span>
  <span class="va">session</span><span class="op">$</span><span class="fu">sendInputMessage</span><span class="op">(</span><span class="va">inputId</span>, <span class="va">message</span><span class="op">)</span>;
<span class="op">}</span></code></pre></div>
<p>In Shiny, the end user cannot decide what is the initial value of an action button. It is always set to 0 by default. Therefore, we decided to remove the default parameter from <code><a href="https://rdrr.io/pkg/reactstrapTest/man/action_button.html">action_button()</a></code> and make it 0 by default.
In order to add a label and change the button color, we introduce two extra parameters and
add them to the configuration list:</p>
<div class="sourceCode" id="cb1012"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">action_button</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span>
  <span class="va">inputId</span>,
  <span class="va">label</span>,
  <span class="va">status</span> <span class="op">=</span> <span class="st">"primary"</span>
<span class="op">)</span> <span class="op">{</span>
  <span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">createReactShinyInput</a></span><span class="op">(</span>
    <span class="co"># ... unchanged ...</span>
    default <span class="op">=</span> <span class="fl">0</span>,
    configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      label <span class="op">=</span> <span class="va">label</span>,
      status <span class="op">=</span> <span class="va">status</span>
    <span class="op">)</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">tags</a></span><span class="op">$</span><span class="va">div</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>Letâ€™s see below how to make this interactive with some JSX code.</p>
</div>
<div id="reactR-jsx-logic" class="section level3" number="27.2.3">
<h3>
<span class="header-section-number">27.2.3</span> Implement the JS logic<a class="anchor" aria-label="anchor" href="#reactR-jsx-logic"><i class="fas fa-link"></i></a>
</h3>
<p>Itâ€™s time to develop the logic. For now, the <code>action_button.jsx</code> file only contains a placeholder generated by <a href="https://github.com/react-R/reactR">reactR</a>. The reactstrap documentation provides a <a href="https://reactstrap.github.io/components/buttons/">boilerplate</a>, which we slightly modified, according to the <a href="https://github.com/react-R/reactR">reactR</a> documentation:</p>
<div class="sourceCode" id="cb1013"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1013-1"><a href="going-further-reactR.html#cb1013-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { reactShinyInput } <span class="im">from</span> <span class="st">'reactR'</span><span class="op">;</span></span>
<span id="cb1013-2"><a href="going-further-reactR.html#cb1013-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Button } <span class="im">from</span> <span class="st">'reactstrap'</span><span class="op">;</span></span>
<span id="cb1013-3"><a href="going-further-reactR.html#cb1013-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1013-4"><a href="going-further-reactR.html#cb1013-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ActionButton</span>() {</span>
<span id="cb1013-5"><a href="going-further-reactR.html#cb1013-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1013-6"><a href="going-further-reactR.html#cb1013-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;Button</span></span>
<span id="cb1013-7"><a href="going-further-reactR.html#cb1013-7" aria-hidden="true" tabindex="-1"></a>      <span class="ot">color</span><span class="op">=</span><span class="st">"primary"</span><span class="fu">&gt;</span></span>
<span id="cb1013-8"><a href="going-further-reactR.html#cb1013-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;/Button&gt;</span></span>
<span id="cb1013-9"><a href="going-further-reactR.html#cb1013-9" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1013-10"><a href="going-further-reactR.html#cb1013-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1013-11"><a href="going-further-reactR.html#cb1013-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1013-12"><a href="going-further-reactR.html#cb1013-12" aria-hidden="true" tabindex="-1"></a><span class="fu">reactShinyInput</span>(</span>
<span id="cb1013-13"><a href="going-further-reactR.html#cb1013-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">'.action_button'</span><span class="op">,</span></span>
<span id="cb1013-14"><a href="going-further-reactR.html#cb1013-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">'reactstrapTest.action_button'</span><span class="op">,</span></span>
<span id="cb1013-15"><a href="going-further-reactR.html#cb1013-15" aria-hidden="true" tabindex="-1"></a>  ActionButton</span>
<span id="cb1013-16"><a href="going-further-reactR.html#cb1013-16" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div>
<p>As you can see, we need to import the <code>Button</code> component from <code>reactstrap</code> as well as
the <code>reactShinyInput</code> function from the <a href="https://github.com/react-R/reactR">reactR</a> package. To generate our JS code, we recompile with <code>yarn run webpack</code>, document and reload the package functions:</p>
<div class="sourceCode" id="cb1014"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">document</span><span class="op">(</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>In the <code>./app.R</code> script, we have to tell Shiny we want to use Bootstrap 4 instead of Bootstrap 3, through the <code><a href="https://rstudio.github.io/bslib/reference/bs_theme.html">bslib::bs_theme</a></code> function. Erase the existing code and replace it by the following:</p>
<div class="sourceCode" id="cb1015"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "demo-button", </span>
<span class="co">#   package = "reactstrapTest" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">reactstrapTest</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib/reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/reactstrapTest/man/action_button.html">action_button</a></span><span class="op">(</span><span class="st">"plop"</span>, <span class="st">"Click me!"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plop</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>As you can see Figure <a href="going-further-reactR.html#fig:react-action-button-basic">27.4</a>, the button label is not displayed nor its value.
This is because we missed to leverage the component arguments that are <code>configuration</code>, <code>value</code>, <code>setValue</code>, making the link between R and JS.</p>
<div class="figure">
<span style="display:block;" id="fig:react-action-button-basic"></span>
<img src="images/going-further/react-action-button-basic.png" alt="Work-in-progress action button with React." width="100%"><p class="caption">
FIGURE 27.4: Work-in-progress action button with React.
</p>
</div>
</div>
<div id="improve-the-js-logic" class="section level3" number="27.2.4">
<h3>
<span class="header-section-number">27.2.4</span> Improve the JS logic<a class="anchor" aria-label="anchor" href="#improve-the-js-logic"><i class="fas fa-link"></i></a>
</h3>
<p>We modify the <code>action_button.jsx</code> code to add those three parameters to the <code>ActionButton</code> component:</p>
<div class="sourceCode" id="cb1016"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1016-1"><a href="going-further-reactR.html#cb1016-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ActionButton</span>({ configuration<span class="op">,</span> value<span class="op">,</span> setValue }) {</span>
<span id="cb1016-2"><a href="going-further-reactR.html#cb1016-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1016-3"><a href="going-further-reactR.html#cb1016-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;Button</span></span>
<span id="cb1016-4"><a href="going-further-reactR.html#cb1016-4" aria-hidden="true" tabindex="-1"></a>      <span class="ot">color</span><span class="op">=</span><span class="va">{</span>configuration<span class="op">.</span><span class="at">status</span><span class="va">}</span></span>
<span id="cb1016-5"><a href="going-further-reactR.html#cb1016-5" aria-hidden="true" tabindex="-1"></a>      <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="fu">setValue</span>(value <span class="op">+</span> <span class="dv">1</span>)<span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb1016-6"><a href="going-further-reactR.html#cb1016-6" aria-hidden="true" tabindex="-1"></a>      <span class="va">{</span>configuration<span class="op">.</span><span class="at">label</span><span class="va">}</span></span>
<span id="cb1016-7"><a href="going-further-reactR.html#cb1016-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;/Button&gt;</span></span>
<span id="cb1016-8"><a href="going-further-reactR.html#cb1016-8" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1016-9"><a href="going-further-reactR.html#cb1016-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Remember that <code>configuration</code> is an R list and sent to JS as a JSON object with <code><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">reactR::createReactShinyInput()</a></code>. On the JS side, we access its properties with <code>configuration.&lt;PROPERTY&gt;</code>. <code>value</code> is the current button value, which is 0 when the app is started.</p>
<p>How do we update the button value upon click? Well, this is pretty straightforward. The <code>Button</code> element has an <code>onClick</code> <a href="https://reactstrap.github.io/components/buttons/">property</a> inside which we can pass the <code>setValue</code> function and increment it by 1 (<code>setValue</code> is an internal hook, see section <a href="going-further-reactR.html#react-hooks">27.1.2.3</a>).</p>
<p>In the below example, we update a button from the server side with <code><a href="https://rdrr.io/pkg/reactstrapTest/man/update_action_button.html">update_action_button()</a></code>:</p>
<div class="sourceCode" id="cb1017"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "demo-update-button", </span>
<span class="co">#   package = "reactstrapTest" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">reactstrapTest</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib/reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidRow</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/pkg/reactstrapTest/man/action_button.html">action_button</a></span><span class="op">(</span><span class="st">"plop"</span>, <span class="st">"Click me!"</span><span class="op">)</span>,
    <span class="fu"><a href="https://rdrr.io/pkg/reactstrapTest/man/action_button.html">action_button</a></span><span class="op">(</span><span class="st">"update"</span>, <span class="st">"Update button 1"</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plop</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">update</span>, <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/pkg/reactstrapTest/man/update_action_button.html">update_action_button</a></span><span class="op">(</span>
      <span class="va">session</span>, <span class="st">"plop"</span>,
      configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        label <span class="op">=</span> <span class="st">"New text"</span>,
        status <span class="op">=</span> <span class="st">"success"</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span>, ignoreInit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>Clicking on the first button should increment its value in the R console. You may play around
by changing the default color. After clicking on the second button, you should get the result shown Figure <a href="going-further-reactR.html#fig:react-action-button">27.5</a>.</p>
<div class="figure">
<span style="display:block;" id="fig:react-action-button"></span>
<img src="images/going-further/react-action-button.png" alt="Fully working React-powered action button." width="100%"><p class="caption">
FIGURE 27.5: Fully working React-powered action button.
</p>
</div>
</div>
<div id="exercise-1-1" class="section level3" number="27.2.5">
<h3>
<span class="header-section-number">27.2.5</span> Exercise 1<a class="anchor" aria-label="anchor" href="#exercise-1-1"><i class="fas fa-link"></i></a>
</h3>
<p>Based on the previous example and the <code>reactstrap</code> documentation, improve the action button component:</p>
<ol style="list-style-type: decimal">
<li>Add it a <code>size</code> style parameter.</li>
<li>Add it a <code>disabled</code> parameter.</li>
<li>Add it an <code>outline</code> style parameter.</li>
</ol>
</div>
<div id="technical-considerations" class="section level3" number="27.2.6">
<h3>
<span class="header-section-number">27.2.6</span> Technical considerations<a class="anchor" aria-label="anchor" href="#technical-considerations"><i class="fas fa-link"></i></a>
</h3>
<p>Under the hood, the JS <code>reactShinyInput</code> function provides a wrapper to automatically <strong>bind</strong> the input element. This is convenient as it allows you to solely focus on the component logic rather than binding it to the shiny system. It takes three parameters:</p>
<ul>
<li>The <strong>element</strong> class, which is obtained from the R side by <code>createReactShinyInput()</code>.</li>
<li>The <strong>input binding</strong> name, which is useful to storing a reference in the <code>Shiny.InputBindings</code> registry. Recent versions of <a href="https://github.com/react-R/reactR">reactR</a> use <code>&lt;PACKAGE_NAME&gt;.&lt;INPUT_NAME&gt;</code> as convention, which avoids conflicts between inputs belonging to two different packages.</li>
<li>The React <strong>component</strong> function.</li>
<li>There is an optional fourth parameter allowing you to pass custom <strong>options</strong> like
rate <a href="https://github.com/react-R/reactR/blob/7dccb68a0989cf642d4a5a3eb90b59d1ae773002/srcjs/input.js#L137">policies</a>.</li>
</ul>
<p>Overall, <a href="https://github.com/react-R/reactR/blob/7dccb68a0989cf642d4a5a3eb90b59d1ae773002/srcjs/input.js#L72"><code>reactShinyInput</code></a> extends the <code>Shiny.InputBinding</code> class by providing extra methods like:</p>
<div class="sourceCode" id="cb1018"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1018-1"><a href="going-further-reactR.html#cb1018-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getInputConfiguration</span>(el) {</span>
<span id="cb1018-2"><a href="going-further-reactR.html#cb1018-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">$</span>(el)<span class="op">.</span><span class="fu">data</span>(<span class="st">'configuration'</span>)<span class="op">;</span></span>
<span id="cb1018-3"><a href="going-further-reactR.html#cb1018-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1018-4"><a href="going-further-reactR.html#cb1018-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setInputConfiguration</span>(el<span class="op">,</span> configuration) {</span>
<span id="cb1018-5"><a href="going-further-reactR.html#cb1018-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">$</span>(el)<span class="op">.</span><span class="fu">data</span>(<span class="st">'configuration'</span><span class="op">,</span> configuration)<span class="op">;</span></span>
<span id="cb1018-6"><a href="going-further-reactR.html#cb1018-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>getInputConfiguration</code> and <code>setInputConfiguration</code>, respectively, get and set the user-provided configuration, passed in the <code>createReactShinyInput()</code> R side function. Under the hood (in addition to the <a href="https://github.com/react-R/reactR">reactR</a>, React, ReactTools HTML dependencies and any user-defined custom dependencies), <code>createReactShinyInput()</code> generates three tag elements:</p>
<ul>
<li>The first tag is the element placeholder containing the unique <strong>id</strong>. React will insert
the component inside this target with <code>ReactDOM.render</code>.</li>
<li>The second tag is a script containing the <strong>value</strong> passed as <strong>JSON</strong>.</li>
<li>The second tag is a script containing the <strong>configuration</strong>, also passed as JSON.</li>
</ul>
<div class="sourceCode" id="cb1019"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">createReactShinyInput</a></span><span class="op">(</span>
  inputId <span class="op">=</span> <span class="st">"plop"</span>, 
  class <span class="op">=</span> <span class="st">"myinput"</span>, 
  dependencies <span class="op">=</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/findDependencies.html">findDependencies</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon</a></span><span class="op">(</span><span class="st">"bicycle"</span><span class="op">)</span><span class="op">)</span>, 
  default <span class="op">=</span> <span class="fl">0</span>, 
  configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span>, b <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span>, 
  container <span class="op">=</span> <span class="va">div</span>
<span class="op">)</span></code></pre></div>
<!-- Manually formatted for pdf output -->
<pre><code>#&gt; &lt;div id="plop" class="myinput"&gt;&lt;/div&gt;
#&gt; &lt;script id="plop_value" type="application/json"&gt;0&lt;/script&gt;
#&gt; &lt;script 
#&gt;  id="plop_configuration" 
#&gt;  type="application/json"&gt;{"a":1,"b":"test"}
#&gt; &lt;/script&gt;</code></pre>
<p>The configuration and values are processed in the <strong>initialize</strong> method since it is called before the input is bound:</p>
<div class="sourceCode" id="cb1021"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1021-1"><a href="going-further-reactR.html#cb1021-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Within reactR's initialize method...</span></span>
<span id="cb1021-2"><a href="going-further-reactR.html#cb1021-2" aria-hidden="true" tabindex="-1"></a><span class="fu">$</span>(el)<span class="op">.</span><span class="fu">data</span>(<span class="st">'value'</span><span class="op">,</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(<span class="fu">$</span>(el)<span class="op">.</span><span class="fu">next</span>()<span class="op">.</span><span class="fu">text</span>()))<span class="op">;</span></span>
<span id="cb1021-3"><a href="going-further-reactR.html#cb1021-3" aria-hidden="true" tabindex="-1"></a><span class="fu">$</span>(el)<span class="op">.</span><span class="fu">data</span>(</span>
<span id="cb1021-4"><a href="going-further-reactR.html#cb1021-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">'configuration'</span><span class="op">,</span> </span>
<span id="cb1021-5"><a href="going-further-reactR.html#cb1021-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(<span class="fu">$</span>(el)<span class="op">.</span><span class="fu">next</span>()<span class="op">.</span><span class="fu">next</span>()<span class="op">.</span><span class="fu">text</span>())</span>
<span id="cb1021-6"><a href="going-further-reactR.html#cb1021-6" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code></pre></div>
<p>The configuration and values are stored in the corresponding data attributes. The most important part is the <strong>render</strong> method, which creates the React element based upon its configuration and value and renders it in the DOM:</p>
<div class="sourceCode" id="cb1022"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1022-1"><a href="going-further-reactR.html#cb1022-1" aria-hidden="true" tabindex="-1"></a><span class="co">// reactR's render method</span></span>
<span id="cb1022-2"><a href="going-further-reactR.html#cb1022-2" aria-hidden="true" tabindex="-1"></a><span class="fu">render</span>(el) {</span>
<span id="cb1022-3"><a href="going-further-reactR.html#cb1022-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> element <span class="op">=</span> React<span class="op">.</span><span class="fu">createElement</span>(component<span class="op">,</span> {</span>
<span id="cb1022-4"><a href="going-further-reactR.html#cb1022-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">configuration</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getInputConfiguration</span>(el)<span class="op">,</span></span>
<span id="cb1022-5"><a href="going-further-reactR.html#cb1022-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">value</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">getValue</span>(el)<span class="op">,</span></span>
<span id="cb1022-6"><a href="going-further-reactR.html#cb1022-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">setValue</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">setValue</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span><span class="op">,</span> el)<span class="op">,</span></span>
<span id="cb1022-7"><a href="going-further-reactR.html#cb1022-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">el</span><span class="op">:</span> el</span>
<span id="cb1022-8"><a href="going-further-reactR.html#cb1022-8" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb1022-9"><a href="going-further-reactR.html#cb1022-9" aria-hidden="true" tabindex="-1"></a>  ReactDOM<span class="op">.</span><span class="fu">render</span>(element<span class="op">,</span> el)<span class="op">;</span></span>
<span id="cb1022-10"><a href="going-further-reactR.html#cb1022-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The <code>render</code> method is called once inside <code>subscribe</code> and also each time the element is updated
with <code>receiveMessage</code>.</p>
</div>
<div id="reactR-exercise-2" class="section level3" number="27.2.7">
<h3>
<span class="header-section-number">27.2.7</span> Exercise 2<a class="anchor" aria-label="anchor" href="#reactR-exercise-2"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>Add an <code>icon</code> (from Font Awesome) parameter to the <code>ActionButton</code> component.
Hint: You might find it helpful to capture its HTML dependency with <code><a href="https://rdrr.io/pkg/htmltools/man/findDependencies.html">htmltools::findDependencies(iconTag)</a></code> so as to properly render it. In HTML <code><a href="https://rdrr.io/pkg/shiny/man/icon.html">icon("bicycle")</a></code> produces <code>&lt;i class="fa fa-bicycle" role="presentation" aria-label="bicycle icon"&gt;&lt;/i&gt;</code>. However, in React we want <code>&lt;i className="fa fa-bicycle /&gt;</code>. Therefore, you will have to extract the icon class and send it to JS in the configuration list.</li>
<li>Implement the logic on the JS side. Hint: you may use the code in appendix <a href="code-outputs.html#reactR-exercise-2-appendix">A.3.1.1</a>.</li>
<li>Try your code inside a Shiny app.</li>
</ol>
</div>
<div id="add-another-input" class="section level3" number="27.2.8">
<h3>
<span class="header-section-number">27.2.8</span> Add another input<a class="anchor" aria-label="anchor" href="#add-another-input"><i class="fas fa-link"></i></a>
</h3>
<div id="button-group-input" class="section level4" number="27.2.8.1">
<h4>
<span class="header-section-number">27.2.8.1</span> Button group input<a class="anchor" aria-label="anchor" href="#button-group-input"><i class="fas fa-link"></i></a>
</h4>
<p>In this section, we design a radio input consisting of multiple buttons displayed side by side. The corresponding widget has a label and must show the currently selected value.</p>
<p>We initialized the input elements with:</p>
<div class="sourceCode" id="cb1023"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/scaffoldReactShinyInput.html">scaffoldReactShinyInput</a></span><span class="op">(</span><span class="st">"button_group"</span><span class="op">)</span></code></pre></div>
<p>As shown previously, this creates <code>./srcjs/button_group.jsx</code> and <code>.R/button_group.R</code>.
The <code><a href="https://rdrr.io/pkg/reactstrapTest/man/button_group.html">button_group()</a></code> function has four parameters, the most critical being <code>choices</code>.
We expect the user to pass a vector like <code><a href="https://rdrr.io/r/base/names.html">names(mtcars)</a></code>, and we selected the first choice by default. We might add a <code>selected</code> parameter but leave this for the reader as a simple exercise. The function is defined below:</p>
<div class="sourceCode" id="cb1024"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">button_group</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span>
  <span class="va">inputId</span>,
  <span class="va">label</span>,
  <span class="va">choices</span>,
  <span class="va">status</span> <span class="op">=</span> <span class="st">"primary"</span>
<span class="op">)</span> <span class="op">{</span>
  <span class="fu">reactR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactR/man/createReactShinyInput.html">createReactShinyInput</a></span><span class="op">(</span>
    <span class="va">inputId</span>,
    <span class="st">"button_group"</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
      name <span class="op">=</span> <span class="st">"button_group-input"</span>,
      version <span class="op">=</span> <span class="st">"1.0.0"</span>,
      src <span class="op">=</span> <span class="st">"www/reactstrapTest"</span>,
      package <span class="op">=</span> <span class="st">"reactstrapTest"</span>,
      script <span class="op">=</span> <span class="st">"button_group.js"</span>
    <span class="op">)</span>,
    default <span class="op">=</span> <span class="va">choices</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
    configuration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
      label <span class="op">=</span> <span class="va">label</span>,
      choices <span class="op">=</span> <span class="va">choices</span>,
      status <span class="op">=</span> <span class="va">status</span>
    <span class="op">)</span>,
    <span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/builder.html">tags</a></span><span class="op">$</span><span class="va">div</span>
  <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>The expected <code>reactstrap</code> button group HTML structure is rather simple including a title, the list of button tags and the selected item in a paragraph:</p>
<div class="sourceCode" id="cb1025"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1025-1"><a href="going-further-reactR.html#cb1025-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div&gt;</span></span>
<span id="cb1025-2"><a href="going-further-reactR.html#cb1025-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;h5&gt;</span>Radio Buttons<span class="kw">&lt;/h5&gt;</span></span>
<span id="cb1025-3"><a href="going-further-reactR.html#cb1025-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">&lt;ButtonGroup&gt;</span></span>
<span id="cb1025-4"><a href="going-further-reactR.html#cb1025-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;Button</span> </span>
<span id="cb1025-5"><a href="going-further-reactR.html#cb1025-5" aria-hidden="true" tabindex="-1"></a>      <span class="ot">color</span><span class="op">=</span><span class="st">"primary"</span> </span>
<span id="cb1025-6"><a href="going-further-reactR.html#cb1025-6" aria-hidden="true" tabindex="-1"></a>      <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span><span class="op">...</span><span class="va">}</span> </span>
<span id="cb1025-7"><a href="going-further-reactR.html#cb1025-7" aria-hidden="true" tabindex="-1"></a>      <span class="ot">active</span><span class="op">=</span><span class="va">{</span>value <span class="op">===</span> <span class="dv">1</span><span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb1025-8"><a href="going-further-reactR.html#cb1025-8" aria-hidden="true" tabindex="-1"></a>      One</span>
<span id="cb1025-9"><a href="going-further-reactR.html#cb1025-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;/Button&gt;</span></span>
<span id="cb1025-10"><a href="going-further-reactR.html#cb1025-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;Button</span> </span>
<span id="cb1025-11"><a href="going-further-reactR.html#cb1025-11" aria-hidden="true" tabindex="-1"></a>      <span class="ot">color</span><span class="op">=</span><span class="st">"primary"</span> </span>
<span id="cb1025-12"><a href="going-further-reactR.html#cb1025-12" aria-hidden="true" tabindex="-1"></a>      <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span><span class="op">...</span><span class="va">}</span> </span>
<span id="cb1025-13"><a href="going-further-reactR.html#cb1025-13" aria-hidden="true" tabindex="-1"></a>      <span class="ot">active</span><span class="op">=</span><span class="va">{</span>value <span class="op">===</span> <span class="dv">2</span><span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb1025-14"><a href="going-further-reactR.html#cb1025-14" aria-hidden="true" tabindex="-1"></a>      Two</span>
<span id="cb1025-15"><a href="going-further-reactR.html#cb1025-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;/Button&gt;</span></span>
<span id="cb1025-16"><a href="going-further-reactR.html#cb1025-16" aria-hidden="true" tabindex="-1"></a>    // ... other buttons ...</span>
<span id="cb1025-17"><a href="going-further-reactR.html#cb1025-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">&lt;/ButtonGroup&gt;</span></span>
<span id="cb1025-18"><a href="going-further-reactR.html#cb1025-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;p&gt;</span>Selected: <span class="va">{</span>value<span class="va">}</span><span class="kw">&lt;/p&gt;</span></span>
<span id="cb1025-19"><a href="going-further-reactR.html#cb1025-19" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>Inside <code>./srcjs/button_group.jsx</code>, we first import the required function and components:</p>
<div class="sourceCode" id="cb1026"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1026-1"><a href="going-further-reactR.html#cb1026-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { reactShinyInput } <span class="im">from</span> <span class="st">'reactR'</span><span class="op">;</span></span>
<span id="cb1026-2"><a href="going-further-reactR.html#cb1026-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Button<span class="op">,</span> ButtonGroup } <span class="im">from</span> <span class="st">'reactstrap'</span><span class="op">;</span></span></code></pre></div>
<p>We then design the <code>ButtonGroupUI</code> JS function that will return our component. The critical step is to recover the user choices (<code>configuration.choices</code>) and store them in a variable. Then, we leverage the <code>map</code> feature (see section <a href="going-further-reactR.html#react-map">27.1.2.2</a>) to iterate over each choice and programmatically create all buttons:</p>
<div class="sourceCode" id="cb1027"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1027-1"><a href="going-further-reactR.html#cb1027-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ButtonGroupUI</span>({ configuration<span class="op">,</span> value<span class="op">,</span> setValue }) {</span>
<span id="cb1027-2"><a href="going-further-reactR.html#cb1027-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> choices <span class="op">=</span> configuration<span class="op">.</span><span class="at">choices</span></span>
<span id="cb1027-3"><a href="going-further-reactR.html#cb1027-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// programmatically create buttons</span></span>
<span id="cb1027-4"><a href="going-further-reactR.html#cb1027-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> buttons <span class="op">=</span> choices<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb1027-5"><a href="going-further-reactR.html#cb1027-5" aria-hidden="true" tabindex="-1"></a>    (choice) <span class="kw">=&gt; </span><span class="fu">&lt;Button</span></span>
<span id="cb1027-6"><a href="going-further-reactR.html#cb1027-6" aria-hidden="true" tabindex="-1"></a>      <span class="ot">key</span><span class="op">=</span><span class="va">{</span>choice<span class="va">}</span></span>
<span id="cb1027-7"><a href="going-further-reactR.html#cb1027-7" aria-hidden="true" tabindex="-1"></a>      <span class="ot">color</span><span class="op">=</span><span class="va">{</span>configuration<span class="op">.</span><span class="at">status</span><span class="va">}</span></span>
<span id="cb1027-8"><a href="going-further-reactR.html#cb1027-8" aria-hidden="true" tabindex="-1"></a>      <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="fu">setValue</span>(choice)<span class="va">}</span></span>
<span id="cb1027-9"><a href="going-further-reactR.html#cb1027-9" aria-hidden="true" tabindex="-1"></a>      <span class="ot">active</span><span class="op">=</span><span class="va">{</span>value <span class="op">===</span> choice<span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb1027-10"><a href="going-further-reactR.html#cb1027-10" aria-hidden="true" tabindex="-1"></a>        <span class="va">{</span>choice<span class="va">}</span></span>
<span id="cb1027-11"><a href="going-further-reactR.html#cb1027-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">&lt;/Button&gt;</span></span>
<span id="cb1027-12"><a href="going-further-reactR.html#cb1027-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1027-13"><a href="going-further-reactR.html#cb1027-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ... other code</span></span></code></pre></div>
<p>We finally return the whole component in a fragment <code>&lt;&gt;</code> to prevent creating extra <code>div</code>. The whole code is shown below:</p>
<div class="sourceCode" id="cb1028"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1028-1"><a href="going-further-reactR.html#cb1028-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { reactShinyInput } <span class="im">from</span> <span class="st">'reactR'</span><span class="op">;</span></span>
<span id="cb1028-2"><a href="going-further-reactR.html#cb1028-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Button<span class="op">,</span> ButtonGroup } <span class="im">from</span> <span class="st">'reactstrap'</span><span class="op">;</span></span>
<span id="cb1028-3"><a href="going-further-reactR.html#cb1028-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1028-4"><a href="going-further-reactR.html#cb1028-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">ButtonGroupUI</span>({ configuration<span class="op">,</span> value<span class="op">,</span> setValue }) {</span>
<span id="cb1028-5"><a href="going-further-reactR.html#cb1028-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1028-6"><a href="going-further-reactR.html#cb1028-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ... create buttons ... //</span></span>
<span id="cb1028-7"><a href="going-further-reactR.html#cb1028-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1028-8"><a href="going-further-reactR.html#cb1028-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (</span>
<span id="cb1028-9"><a href="going-further-reactR.html#cb1028-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;&gt;</span></span>
<span id="cb1028-10"><a href="going-further-reactR.html#cb1028-10" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;h5&gt;</span><span class="va">{</span>configuration<span class="op">.</span><span class="at">label</span><span class="va">}</span><span class="kw">&lt;/h5&gt;</span></span>
<span id="cb1028-11"><a href="going-further-reactR.html#cb1028-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">&lt;ButtonGroup&gt;</span></span>
<span id="cb1028-12"><a href="going-further-reactR.html#cb1028-12" aria-hidden="true" tabindex="-1"></a>       <span class="va">{</span>buttons<span class="va">}</span></span>
<span id="cb1028-13"><a href="going-further-reactR.html#cb1028-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">&lt;/ButtonGroup&gt;</span></span>
<span id="cb1028-14"><a href="going-further-reactR.html#cb1028-14" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;p&gt;</span>Selected: <span class="va">{</span>value<span class="va">}</span><span class="kw">&lt;/p&gt;</span></span>
<span id="cb1028-15"><a href="going-further-reactR.html#cb1028-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/&gt;</span></span>
<span id="cb1028-16"><a href="going-further-reactR.html#cb1028-16" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1028-17"><a href="going-further-reactR.html#cb1028-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, we may test the newly created element in a Shiny app:</p>
<div class="sourceCode" id="cb1029"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### RUN ### </span>
<span class="co"># OSUICode::run_example( </span>
<span class="co">#  "demo-button-group", </span>
<span class="co">#   package = "reactstrapTest" </span>
<span class="co"># ) </span>

<span class="co">### APP CODE ### </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">reactstrapTest</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span>
  theme <span class="op">=</span> <span class="fu">bslib</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/bslib/reference/bs_theme.html">bs_theme</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"4"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/pkg/reactstrapTest/man/button_group.html">button_group</a></span><span class="op">(</span>
    <span class="st">"plop"</span>,
    <span class="st">"A group of buttons"</span>,
    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">)</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">plop</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></code></pre></div>
<p>According to Figure <a href="going-further-reactR.html#fig:react-button-group">27.6</a>, there are rooms for improvements, but it is a good start!</p>
<div class="figure">
<span style="display:block;" id="fig:react-button-group"></span>
<img src="images/going-further/react-button-group.png" alt="Fully working React powered button group (similar to the Shiny radio input)." width="100%"><p class="caption">
FIGURE 27.6: Fully working React powered button group (similar to the Shiny radio input).
</p>
</div>
</div>
<div id="modularize-js-code" class="section level4" number="27.2.8.2">
<h4>
<span class="header-section-number">27.2.8.2</span> Modularize JS code<a class="anchor" aria-label="anchor" href="#modularize-js-code"><i class="fas fa-link"></i></a>
</h4>
<p>Imagine if we had to repeat this for ten different elements. As we start to accumulate components, it is good practice to start modularizing our code. Inside the <code>./srcjs/action_button.jsx</code>, we wrap the <code>reactShinyInput</code> call into an <code>export</code> statement:</p>
<div class="sourceCode" id="cb1030"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1030-1"><a href="going-further-reactR.html#cb1030-1" aria-hidden="true" tabindex="-1"></a><span class="co">// To add in ./srcjs/action_button.jsx</span></span>
<span id="cb1030-2"><a href="going-further-reactR.html#cb1030-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="fu">initActionButton</span>(){</span>
<span id="cb1030-3"><a href="going-further-reactR.html#cb1030-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactShinyInput</span>(</span>
<span id="cb1030-4"><a href="going-further-reactR.html#cb1030-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'.action_button'</span><span class="op">,</span></span>
<span id="cb1030-5"><a href="going-further-reactR.html#cb1030-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'reactstrapTest.action_button'</span><span class="op">,</span></span>
<span id="cb1030-6"><a href="going-further-reactR.html#cb1030-6" aria-hidden="true" tabindex="-1"></a>    ActionButton</span>
<span id="cb1030-7"><a href="going-further-reactR.html#cb1030-7" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1030-8"><a href="going-further-reactR.html#cb1030-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We apply the same strategy in the <code>./srcjs/button_group.jsx</code> script:</p>
<div class="sourceCode" id="cb1031"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1031-1"><a href="going-further-reactR.html#cb1031-1" aria-hidden="true" tabindex="-1"></a><span class="co">// To add in `./srcjs/button_group.jsx`</span></span>
<span id="cb1031-2"><a href="going-further-reactR.html#cb1031-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="fu">initButtonGroup</span>(){</span>
<span id="cb1031-3"><a href="going-further-reactR.html#cb1031-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reactShinyInput</span>(</span>
<span id="cb1031-4"><a href="going-further-reactR.html#cb1031-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'.button_group'</span><span class="op">,</span></span>
<span id="cb1031-5"><a href="going-further-reactR.html#cb1031-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'reactstrapTest.button_group'</span><span class="op">,</span></span>
<span id="cb1031-6"><a href="going-further-reactR.html#cb1031-6" aria-hidden="true" tabindex="-1"></a>    ButtonGroupUI</span>
<span id="cb1031-7"><a href="going-further-reactR.html#cb1031-7" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb1031-8"><a href="going-further-reactR.html#cb1031-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We create a <code>main.jsx</code> file containing the necessary code to import and initialize our two components:</p>
<div class="sourceCode" id="cb1032"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb1032-1"><a href="going-further-reactR.html#cb1032-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> initActionButton <span class="im">from</span> <span class="st">'./action_button.jsx'</span><span class="op">;</span></span>
<span id="cb1032-2"><a href="going-further-reactR.html#cb1032-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> initButtonGroup <span class="im">from</span> <span class="st">'./button_group.jsx'</span><span class="op">;</span></span>
<span id="cb1032-3"><a href="going-further-reactR.html#cb1032-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1032-4"><a href="going-further-reactR.html#cb1032-4" aria-hidden="true" tabindex="-1"></a><span class="fu">initActionButton</span>()<span class="op">;</span></span>
<span id="cb1032-5"><a href="going-further-reactR.html#cb1032-5" aria-hidden="true" tabindex="-1"></a><span class="fu">initButtonGroup</span>()<span class="op">;</span></span></code></pre></div>
<p>We have to modify the <code>webpack.config.js</code> to change the entry point to <code>main.jsx</code>, whose output will be <code>main.js</code>:</p>
<div class="sourceCode" id="cb1033"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1033-1"><a href="going-further-reactR.html#cb1033-1" aria-hidden="true" tabindex="-1"></a>entry<span class="op">:</span> [</span>
<span id="cb1033-2"><a href="going-further-reactR.html#cb1033-2" aria-hidden="true" tabindex="-1"></a>  path<span class="op">.</span><span class="fu">join</span>(<span class="bu">__dirname</span><span class="op">,</span> <span class="st">'srcjs'</span><span class="op">,</span> <span class="st">'main.jsx'</span>)</span>
<span id="cb1033-3"><a href="going-further-reactR.html#cb1033-3" aria-hidden="true" tabindex="-1"></a>]<span class="op">,</span></span>
<span id="cb1033-4"><a href="going-further-reactR.html#cb1033-4" aria-hidden="true" tabindex="-1"></a>output<span class="op">:</span> {</span>
<span id="cb1033-5"><a href="going-further-reactR.html#cb1033-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">path</span><span class="op">:</span> path<span class="op">.</span><span class="fu">join</span>(<span class="bu">__dirname</span><span class="op">,</span> <span class="st">'inst/www/reactstrapTest'</span>)<span class="op">,</span></span>
<span id="cb1033-6"><a href="going-further-reactR.html#cb1033-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">filename</span><span class="op">:</span> <span class="st">'main.js'</span></span>
<span id="cb1033-7"><a href="going-further-reactR.html#cb1033-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This means we have to update the HTML dependency on the R side, for instance in the <code>button_group.R</code>, we replace the existing dependency by the following:</p>
<div class="sourceCode" id="cb1034"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ... button_group.R start</span>
<span class="co"># ... </span>
  <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/htmlDependency.html">htmlDependency</a></span><span class="op">(</span>
    name <span class="op">=</span> <span class="st">"button_group-input"</span>,
    version <span class="op">=</span> <span class="st">"1.0.0"</span>,
    src <span class="op">=</span> <span class="st">"www/reactstrapTest"</span>,
    package <span class="op">=</span> <span class="st">"reactstrapTest"</span>,
    script <span class="op">=</span> <span class="st">"main.js"</span>
  <span class="op">)</span>
<span class="co"># ...</span>
<span class="co"># button_group.R end</span></code></pre></div>
<p>We proceed similarly in the <code>action_button.R</code> script.</p>
</div>
</div>
</div>
<div id="further-resources-1" class="section level2" number="27.3">
<h2>
<span class="header-section-number">27.3</span> Further resources<a class="anchor" aria-label="anchor" href="#further-resources-1"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://appsilon.github.io/shiny.fluent">shiny.fluent</a> <span class="citation">(<a href="references.html#ref-R-shiny.fluent" role="doc-biblioref">Rogala and Zyla 2021</a>)</span> leverages <code>{shiny.react}</code> <span class="citation">(<a href="references.html#ref-R-shiny.react" role="doc-biblioref">Zyla and Rogala 2021</a>)</span>, which is another <a href="https://appsilon.github.io/shiny.react/index.html">alternative</a> to bring React to Shiny.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="mobile-going-further.html"><span class="header-section-number">26</span> Fine-tune {shinyMobile}</a></div>
<div class="next"><a href="going-further-webdev.html"><span class="header-section-number">28</span> Shiny and modern web development</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#going-further-reactR"><span class="header-section-number">27</span> Shiny and React with {reactR}</a></li>
<li>
<a class="nav-link" href="#quick-introduction-to-react"><span class="header-section-number">27.1</span> Quick introduction to React</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#setup-1"><span class="header-section-number">27.1.1</span> Setup</a></li>
<li><a class="nav-link" href="#basics-3"><span class="header-section-number">27.1.2</span> Basics</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#introduction-to-reactr"><span class="header-section-number">27.2</span> Introduction to {reactR}</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#setup-2"><span class="header-section-number">27.2.1</span> Setup</a></li>
<li><a class="nav-link" href="#customize-the-r-logic"><span class="header-section-number">27.2.2</span> Customize the R logic</a></li>
<li><a class="nav-link" href="#reactR-jsx-logic"><span class="header-section-number">27.2.3</span> Implement the JS logic</a></li>
<li><a class="nav-link" href="#improve-the-js-logic"><span class="header-section-number">27.2.4</span> Improve the JS logic</a></li>
<li><a class="nav-link" href="#exercise-1-1"><span class="header-section-number">27.2.5</span> Exercise 1</a></li>
<li><a class="nav-link" href="#technical-considerations"><span class="header-section-number">27.2.6</span> Technical considerations</a></li>
<li><a class="nav-link" href="#reactR-exercise-2"><span class="header-section-number">27.2.7</span> Exercise 2</a></li>
<li><a class="nav-link" href="#add-another-input"><span class="header-section-number">27.2.8</span> Add another input</a></li>
</ul>
</li>
<li><a class="nav-link" href="#further-resources-1"><span class="header-section-number">27.3</span> Further resources</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/blob/master/going-further-reactR.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/DivadNojnarg/outstanding-shiny-ui/edit/master/going-further-reactR.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Outstanding User Interfaces with Shiny</strong>" was written by David Granjon. It was last built on 2022-02-02.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
